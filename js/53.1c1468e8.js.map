{"version":3,"file":"js/53.1c1468e8.js","mappings":"gwBA8BA,MAAMA,EAAQ,EAORC,EAAQ,EAIRC,GAAgB,SAAI,GAEpBC,GAAU,SAAS,IAAsC,IAAhCH,EAAMI,uBAA+BF,EAAcG,MAAQ,EAAI,I,y+BCxC9F,MAAMC,EAAc,EAEpB,Q,2BCJSC,MAAM,uBACPC,MAAA,kG,GAEKA,MAAA,kE,kCAHT,QAMM,MANN,EAMM,EAHF,OAEM,MAFN,EAEM,EADF,QAAa,uB,cCJzB,MAAMC,EAAS,CAAC,EAGV,GAA2B,OAAgBA,EAAQ,CAAC,CAAC,SAASC,KAEpE,Q,66BCuDA,MAAMT,EAAQ,EAIRD,EAAQ,GAuBR,SACFW,EAAQ,cACRC,EAAgB,KAChB,EAAAC,EAAA,IAAgB,SAAM,IAAMb,KAAQ,SAElCc,GAAsB,QAAI,IAShC,SAASC,EAAyBC,GAC9B,MAAMC,EAAcD,EAAEE,OAAOC,QAAQ,yBAC/BC,EAAWH,EAAYI,yBAE7B,EAAAC,EAAA,GAA2BtB,EAAMuB,OAAQvB,EAAMwB,aAAcxB,EAAMyB,WAAYL,EACnF,C,OAZA,EAAAM,EAAA,GACI1B,EAAM2B,KACNb,EACAH,EACAC,G,4sDChGJ,MAAM,EAAc,EAEpB,Q,kCCDO,SAASgB,EAAe5B,GAC3B6B,EAAA,OAAWC,KAAM9B,GAEjB8B,KAAKH,KAAO3B,EAAM2B,KAClBG,KAAKC,KAAO/B,EAAM+B,KAClBD,KAAKE,OAAShC,EAAMgC,OACpBF,KAAKG,OAASjC,EAAMiC,OACpBH,KAAKI,UAAYlC,EAAMkC,SAC3B,CAVAC,OAAOC,eAAeR,EAAgBC,EAAA,GAYtCD,EAAeS,UAAUC,cAAgB,WACrC,OAAOR,KAAKH,MACR,IAAK,QACD,OAAOG,KAAKE,OAAOO,kBAAoB,GAE3C,IAAK,OACD,OAAOT,KAAKE,OAAOQ,iBAAmB,GAGlD,EAEAZ,EAAeS,UAAUI,QAAU,WAC/B,OAAIX,KAAKC,KAAaD,KAAKC,KACpBD,KAAKH,IAChB,EAEAC,EAAeS,UAAUK,YAAc,SAASC,GAC5C,MAAMC,EAAahB,EAAeS,UAAUC,cAAcO,KAAKf,MAE/Dc,EAAWE,KAAK,CACZC,SAAS,EACTpC,SAAUgC,GAElB,EAEAf,EAAeS,UAAUW,mBAAqB,SAASL,GACnD,MAAMC,EAAahB,EAAeS,UAAUC,cAAcO,KAAKf,MAE/D,IAAI,IAAImB,EAAI,EAAGA,EAAEL,EAAWM,OAAQD,IAChC,GAAIL,EAAWK,GAAGtC,WAAagC,EAAI,CAC/BC,EAAWO,OAAOF,EAAG,GACrB,KACJ,CAER,E,+kPC+KA,MAAMhD,EAAQ,EAKRD,EAAQ,EAeRoD,GAAoB,SAEpBC,GAA+B,SAAS,WAC1C,OAAOD,EAAkBE,eAAe,CACpCX,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAAS,wCAEjB,IAEMC,GAAmC,SAAS,WAC9C,OAAOL,EAAkBE,eAAe,CACpCX,GAAI3C,EAAM0D,iBACVH,MAAO,kBACPC,QAAS,wCAEjB,IACMG,GAA6C,SAAS,WACxD,MAAMC,EAAwBzB,OAAO0B,KAAKR,EAA6BhD,MAAMyD,QAE7E,OAAOlC,EAAeS,UAAUC,cAAcO,KAC1CY,EAAiCpD,OACnC0D,QAAO,EAAEpD,eAC6C,IAA7CiD,EAAsBI,QAAQrD,IAE7C,IAEA,SAASsD,EAA0BtB,GAC/B,OAAOU,EAA6BhD,MAAMyD,OAAOnB,EACrD,CAEA,MAAMuB,GAAsB,SAAS,WACjC,OAAO,SAAkBC,mBAC7B,IAEA,SAASC,EAA4BC,GACjC,GAAoB,IAAjBA,EAAoB,CACnB,MAAMC,GAAe,SAErBA,EAAaH,oBAAsB,CAC/B5C,OAAQ,KACRE,WAAY,KAEpB,CAEA,OAAO4C,CACX,CAEA,SAASE,EAAaC,EAAOC,EAAQ,KAAMC,GAAyB,GAChEzE,EAAM,YAAa,CACfuE,QACAC,QACAC,0BAER,CAEA,SAASC,EAAiBF,EAAQ,KAAMG,EAAe,GACnD,MAAMjC,GAAK,EAAAkC,EAAA,IAA8B,EAAAC,EAAA,MAEzCP,EACI,CAAC,CAAE5B,KAAIiC,iBACPH,EAER,CAEA,MAAMM,GAAmB,QAAI,CAAC,GAY9B,SAASC,EAA2BzD,EAAQkD,EAAOG,GAC/C,MAAMK,EAAkB7B,EAAkBE,eAAe,CACrDX,GAAIpB,EACJgC,MAAO,QACPC,QAAS,yCAGP0B,EAAoB7B,EAA6BhD,MAAM2B,OAAOmD,iBAEpE,IAAIC,EAA4BH,GAAiBrC,aAAasC,GAE1DG,EAAc,GAUlB,GARAD,GAA2BE,KAAKC,IACH,MAAtBA,EAAe,IACdF,EAAYvC,KAAKyC,EAAe,GAAG,GAAG,GAC1C,IAGAF,GAAanC,SAAQmC,EAAc,IAEnCN,EAAiB1E,MAAMkB,GAKvB,OAJAwD,EAAiB1E,MAAMkB,IAAU,OACjCtB,EAAM,WAAY,CACduF,OAAQjE,IAKhBwD,EAAiB1E,MAAMkB,IAAU,EAEjC,MAAMkE,EAAWJ,EAAYC,KAAK3C,IACvB,CACHA,KACAiC,mBAIRa,EAAS3C,KAAK,CACVH,GAAI,MACJpB,SACAqD,iBAGJL,EACIkB,EAASvC,QAAU,EAAIuC,EAAW,GAClChB,GACA,EAER,EA3DA,SACI,IAAMzE,EAAMwE,QACXkB,IACG,IAAI,IAAIF,KAAUT,EAAiB1E,OACmB,IAA/CqF,EAAOC,WAAU,EAAEhD,QAAQA,IAAO6C,MAAgBT,EAAiB1E,MAAMmF,IAAU,EAC1F,GAEJ,CAAEI,MAAM,IAuDZ,MAAMC,GAAkB,QAAI,CAAC,GACvBC,GAAS,UAEf,SAASC,EAAmBxE,EAAQyE,IACM,IAAlCH,EAAgBxF,MAAMkB,IACP,IAAXyE,GAA2B,IAAXA,KAExBH,EAAgBxF,MAAMkB,GAAUyE,EACpC,CAEA,SAASC,EAAiB1E,GACtBuE,EAAOhD,KAAK,CAAEoD,MAAO,CAAEC,EAAG5E,EAAO6E,WAAW,IAAK,IAAKC,GAAI,MAC9D,C,08IC7XA,MAAM,GAAc,GAEpB,U,UCIaC,IAAsB,SAAY,cAAe,CAC1DC,MAAO,WAAa,OAChBC,KAAM,CACFC,UAAW,IAEfC,MAAO,CACH,CACI/E,KAAM,OACNgF,MAAO,QAEX,CACIhF,KAAM,SACNgF,MAAO,UAEX,CACIhF,KAAM,OACNgF,MAAO,QAEX,CACIhF,KAAM,SACNgF,MAAO,UAEX,CACIhF,KAAM,SACNgF,MAAO,UAEX,CACIhF,KAAM,eACNgF,MAAO,eAEX,CACIhF,KAAM,WACNgF,MAAO,YAEX,CACIhF,KAAM,SACNgF,MAAO,UAEX,CACIhF,KAAM,MACNgF,MAAO,OAEX,CACIhF,KAAM,WACNgF,MAAO,aA3CC,EA+CpBC,QAAS,CACLC,oBAAA,SAAoBN,GAChB,OAAOA,EAAMC,KAAKC,UAAUF,EAAMC,KAAKC,UAAUvD,OAAS,EAC9D,GAEJ4D,QAAS,CACLC,oBAAA,SAAoBhF,EAAc/B,QAAA,IAAAA,IAAAA,EAAA,IAC9B8B,KAAK0E,KAAKC,UAAU3D,KAAK,CAAEf,KAAI,EAAE/B,MAAK,GAC1C,EACAgH,uBAAsB,WAClBlF,KAAK0E,KAAKC,UAAUQ,KACxB,EACAC,mBAAkB,WACdpF,KAAK0E,KAAKC,UAAY,EAC1B,K,+mDC1CR,MAAMU,EAAkBb,KAElBrG,EAAQ,EAId,SAASmH,IACLD,EAAgBH,wBACpB,CAEA,SAASK,IACLF,EAAgBD,qBAChBjH,EAAM,QACV,C,8mBCvCA,MAAM,GAAc,GAEpB,U,qiBCuBA,MAAMD,EAAQ,E,uVCzBd,MAAM,GAAc,GAEpB,U,grJC2DA,MAAMA,EAAQ,EAmBRuG,GAAQ,QAAS,CACnB/F,MAAO,CAAC,IAGNP,EAAQ,EAId,SAASqH,IACLrH,EAAM,6BAA8B,CAChC0C,GAAI3C,EAAM2C,GACVI,SAAU/C,EAAM+C,SAExB,C,8tCC7FA,MAAM,GAAc,GAEpB,U,4sOC8IA,MAAM/C,EAAQ,EAYRoD,GAAoB,SAEpBmE,EAAmBnE,EAAkBE,eAAe,CACtDX,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAAS,yCACVM,OAEG0D,GAA4B,SAC9B,IAAMpE,EAAkBE,eAAe,CACnCX,GAAI3C,EAAM0D,iBACVH,MAAO,kBACPC,QAAS,2CAIXiE,EAAqBD,EAA0BnH,MAAMsB,KAErD+F,GAAuB,SAAS,IAC3B9F,EAAeS,UAAUC,cAAcO,KAC1C2E,EAA0BnH,OAC5B0D,QAAOpD,IAAiC,IAArBA,EAASoC,UAAkBuC,KAAIqC,GAAKA,EAAEhH,aAGzDiH,GAAsB,SACxB,KACI,MAAMC,EAAuB,IAAIC,IAAI3F,OAAO0B,KAAK0D,IACjD,OAAOM,EAAqBE,WAAW,IAAID,IAAIJ,EAAqBrH,OAAO,IAKnF,SAAS2H,EAA+BrF,EAAII,GACxC,MAAMH,EAAahB,EAAeS,UAAUC,cAAcO,KAAK2E,EAA0BnH,OACnF4H,EAAsBrF,EAAW+C,WAAU,EAAEhF,cAAcA,IAAagC,KAElD,IAAzBsF,IAEHrF,EAAWqF,GAAqBlF,QAAUA,GAE1C,UAAuBmF,SACnB,EAAAC,GAAA,GAAgB,CACZ3E,QAAS,GACT4E,MAAO,CACHC,WAAY,gEAEhBC,WAAY,EACR,EAAAC,GAAA,GACI,SACA,CACI,OAAUf,EAA0BnH,MAAM2B,QAE9C,GACA,CACIW,GAAI3C,EAAM0D,iBACVH,MAAO,kBACPC,QAAS,6CAMjC,CAGA,MAAM2D,EAAkBb,KAExB,SAASS,EAAoBN,EAAWzG,EAAQ,CAAC,GAC7CmH,EAAgBJ,oBAAoBN,EAAWzG,EACnD,CAEA,SAASwI,EAA6B/G,GAClCsF,EAAoB,eAAgB,CAChCpE,GAAIlB,GAEZ,C,0qFCvOA,MAAM,GAAc,GAEpB,U,i2CCoBA,MAAMzB,EAAQ,E,ulBCtBd,MAAM,GAAc,GAEpB,U,0tNC0EA,MAAMA,EAAQ,EAWRmH,EAAkBb,KAExB,SAASS,EAAoB0B,GACzBtB,EAAgBJ,oBAAoB0B,EACxC,CAEA,IAAIC,GAA0B,EAC1BC,GAAiB,E,OAErB,SAAc,KACV,MAAMC,GAAoB,SAEpBnF,EAAmCmF,EAAkBtF,eAAe,CACtEX,GAAI3C,EAAM0D,iBACVH,MAAO,kBACPC,QAAS,yCAGPH,EAA+BuF,EAAkBtF,eAAe,CAClEX,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAAS,yCAGbkF,EAAyB9G,EAAeS,UAAUC,cAAcO,KAC5DY,IACDP,OAEC2F,MAAMH,KAAyBA,EAAyB,GAE5DC,EAAiBtF,GAA8BrB,QAAQmD,gBAAgB,I,mpCCrH3E,MAAM,GAAc,GAEpB,U,ykBCmBA,MAAMnF,EAAQ,E,yXCrBd,MAAM,GAAc,GAEpB,U,gyCCeA,MAAM8I,EAAmBxC,KAEnBrG,EAAQ,EAIRD,EAAQ,EAWR+I,GAAgB,SAAS,WAC3B,OACqC,IAAjC/I,EAAMgJ,uBACNC,EAA4B5I,MAC5B6I,EAAqB7I,KAE7B,IAEM6I,GAAuB,SAAS,WAClC,OAAOJ,EAAiBpC,KAC5B,IAEMuC,GAA8B,SAAS,WACzC,MAAME,EAAgBD,EAAqB7I,MAAM0D,QAAQpC,GAASA,EAAKgF,MAAMyC,cAAcC,SAASrJ,EAAMsJ,aAAaF,iBAEvH,OAAkC,IAA1BD,GAAejG,OAAe,CAAC,CAAEvB,KAAM,OAAQgF,MAAO,SAAYwC,CAC9E,IAEA,SAASI,EAAqB5I,GAC1BV,EAAM,uBAAwB,CAC1B0G,MAAOhG,EAASgG,MAChBhF,KAAMhB,EAASgB,KACf6H,UAAWxJ,EAAMsJ,cAEzB,C,6RC1DA,MAAM,GAAc,GAEpB,U,UCJS9I,MAAA,sP,IACIA,MAAA,6F,IAIL,OAAsC,OAAjCA,MAAA,wBAA0B,S,mCALnC,QAMM,MANN,GAMM,EALF,OAEM,MAFN,GAEM,EADF,QAAa,sBAGjB,I,CCLR,MAAM,GAAS,CAAC,EAGV,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,MAEpE,UCNIiJ,GAAiB,wDAErB,SAASC,KACLD,GAASA,GAAOE,MAAM,IAAIC,MAAK,WAAM,SAAMC,KAAKC,QAAX,IAAqBC,KAAK,GACnE,CAEO,IAAMC,GAAS,SAAUC,EAAaC,GACzC,IAAIC,EAAc,GAEdC,GAAoB,EAExB,OAAmB,IAAbA,IAA4B,OAANF,QAAM,IAANA,OAAM,EAANA,EAAQhH,QAAQ,CACxCwG,KAEA,IAAMW,EAAaR,KAAKS,IACpBb,GAAOvG,OAAS+G,EAChBJ,KAAKU,MAAQd,GAAOvG,OAAS2G,KAAKC,WAClC,EAEJK,EAAMV,GAAOe,MAAMH,EAAYA,EAAaJ,IAElC,OAANC,QAAM,IAANA,OAAM,EAANA,EAAQhH,UAAWgH,EAAOb,SAASc,KAAMC,GAAW,E,CAG5D,OAAOD,CACX,ECvBO,SAASM,IAAmB,UAACC,KAAc1K,IAC9C,MAAM2C,EAAKqH,GAAO,EAAGU,GAUrB,OARK1K,EAAM+B,OAAM/B,EAAM+B,KAAO/B,GAAO2B,MAErCG,KAAKa,GAAM,IACJ3C,EACH+B,KAAM/B,GAAO+B,KACbJ,KAAM3B,GAAO2B,MAGT3B,EAAM2B,MACV,IAAK,SACL,IAAK,eACGG,KAAKa,IAAKgI,UAAS7I,KAAKa,GAAIgI,QAAU,IAGtD,C,29BC6CA,MAAM3K,EAAQ,EAWRuG,GAAQ,QAAS,CACnB+C,aAAc,KAGlB,SAASsB,GAAyB,KAACjJ,EAAI,UAAE6H,IACrC,MAAMqB,GAAoB,UAEpB1D,EAAkBb,KAExB,GAAa,aAAT3E,EAEA,YADAwF,EAAgBJ,oBAAoB,0CAIxC,MAAMpD,EAA6C/B,EAAeS,UAAUC,cAAcO,MACtF,SAAuBS,eAAe,CAClCX,GAAI3C,EAAM0D,iBACVH,MAAO,kBACPC,QAAS,0CAIXH,GAA+B,SAAuBC,eAAe,CACvEX,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAAS,0CAGN/B,GAAaM,KAAM+I,IAAiB3I,OAAO4I,QAC9C,IAAIN,GAAmB,CACnBC,UAAWvI,OAAO0B,KAAKR,EAA6BS,QACpD/B,KAAMyH,EACN7H,UAEN,GAEIqJ,EAAwBC,GAAA,0CAAmD5H,EAC7E5B,EACAqJ,EACAnJ,GAGEf,EAAgBuB,OAAO+I,OACzB,IAAIT,GAAmB,CACnBC,UAAWvI,OAAO0B,KAAKR,EAA6BS,QACpD/B,KAAMiJ,EACNrJ,UAEN,GAEIwJ,EAAkC,IAAIxH,GAC5CwH,EAAgCrI,KAAK,CACjCnC,SAAUc,EACVsB,SAAS,IAGb,MAAMuF,EAAa,EACf,EAAAC,GAAA,GACI,SACA,CACIhG,iBAAkB4I,GAEtB,CAAC,UACD,CACIxI,GAAI3C,EAAM0D,iBACVH,MAAO,kBACPC,QAAS,0CAIjB,EAAA+E,GAAA,GACI,SACA,CACI,CAAC9G,GAAab,GAElB,CAAC,UACD,CACI+B,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAAS,0CAKrBqH,EAAkB3C,SACd,EAAAC,GAAA,GAAgB,CACZ3E,QAASxD,EAAMwD,QACf4E,MAAO,CACHC,WAAY,6DAEhBC,gBAIRnB,EAAgBJ,oBAAoB,eAAe,CAC/CpE,GAAIlB,GAEZ,C,q3BCzKA,MAAM,GAAc,GAEpB,U,gyLC6FA,MAAMzB,EAAQ,EAWd,SAASoL,IACL,MAAMC,EAA6CzJ,EAAeS,UAAUC,cAAcO,MACtF,SAAuBS,eAAe,CAClCX,GAAI3C,EAAM0D,iBACVH,MAAO,kBACPC,QAAS,0CAIX2H,EAAkC,GAExC,IAAK,MAAMxK,KAAY0K,EACf1K,EAASgC,KAAO3C,EAAMyB,YACtB0J,EAAgCrI,KAAKnC,GAI7C,MAAMc,GAAa,EAAAoD,EAAA,IAA8B,EAAAC,EAAA,OAEjD,UAAuBoD,SACnB,EAAAC,GAAA,GAAgB,CACZ3E,QAAS,GACT4E,MAAO,CACHC,WAAY,uEAEhBC,WAAY,EACR,EAAAC,GAAA,GACI,SACA,CACIhG,iBAAkB4I,GAEtB,CAAC,UACD,CACIxI,GAAI3C,EAAM0D,iBACVH,MAAO,kBACPC,QAASxD,EAAMwD,WAGvB,EAAA+E,GAAA,GACI,SACA,CACI,CAAC9G,GAAa,CACVE,KAAM,WACNI,KAAM,aAGd,CAAC,UACD,CACIY,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAASxD,EAAMwD,cAOnC,MAAM2D,EAAkBb,KAExBa,EAAgBJ,oBAAoB,eAAgB,CAChDpE,GAAIlB,GAEZ,C,iuBCxKA,MAAM,GAAc,GAEpB,UCLa6J,GAA6B,WACtC,IAAMC,EAAS,CAAC,aAAc,OAAQ,QAAS,SAAU,SAAU,QAAS,OAAQ,SAAU,OAAQ,OAEtG,OAAOA,EAAO1B,KAAKU,MAAMV,KAAKC,SAASyB,EAAOrI,QAClD,E,w/DCoEA,MAAMlD,EAAQ,EAmBRuG,GAAQ,QAAS,CACnBiF,iBAAiB,IAGrB,SAASC,EAAiBzK,EAAG0K,GACzB,MAAMpH,GAAe,SAEflD,EAAWJ,EAAEE,OAAOG,wBAE1BiD,EAAaqH,OAAOC,IAAMxK,EAASwK,IACnCtH,EAAaqH,OAAOE,KAAOzK,EAASyK,KAEpCvH,EAAawH,oCAAoC,4BAA6B,CAC1EJ,WACAjK,WAAYzB,EAAMyB,WAClBD,aAAcxB,EAAMwB,aACpBgC,QAASxD,EAAMwD,SAEvB,CAEA,SAASuI,EAAsB/K,GAC3B,MAAMgL,EAAYhL,EAAEE,OAGF,KAAdF,EAAEiL,SACED,EAAU3L,SACV,UAAuB6H,SACnB,EAAAC,GAAA,GAAgB,CACZ3E,QAAS,GACT4E,MAAO,CACHC,WAAY,sEAEhBC,WAAY,EACR,EAAAC,GAAA,GACI,wBACA,CACIlI,MAAO,CACHsC,IAAI,EAAAkC,EAAA,IAA8B,EAAAC,EAAA,MAClCoH,MAAOZ,KACPjL,MAAO2L,EAAU3L,QAGzB,CAAC,SAAUL,EAAMyB,WAAY,WAC7B,CACIkB,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAASxD,EAAMwD,cAOnCwI,EAAU3L,MAAQ,GAG9B,C,o8CChJA,MAAM,GAAc,GAEpB,U,mCCJI,QAEM,WAFD,gD,CCAT,MAAM,GAAS,CAAC,EAGV,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,MAEpE,U,w5DCoEA,MAAML,EAAQ,EAeRuG,GAAQ,QAAS,CACnBiF,gBAAiB,KAGfpI,GAAoB,SAEpBzC,EAAWyC,EAAkBE,eAAe,CAC9CX,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAASxD,EAAMwD,UAChBM,OAAO9D,EAAMyB,YAEhB,SAAS0K,EAAmBT,GACxB,OAAO/K,EAASgK,QAAQyB,MAAK,EAAEzJ,QAAQA,IAAO+I,IAAUrL,KAC5D,C,mmDCpGA,MAAM,GAAc,GAEpB,U,qtDCiBA,MAAMJ,EAAQ,E,2WCnBd,MAAM,GAAc,GAEpB,U,2+HCgGA,MAAMD,EAAQ,EAeRoD,GAAoB,SAEpB+D,EAAkBb,KAElB+F,EAA0BjJ,EAAkBE,eAAe,CAC7DX,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAAS,yCAGP7C,EAAWsK,GAAA,iCACboB,EACIrM,EAAMyB,YAGd,SAAS6K,IACiB,UAAlB3L,EAASgB,MACbwF,EAAgBJ,oBAAoB,gBAAiB,CACjDpE,GAAI3C,EAAMyB,YAElB,CAEA,SAAS8K,EAAyBvL,IAC9B,UAAuBkH,SACnB,EAAAC,GAAA,GAAgB,CACZ3E,QAAS,uCACT4E,MAAO,CACHC,WAAY,4DAEhBC,WAAY,EACR,EAAAC,GAAA,GACI,MACAvH,EAAEE,OAAOb,MACT,CAAC,SAAUL,EAAMyB,WAAY,QAC7B,CACIkB,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAAS,4CAMjC,CAEA,SAASgJ,IACL,MAAMC,EAAgB,CAAC,EAEvB,IAAI,MAAMC,KAAOL,EAAwBvI,OAClC4I,IAAQ1M,EAAMyB,aACbgL,EAAcC,GAAOL,EAAwBvI,OAAO4I,IAI5D,MAAMjJ,EAAmCL,EAAkBE,eAAe,CACtEX,GAAI3C,EAAM0D,iBACVF,QAAS,uCACTD,MAAO,oBAGLoJ,EAA2B/K,EAAeS,UAAUC,cAAcO,KAAKY,GACvEmJ,EAAcD,EAAyBhH,WAAU,EAAEhF,SAAUc,KAAgBA,IAAezB,EAAMyB,cAEpF,IAAjBmL,GAAoBD,EAAyBxJ,OAAOyJ,EAAa,IAEpE,UAAuB1E,SACnB,EAAAC,GAAA,GAAgB,CACZ3E,QAAS,uCACT4E,MAAO,CACHC,WAAY,4DAEhBC,WAAY,EACR,EAAAC,GAAA,GACI,SACA,CACIzE,OAAQ2I,GAEZ,GACA,CACI9J,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAAS,0CAGjB,EAAA+E,GAAA,GACI,SACA,CACIvG,OAAQyB,EAAiCzB,QAE7C,GACA,CACIW,GAAI3C,EAAM0D,iBACVH,MAAO,kBACPC,QAAS,6CAO7B2D,EAAgBH,wBACpB,CAEA,SAAS6F,EAAyBC,GAC9B,MAAc,UAAVA,EACO,QAGJ3F,EAAgBT,MAAM0F,MAAK,EAAEzK,UAAUA,IAASmL,IAAOnG,KAClE,C,o0DC9NA,MAAM,GAAc,GAEpB,U,y8BCsDA,MAAM3G,EAAQ,EAWRuG,GAAQ,QAAS,CACnB+C,aAAc,KAGZnC,EAAkBb,KAExB,SAASsE,GAAyB,KAACjJ,IAC/B,MAAMmJ,EAAeG,GAAA,kCACjB,SAAuB3H,eAAe,CAClCX,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAAS,yCAETxD,EAAMyB,YACZM,MAEF,UAAuBmG,SACnB,EAAAC,GAAA,GAAgB,CACZ3E,QAAS,GACT4E,MAAO,CACHC,WAAY,gEAEhBC,WAAY,EACR,EAAAC,GAAA,GACI,SACA,CACI,CAACvI,EAAMyB,YAAa,CAChBM,KAAM+I,EACNnJ,SAGR,CAAC,UACD,CACIgB,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAAS,6CAO7B2D,EAAgBH,wBACpB,C,6yBC9GA,MAAM,GAAc,GAEpB,U,sfC0BA,MAAMhH,EAAQ,EAWRyD,GAAmC,SAAuBH,eAAe,CAC3EX,GAAI3C,EAAM0D,iBACVH,MAAO,kBACPC,QAAS,yCAGPH,GAA+B,SAAuBC,eAAe,CACvEX,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAAS,yCAGPuJ,GAAc,SAAI,GAMxB,SAASC,IAGL,GAFAD,EAAY1M,OAAS0M,EAAY1M,MAE9B0M,EAAY1M,MAAO,CAClB,MAAM4M,EAAc9K,OAAO0B,KACvBR,GAA8BS,SAG3BrC,EAAYb,GAAiBuB,OAAO4I,QACvC,IAAIN,GAAmB,CACnBC,UAAWuC,EACXtL,KAAM,WACNI,KAAM,cAEZ,GAEImL,EAA2BzJ,GAAkCzB,QAAQmL,4BAA8B,GAEzGD,EAAyBpK,KAAK,CAC1BnC,SAAUc,EACVsB,SAAS,IAGb,MAAMqK,EAAwB,CAC1B7J,MAAO,kBACPZ,GAAI3C,EAAM0D,iBACVF,QAAS,wCAGP6J,EAAoB,CACtB9J,MAAO,aACPZ,GAAI3C,EAAMwB,aACVgC,QAAS,yCAGb,UAAuB0E,SACnB,EAAAC,GAAA,GAAgB,CACZ3E,QAAS,GACT4E,MAAO,CACHC,WAAY,mCAEhBC,WAAY,EACR,EAAAC,GAAA,GACI,SACA,CACI4E,2BAA4BD,GAEhC,CAAC,UACDE,IAEJ,EAAA7E,GAAA,GACI,SACA,CACI,CAAC9G,GAAab,GAElB,CAAC,UACDyM,IAEJ,EAAA9E,GAAA,GACI,SACA,CACI,CAAC9G,GAAa,CACVE,KAAM,WACNI,KAAMnB,EAAcmB,KACpBuL,cAAetN,EAAMwB,aACrB+L,mBAAoBF,IAG5B,CAAC,UACDA,IAEJ,EAAA9E,GAAA,GACI,SACA,CACIpD,iBAAkB1D,GAEtB,CAAC,UACD4L,MAKpB,CACJ,C,OAvFIhK,GAA8BrB,QAAQmD,mBACxC4H,EAAY1M,OAAQ,G,kwBCtDtB,MAAM,GAAc,GAEpB,U,sdCkEA,MAAML,EAAQ,EAeRmH,EAAkBb,KAElBkH,GAAkB,SAAS,WAC7B,OAAOrG,EAAgBN,mBAC3B,I,64DCvFA,MAAM,GAAc,GAEpB,U,inDCmBA,MAAM5G,EAAQ,EAIRD,EAAQ,EAWRoD,GAAoB,SAEpBqK,EAAsCrK,EAAkBE,eAAe,CACzEX,GAAI3C,EAAM0N,QACVnK,MAAO,kBACPC,QAASxD,EAAMwD,UAGnB,SAASmK,IACLC,QAAQC,IAAIJ,EAAoC9K,IAChD1C,EAAM,cAAewN,EAAoC9K,GAC7D,C,iWC/CA,MAAM,GAAc,GAEpB,U,2xBCsCA,MAAM3C,EAAQ,EAWRoD,GAAoB,SAEpB0K,GAAuC,SAAS,WAClD,OAAO1K,EAAkBE,eAAe,CACpCX,GAAI3C,EAAMwB,aACV+B,MAAO,aACPC,QAASxD,EAAMwD,UAChBuK,QACP,I,isBC3DA,MAAM,GAAc,GAEpB,U,uyJC+LA,MAAM/N,EAAQ,EAORoD,GAAoB,SAEpB4K,EAAgC5K,EAAkBE,eAAe,CACnEX,GAAI3C,EAAMuB,OACVgC,MAAO,QACPC,QAAS,yCAGPhC,EAAewM,EAA8BV,cAE7CW,GAAmC,SAAI,GACvCC,GAAkB,QAAI,KAE5B,SAAUC,iBACN,MAAMC,QAA+B,UAAuBC,uBAAuB7M,GACnF0M,EAAgB7N,MAAQ+N,EAAuBE,OAAOC,eAAeC,yBAAyBC,SAASnJ,KAAK3C,IACjG,CACHA,KACAiC,aAAc,MAItBqJ,EAAiC5N,OAAQ,CAC7C,IAEA,MAAMqO,GAA0B,QAAIV,EAA8BD,SAAS,IAErEY,GAA0C,SAAS,WACrD,OAAOvL,EAAkBE,eAAe,CACpCX,GAAI+L,EAAwBrO,MAC5BkD,MAAO,kBACPC,QAAS,wCAEjB,IAEM2D,EAAkBb,KAElBC,GAAQ,QAAS,CACnBqI,2BAA2B,EAC3BC,eAAgB,KAGdC,GAAwB,QAAI,IAE5BC,GAAwB,SAAS,WACnC,YAA+CC,IAAxC7H,EAAgBN,mBAC3B,IAEA,SAASoI,EAAwC5O,GAC7C8G,EAAgBJ,oBAAoB,QACpCR,EAAMqI,0BAA4BvO,EAClC6O,GACJ,CAEA,SAASA,IACL3I,EAAMsI,eAAiBM,OAAOC,YAAcN,EAAsBzO,MAAMgB,wBAAwBuK,GACpG,CAIA,SAASyD,GAAqB,MAAE7K,EAAK,MAAEC,EAAQ,KAAI,uBAAEC,IACjD,GAAc,OAAVD,QAA4BuK,IAAVvK,EAElB,YADAyJ,EAAgB7N,MAAMyC,QAAQ0B,GAIlC,MAAM8K,EAASpB,EAAgB7N,MAAMmK,MAAM,EAAG/F,GACxC8K,EAAQrB,EAAgB7N,MAAMmK,MAAM/F,GAQ1C,GANAyJ,EAAgB7N,MAAQ,IACjBiP,KACA9K,KACA+K,GAGJ7K,EAAwB,CACvB,MAAM8K,GAAmB,UAEzBhL,EAAMiL,SAASC,IACX,MAAMC,EAAc,CAChBhN,GAAI+M,EAAK/M,GACTY,MAAO,QACPC,QAAS,wCAGP8E,EAAa,EACf,EAAAC,GAAA,GACI,MACA,CACI5F,GAAI+M,EAAK/M,GACThB,KAAM,OACNiO,SAAU,wCAEd,GACAD,IAIFE,EAAyB,CAC3BC,SAAUtO,EACVuO,YAAa,cAGXC,EAASV,EAAOW,UAAU7D,MAAM8D,GAAmB,QAAXA,EAAIvN,IAAqC,IAArBuN,EAAItL,eAgBtE,GAdGoL,IACCH,EAAuBC,SAAWE,EAAOrN,GACzCkN,EAAuBE,YAAc,SAGzCzH,EAAWxF,MACP,EAAAyF,GAAA,GACI,YACAsH,EACA,GACAF,IAIiB,IAAtBD,EAAK9K,aAAoB,CACxB,MAAMM,EAAoB9B,EAAkBE,eAAe,CACvDX,GAAInB,EACJ+B,MAAO,aACPC,QAAS,0CACTxB,QAAQmD,iBAEZmD,EAAWxF,MACP,EAAAyF,GAAA,GACI,mBACA,CACI5F,GAAI+M,EAAK/M,GACTa,QAASmM,EAAYnM,SAEzB,CAAC,aAAc0B,GACf,CACIvC,GAAIqN,EAAOrN,GACXY,MAAO,QACPC,QAASmM,EAAYnM,UAIrC,CAEA8E,EAAWxF,MACP,EAAAyF,GAAA,GACI,SACA,CACI4H,cAAe,uCACfC,iBAAkB,YAClBC,aAAc,cACdC,iBAAkB,cAClBC,kBAAmB,uCACnBC,qBAAsB,aAE1B,GACAb,IAIRH,EAAiBtH,SACb,EAAAC,GAAA,GAAgB,CACZ3E,QAAS,GACT4E,MAAO,CACHC,WAAY,4CAEhBC,eAER,GAER,CAEJ,CAEA,SAASmI,GAAmB,OAACjL,IACzB,IAAIf,EAAQyJ,EAAgB7N,MAAMsF,WAAU,EAAEhD,QAAQA,IAAO6C,IAC7D,GAAIf,EAAQ,EAAG,OAEf,MAAMG,EAAesJ,EAAgB7N,MAAMoE,GAAOG,aAClD,IAAI8K,EAAOxB,EAAgB7N,QAAQoE,GAEnC,MAAMiL,GAASA,EAAK9K,aAAeA,EAAe,CAC9C,KAAG8K,EAAK9K,aAAeA,GAGlB,MAFDsJ,EAAgB7N,MAAM8C,OAAOsB,EAAO,GAGxCiL,EAAOxB,EAAgB7N,MAAMoE,EACjC,CACJ,CAEA,SAASiM,IACL,MAAMhD,GAAU,EAAA7I,EAAA,IAA8B,EAAAC,EAAA,MACxCtB,EAAU,uCAEhBJ,EAAkBuN,eACdjD,EACA,QACA,CAAE/K,GAAI+K,GACNlK,GAGJ,MAAMoN,EAAe,CACjBjO,GAAI+K,EACJnK,MAAO,QACPC,YAGJ,UAAuB0E,SACnB,EAAAC,GAAA,GAAgB,CACZ3E,QAAS,GACT4E,MAAO,CACHC,WAAY,sCAEhBC,WAAY,EACR,EAAAC,GAAA,GACI,MACA,CACI5G,KAAM,OACNiO,SAAUpM,EACVb,GAAI+K,GAGR,GACAkD,IAEJ,EAAArI,GAAA,GACI,YACA,CACIuH,SAAUtO,EACVuO,YAAa,cAEjB,GACAa,IAEJ,EAAArI,GAAA,GACI,aACA,CACI5F,GAAI+K,EACJ4B,OAAQX,EAAwCtO,MAAM6B,UAAU,IAEpE,CAAC,aACD,CACIS,GAAI+L,EAAwBrO,MAC5BkD,MAAO,kBACPC,aAGR,EAAA+E,GAAA,GACI,SACA,CACI4H,cAAe,GACfC,iBAAkB,YAClBC,aAAcQ,KAAKC,MACnBR,iBAAkBO,KAAKC,MACvBP,kBAAmB,GACnBC,qBAAsB,aAE1B,GACAI,MAKpB,CAGA,SAASG,EAA2B/P,GAChC,MAAMsD,GAAe,SAErBA,EAAawH,oCAAoC,4BAA6B,CAC1EtK,eACAkC,iBAAkBgL,EAClBlL,QAAS,yCAGb,MAAMpC,EAAWJ,EAAEE,OAAOG,wBAE1BiD,EAAaqH,OAAOqF,MAAQ5P,GAAU4P,MACtC1M,EAAaqH,OAAOC,IAAMxK,GAAUwK,IACpCtH,EAAaqH,OAAOE,KAAOzK,GAAUyK,IACzC,C,8iJC3dA,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,YAAY,qBAEvE,UCNM,GAAa,CAAEa,IAAK,GAQ1B,IAA4B,QAAiB,CAC3CuE,OAAQ,aACRjR,MAAO,CACL0N,QAAS,CACL/L,KAAMuP,OACNC,UAAU,IAGhBC,MAAA,SAAMC,GCYR,IAAMrR,EAAQ,EDRd,OAAO,SAACsR,EAAUC,GAChB,OAAQ,WAAc,QAAaC,EAAA,EAAkB,CACnDC,QAAS,CACD9O,GAAI3C,EAAM0N,QACVnK,MAAO,QACPC,QAAS,yCAEhB,CACDkO,SAAS,SAAS,SAAC,G,IAAEC,EAAkB,qBAAO,OAC3CA,GAAkD,SAA5BA,EAAmBhQ,OACrC,WAAc,QAAaiQ,EAAA,EAAY,CACtClF,IAAK,EACL,WAAY1M,EAAM0N,SACjB,KAAM,EAAG,CAAC,cACZiE,GAAkD,yBAA5BA,EAAmBhQ,OACvC,WAAc,QAAakQ,GAAoB,CAC9CnF,IAAK,EACL,UAAW1M,EAAM0N,SAChB,KAAM,EAAG,CAAC,eACZ,WAAc,QAAoB,MAAO,GAAY,2CAXhB,IAa9CoE,EAAG,GACF,EAAG,CAAC,WACT,CACA,IE5CA,MAAM,GAAc,GAEpB,S","sources":["webpack://x/./src/ui/components/CollectionViewTableRow.vue","webpack://x/./src/ui/components/CollectionViewTableRow.vue?79e6","webpack://x/./src/ui/components/CollectionViewTableCell.vue","webpack://x/./src/ui/components/CollectionViewTableCell.vue?2343","webpack://x/./src/ui/components/CollectionViewTablePropertyValue.vue","webpack://x/./src/ui/components/CollectionViewTablePropertyValue.vue?97a6","webpack://x/./src/entities/CollectionView.js","webpack://x/./src/ui/components/CollectionViewTable.vue","webpack://x/./src/ui/components/CollectionViewTable.vue?446f","webpack://x/./src/stores/collections.ts","webpack://x/./src/ui/components/BaseCollectionSideMenuHeader.vue","webpack://x/./src/ui/components/BaseCollectionSideMenuHeader.vue?5b02","webpack://x/./src/ui/components/BaseCollectionSideMenu.vue","webpack://x/./src/ui/components/BaseCollectionSideMenu.vue?f1da","webpack://x/./src/ui/components/BaseCollectionSideMenuPropertiesItem.vue","webpack://x/./src/ui/components/BaseCollectionSideMenuPropertiesItem.vue?10ce","webpack://x/./src/ui/components/CollectionSideMenuProperties.vue","webpack://x/./src/ui/components/CollectionSideMenuProperties.vue?8bae","webpack://x/./src/ui/components/BaseCollectionSideMenuItemCol3.vue","webpack://x/./src/ui/components/BaseCollectionSideMenuItemCol3.vue?358e","webpack://x/./src/ui/components/CollectionSideMenuOptions.vue","webpack://x/./src/ui/components/CollectionSideMenuOptions.vue?e699","webpack://x/./src/ui/components/BaseCollectionSideMenuItemCol2.vue","webpack://x/./src/ui/components/BaseCollectionSideMenuItemCol2.vue?8360","webpack://x/./src/ui/components/BaseCollectionPropertyTypes.vue","webpack://x/./src/ui/components/BaseCollectionPropertyTypes.vue?9054","webpack://x/./src/ui/components/CollectionSideMenuCategory.vue","webpack://x/./src/ui/components/CollectionSideMenuCategory.vue?94f3","webpack://x/./src/helpers/globals/uidByLength.ts","webpack://x/./src/entities/CollectionProperty.js","webpack://x/./src/ui/components/CollectionSideMenuPropertyCreate.vue","webpack://x/./src/ui/components/CollectionSideMenuPropertyCreate.vue?08d4","webpack://x/./src/ui/components/CollectionSideMenuPropertyCreateRelation.vue","webpack://x/./src/ui/components/CollectionSideMenuPropertyCreateRelation.vue?ad06","webpack://x/./src/helpers/globals/tagColorStringToRgbaRandom.ts","webpack://x/./src/ui/components/CollectionSideMenuPropertyEditHandleOptions.vue","webpack://x/./src/ui/components/CollectionSideMenuPropertyEditHandleOptions.vue?7d35","webpack://x/./src/ui/components/CollectionSideMenuPropertyEditRelation.vue","webpack://x/./src/ui/components/CollectionSideMenuPropertyEditRelation.vue?59d6","webpack://x/./src/ui/components/CollectionSideMenuPropertyEditHandleGroups.vue","webpack://x/./src/ui/components/CollectionSideMenuPropertyEditHandleGroups.vue?c2ce","webpack://x/./src/ui/components/CollectionSideMenuPropertyEditFooter.vue","webpack://x/./src/ui/components/CollectionSideMenuPropertyEditFooter.vue?c316","webpack://x/./src/ui/views/CollectionSideMenuPropertyEditView.vue","webpack://x/./src/ui/views/CollectionSideMenuPropertyEditView.vue?7e04","webpack://x/./src/ui/components/CollectionSideMenuPropertyEditType.vue","webpack://x/./src/ui/components/CollectionSideMenuPropertyEditType.vue?bbbd","webpack://x/./src/ui/components/CollectionSideMenuSubItemsMenu.vue","webpack://x/./src/ui/components/CollectionSideMenuSubItemsMenu.vue?bd7e","webpack://x/./src/ui/views/CollectionSideMenuView.vue","webpack://x/./src/ui/views/CollectionSideMenuView.vue?3427","webpack://x/./src/ui/components/CollectionViewTab.vue","webpack://x/./src/ui/components/CollectionViewTab.vue?4af8","webpack://x/./src/ui/components/CollectionViewsTabsList.vue","webpack://x/./src/ui/components/CollectionViewsTabsList.vue?0c60","webpack://x/./src/ui/views/CollectionViewPage.vue","webpack://x/./src/ui/views/CollectionViewPage.vue?d857","webpack://x/./src/ui/components/RenderMain.vue?d1af","webpack://x/./src/ui/components/RenderMain.vue","webpack://x/./src/ui/components/RenderMain.vue?64be"],"sourcesContent":["<template>\r\n    <div class=\"xdoc-table-view-row\">\r\n        <div style=\"display: flex;\">   \r\n            <div style=\"position: sticky; left: 0px; z-index: 85; display: flex;\">\r\n                <div style=\"display: flex; opacity: 1; transition-property: opacity; transition-duration: 270ms; transition-timing-function: ease;\">\r\n                    <div :style=\"{ opacity }\" style=\"background: white; border-bottom: rgb(233, 233, 231); height: 100%; transition-property: opacity; transition-duration: 270ms; transition-timing-function: ease;\">\r\n                        <div style=\"height: 100%\">\r\n                            <label :style=\"{ opacity }\" style=\"height: 100%;align-items: flex-start; justify-content: center; display: flex; cursor: pointer; z-index: 1; transition-property: opacity; transition-duration: 270ms; transition-timing-function: ease;\">\r\n                                <div style=\"height: 31px; width: 32px; display: flex; justify-content: center; align-items: center; padding-right: 0px;\">\r\n                                    <input type=\"checkbox\"\r\n                                        v-model=\"isRowSelected\"\r\n                                        @click.stop=\"emits('table-view-row-selected', { value: !isRowSelected})\"\r\n                                        style=\"width: 14px; height: 14px; cursor: pointer; position: relative; right: 2px; accent-color: rgb(35, 131, 226);\"\r\n                                    >\r\n                                </div>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <slot></slot>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineEmits, ref, defineProps, computed } from \"vue\"\r\n\r\nconst props = defineProps({\r\n    selectCheckboxOpacity: {\r\n        type: Number,\r\n        default: 0\r\n    }\r\n})\r\n\r\nconst emits = defineEmits([\r\n    \"table-view-row-selected\"\r\n])\r\n\r\nconst isRowSelected = ref(false);\r\n\r\nconst opacity = computed(() => props.selectCheckboxOpacity === 1 || isRowSelected.value ? 1 : 0); \r\n</script>","import script from \"./CollectionViewTableRow.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionViewTableRow.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"xdoc-table-view-cell\"\r\n        style=\"display: flex; width: 276px; position: relative; border-right: 1px solid rgb(233, 233, 231);\"\r\n    >\r\n        <div style=\"display: flex; overflow-x: clip; height: 100%; width: 276px;\">\r\n            <slot></slot>\r\n        </div>\r\n    </div>\r\n</template>","import { render } from \"./CollectionViewTableCell.vue?vue&type=template&id=2809ad66\"\nconst script = {}\n\nimport exportComponent from \"D:\\\\test\\\\x\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>    \r\n    <base-button\r\n        @click.prevent=\"handleClickTableViewCell\"\r\n        :hover-style=\"{ background: 'none' }\"\r\n        data-testid=\"property-value\"\r\n        style=\"flex-shrink: unset; position: relative; width: 100%; display: block; font-size: 14px; overflow: clip;border-right: none; white-space: normal; min-height: 32px; padding: 6px 8px; border-radius: unset; align-items: unset; justify-content: unset;\"\r\n    >\r\n        <div v-if=\"props.propertyId === 'title' && props.displayOpenBtn\"\r\n            style=\"display: flex; justify-content: end; position: absolute; top: 4px; right: 0px; left: 0px; z-index: 2; margin: 0px 6px; pointer-events: none;\"\r\n        >\r\n            <div style=\"display: flex; gap: 4px; pointer-events: auto; position: sticky; right: 6px;\">\r\n                <div>\r\n                    <base-button\r\n                        :hover-style=\"{background: 'rgb(239, 239, 238)'}\"\r\n                        :default-style=\"{background: 'white'}\"\r\n                        style=\"flex-shrink: 1; font-weight: 500; white-space: nowrap; border-radius: 4px; height: 24px; padding-left: 6px; padding-right: 6px; text-transform: uppercase; letter-spacing: 0.5px; box-shadow: rgba(15, 15, 15, 0.1); font-size: 12px; line-height: 1.2; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.65); box-shadow: rgba(15, 15, 15, 0.1) 0px 0px 0px 1px, rgba(15, 26, 15, 0.1) 0px 2px 4px;\"\r\n                        @click.stop=\"emits('open-record')\"\r\n                        v-if=\"props.type === 'title'\"\r\n                    >   \r\n                        Open\r\n                    </base-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <span v-if=\"props.type === 'title'\" style=\"line-height: 1.5; white-space: pre-wrap; word-break: break-word; display: inline; font-weight: 500; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.1) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\"\r\n        >{{ propertyValue }}</span>\r\n\r\n        <page-property-status-value\r\n            v-else-if=\"props.type === 'status'\"\r\n            :status=\"propertyValueParsed[0] || []\"\r\n        />\r\n\r\n        <div \r\n            v-else-if=\"props.type === 'select' || props.type === 'multiselect'\"\r\n            style=\"display: flex;\"\r\n        >\r\n            <page-property-tag-value\r\n                v-for=\"tag in propertyValueParsed\"\r\n                style=\"padding-right: 6px; padding-left: 6px;\"\r\n                :tag=\"tag\"\r\n                :key=\"tag.value\"\r\n            />\r\n        </div>\r\n\r\n        <page-property-person-value \r\n            v-else-if=\"props.type === 'person'\"\r\n        />\r\n    </base-button>\r\n</template>\r\n\r\n<script setup>\r\nimport BaseButton from './BaseButton.vue';\r\nimport PagePropertyStatusValue from './PagePropertyStatusValue.vue';\r\nimport PagePropertyTagValue from './PagePropertyTagValue.vue';\r\nimport PagePropertyPersonValue from \"./PagePropertyPersonValue.vue\";\r\nimport { defineProps, defineEmits, toRef, ref } from 'vue';\r\nimport { handlePropertyValueOverlay } from '@/helpers/globals/handlePropertyValueOverlay';\r\nimport { usePropertyData } from \"@/ui/composables/usePropertyData\";\r\nimport { parseCommaSeparatedPropertyValues } from \"@/helpers/globals/parseCommaSeparatedPropertyValues\";\r\n\r\nconst emits = defineEmits([\r\n    \"open-record\"\r\n])\r\n\r\nconst props = defineProps({\r\n    pageId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    collectionId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    propertyId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    type: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    spaceId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst {\r\n    property,\r\n    propertyValue = \"\"\r\n} = usePropertyData(toRef(() => props), () => {});\r\n\r\nconst propertyValueParsed = ref([]);\r\n\r\nparseCommaSeparatedPropertyValues(\r\n    props.type,\r\n    propertyValueParsed,\r\n    property,\r\n    propertyValue\r\n);\r\n\r\nfunction handleClickTableViewCell(e) {    \r\n    const cellElement = e.target.closest(\".xdoc-table-view-cell\");\r\n    const measures = cellElement.getBoundingClientRect();\r\n\r\n    handlePropertyValueOverlay(props.pageId, props.collectionId, props.propertyId, measures);\r\n}\r\n</script>","import script from \"./CollectionViewTablePropertyValue.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionViewTablePropertyValue.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { Block } from \"./Block\";\r\n\r\nObject.setPrototypeOf(CollectionView, Block);\r\n\r\nexport function CollectionView(props) {\r\n    Block.call(this, props);\r\n\r\n    this.type = props.type;\r\n    this.name = props.name;\r\n    this.format = props.format;\r\n    this.query2 = props.query2;\r\n    this.page_sort = props.page_sort;\r\n}\r\n\r\nCollectionView.prototype.getProperties = function() {\r\n    switch(this.type) {\r\n        case \"table\": {\r\n            return this.format.table_properties || [];\r\n        }\r\n        case \"list\": {\r\n            return this.format.list_properties || [];\r\n        }\r\n    }\r\n}\r\n\r\nCollectionView.prototype.getName = function() {\r\n    if (this.name) return this.name;\r\n    return this.type;\r\n}\r\n\r\nCollectionView.prototype.addProperty = function(id) {\r\n    const properties = CollectionView.prototype.getProperties.call(this);\r\n    \r\n    properties.push({\r\n        visible: true,\r\n        property: id\r\n    })\r\n}\r\n\r\nCollectionView.prototype.removePropertyById = function(id) {\r\n    const properties = CollectionView.prototype.getProperties.call(this);\r\n\r\n    for(let i = 0; i<properties.length; i++) {\r\n        if (properties[i].property === id) {\r\n            properties.splice(i, 1);\r\n            break;\r\n        }\r\n    }\r\n}","<template>\r\n    <div class=\"xdoc-table-view\"\r\n        style=\"position: relative; float: left; min-width: 100%; user-select: none; font-variant-numeric: lining-nums tabular-nums; padding-bottom: 180px; padding-left: 96px; padding-right: 96px;\"\r\n    >\r\n        <div :data-block-id=\"props.blockId\"\r\n            class=\"xdoc-selectable xdoc-collection_view-block\"\r\n            style=\"position: relative;\"\r\n        >\r\n            <div class=\"xdoc-table-view-header-row\"\r\n                style=\"display: flex; position: absolute; background: white; z-index: 86; height: 33px; color: rgba(55, 53, 47, 0.65); box-shadow: white -3px 0px 0px, rgb(233, 233, 231) 0px 1px 0px; border-top: 1px solid rgb(233, 233, 231); min-width: calc((100% - 192px) - 0px); left: 0px; right: 0px;\"\r\n            >\r\n                <div style=\"position: sticky; left: 0px; z-index: 83;\">\r\n                    <div style=\"background: white; border-bottom: rgb(233, 233, 231); height: 100%; opacity: 0; transition-property: opacity; transition-duration: 270ms; transition-timing-function: ease;\">\r\n                        <label style=\"height: 100%; align-items: flex-start; justify-content: center; display: flex; cursor: pointer; z-index: 1; opacity: 0; padding-left: 0px; padding-right: 0px; transition-property: opacity; transition-duration: 270ms; transition-timing-function: ease;\">\r\n                            <div style=\"width: 32px; height: 31px; display: flex; justify-content: center; align-items: center; padding-right: 0px;\">\r\n                                <input type=\"checkbox\"\r\n                                    style=\"width: 14px; height: 14px; cursor: pointer; position: relative; right: 2px;\"\r\n                                >\r\n                            </div>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                <div style=\"display: inline-flex; margin: 0px;\">\r\n                    <div \r\n                        v-for=\"(propertyObject) in collectionViewPropertiesRecordValueInStore\"\r\n                        :key=\"propertyObject.property\"\r\n                        style=\"display: flex; flex-direction: row;\"\r\n                    >\r\n                        <div style=\"display: flex; position: relative;\">\r\n                            <div class=\"xdoc-table-view-header-cell\"\r\n                                style=\"display: flex; flex-shrink: 0; overflow: hidden; font-size: 14px; padding: 0px; width: 276px; border-right: 1px solid rgb(233, 233, 231);\"\r\n                            >\r\n                                <div role=\"button\"\r\n                                    tabindex=\"0\"\r\n                                    style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; display: flex; align-items: center; width: 100%; height: 100%; padding-left: 8px; padding-right: 8px;\"\r\n                                >\r\n                                    <div style=\"display: flex; align-items: center; line-height: 120%; min-width: 0px; font-size: 14px;\">\r\n                                        <div style=\"margin-right: 6px;\">\r\n                                            <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"typesTitle\" style=\"width: 16px; height: 16px; display: block; fill: rgba(55, 53, 47, 0.45); flex-shrink: 0;\"><path d=\"M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z\"></path></svg>\r\n                                        </div>\r\n\r\n                                        <div style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\"\r\n                                        >{{ getCollectionPropertyById(propertyObject.property).name }}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style=\"position: absolute; right: 0px; width: 0px; flex-grow: 0; z-index: 1;\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div role=\"button\"\r\n                    tabindex=\"0\"\r\n                    class=\"xdoc-table-view-add-column\"\r\n                    style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; display: flex; justify-content: flex-start; width: 32px;\"\r\n                >\r\n                    <div style=\"display: flex; width: 32px; height: 100%; align-items: center; justify-content: center;\"></div>\r\n                </div>\r\n\r\n                <div role=\"button\"\r\n                    tabindex=\"0\"\r\n                    class=\"xdoc-table-view-add-column\"\r\n                    style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; display: flex; justify-content: flex-start;  flex-grow: 1; width: 32px;\"\r\n                >\r\n                    <div style=\"display: flex; width: 32px; height: 100%; align-items: center; justify-content: center;\"></div>\r\n                </div>\r\n            </div>\r\n\r\n            <div style=\"height: 34px;\"></div>\r\n            \r\n            <div style=\"position: relative; min-width: calc((100% - 192px) - 0px);\">\r\n                <div class=\"xdoc-table-view-frozen-column-repositioner\"\r\n                    style=\"z-index: 87; display: flex; position: absolute; width: 100%; height: 100%; cursor: grab; pointer-events: none;\"\r\n                >\r\n                    <div style=\"display: flex; width: calc(100% - 64px); height: 100%;\">\r\n                        <div style=\"position: sticky; left: 0px; height: 100%;\">\r\n                            <div style=\"position: absolute; left: 23px; z-index: 30; height: 100%; opacity: 0; transition-property: opacity; transition-duration: 270ms; transition-timing-function: ease;\">\r\n                                <div style=\"position: absolute; left: -3px; top: 0px; width: 8px; pointer-events: auto; cursor: grab; height: 100%;\"></div>\r\n                                <div style=\"position: absolute; top: 0px; width: 1px; height: 100%; background: rgb(132, 177, 206); opacity: 0;\"></div>\r\n                                <div style=\"position: absolute; left: -1px; top: 0px; width: 2px; height: 100%; background: rgb(199, 198, 196);\"></div>\r\n                                <div style=\"position: absolute; left: -2px; top: 7.6px; width: 4px; height: 28px; background: rgb(91, 151, 189); border-radius: 3px;\"></div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style=\"position: absolute; top: 0px; width: 1px; height: 100%; background: rgb(132, 177, 206); left: 23px; opacity: 0;\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                <template\r\n                    v-for=\"({id: pageId, nestingLevel}, rowIndex) in props.items\"\r\n                    :key=\"pageId\"\r\n                >\r\n                    <base-button v-if=\"pageId == 'btn'\"\r\n                        @click.stop=\"handleAddNewItem(rowIndex, nestingLevel)\"\r\n                        :hover-style=\"{'background': 'rgba(55, 53, 47, 0.08)', width: '100%', display: 'flex', 'align-items': 'center', 'justify-content': 'unset', height: '32px', 'padding-left': '8px', 'font-size': '14px', 'line-height': '20px', left: 0, right: 0}\"\r\n                        :default-style=\"{ width: '100%', display: 'flex', 'align-items': 'center', 'justify-content': 'unset', height: '32px', 'padding-left': '8px', 'font-size': '14px', 'line-height': '20px', 'background': 'white', left: 0, right: 0 }\"\r\n                        :style=\"{paddingLeft: `${56+nestingLevel*28}px`, borderBottom: '1px solid rgb(233, 233, 231)'}\"\r\n                        class=\"xdoc-table-view-add-row\"\r\n                    >\r\n                        <span style=\"display: inline-flex; position: sticky; align-items: center; left: 104px; color: rgba(55, 53, 47, 0.5);\">\r\n                            <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"plus\" style=\"width: 14px; height: 14px; display: block; fill: rgba(55, 53, 47, 0.35); flex-shrink: 0; margin-left: -1px; margin-right: 6px;\"><path d=\"M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z\"></path></svg>\r\n                            New sub-item\r\n                        </span>\r\n                    </base-button>\r\n\r\n                    <template v-else>\r\n                        <div \r\n                            :data-block-id=\"pageId\" \r\n                            class=\"xdoc-selectable xdoc-page-block xdoc-collection-item\"\r\n                            style=\"display: flex; height: calc(100% + 2px); border-bottom: 1px solid rgb(233, 233, 231);\"\r\n                            :style=\"rowSelectStatus[pageId] ? { position: 'relative' } : {}\"\r\n                        >\r\n                            <base-data-provider\r\n                                :pointer=\"{\r\n                                    id: pageId,\r\n                                    table: 'block',\r\n                                    spaceId: 'f2cf1fd1-8789-4ddd-9190-49f41966c446'\r\n                                }\"\r\n                                v-slot=\"{ recordValueDeferInStore }\"\r\n                            >\r\n                                <collection-view-table-row\r\n                                    v-if=\"recordValueDeferInStore\"\r\n                                    @table-view-row-selected=\"setRowSelectStatus(pageId, $event.value === true ? 2 : 3)\"\r\n                                    @mouseover=\"setRowSelectStatus(pageId, 1)\"\r\n                                    @mouseleave=\"setRowSelectStatus(pageId, 0)\"\r\n                                    :select-checkbox-opacity=\"rowSelectStatus[pageId] ? 1 : 0\"\r\n                                >\r\n                                    <collection-view-table-cell v-for=\"(propertyFormat, colIndex) in collectionViewPropertiesRecordValueInStore\" :key=\"`r${rowIndex}c${colIndex}`\" class=\"xdoc-table-view-cell\"\r\n                                        :data-row-index=\"rowIndex\"\r\n                                        :data-col-index=\"colIndex\"\r\n                                    >    \r\n                                        <div v-if=\"colIndex === 0\" style=\"padding-top: 4px; display: flex; margin-right: 4px;\">\r\n                                            <div v-if=\"nestingLevel > 0\"\r\n                                                :style=\"{ width: `${nestingLevel*28}px`}\"    \r\n                                            ></div>\r\n                                            <base-button style=\"height: 24px; width: 24px;\"\r\n                                                @click.stop=\"handleCollectionItemExpand(pageId, rowIndex+1, nestingLevel+1)\"\r\n                                            >\r\n                                                <svg v-if=\"rowSelectStatus[pageId] === 1\"\r\n                                                    :style=\"expandedItemsIds[pageId] ? { transform: 'rotateZ(180deg)' } : { transform: 'rotateZ(90deg)' }\"\r\n                                                    role=\"graphics-symbol\" viewBox=\"0 0 100 100\" class=\"triangle\" style=\"width: 0.6875em; height: 0.6875em; display: block; fill: rgba(55, 53, 47, 0.85); flex-shrink: 0; transition: transform 200ms ease-out 0s; opacity: 1;\"><polygon points=\"5.9,88.2 50,11.8 94.1,88.2 \"></polygon></svg>\r\n                                            </base-button>\r\n                                        </div>\r\n    \r\n                                        <collection-view-table-property-value\r\n                                            @open-record=\"handleOpenRecord(pageId)\"\r\n                                            :page-id=\"pageId\"\r\n                                            :collection-id=\"props.collectionId\"\r\n                                            :property-id=\"propertyFormat.property\"\r\n                                            :type=\"getCollectionPropertyById(propertyFormat.property).type\"\r\n                                            space-id=\"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n                                            :style=\"colIndex === 0 ? { 'padding-left': 0 } : {}\"\r\n                                            style=\"flex-grow: 1; width: unset;\"\r\n                                            :key=\"pageId === dialogPropertyValue.pageId && propertyFormat.property === dialogPropertyValue.propertyId \r\n                                                ? handlePropertyValueRerender(1) \r\n                                                : handlePropertyValueRerender(0)\r\n                                            \"\r\n                                        />\r\n                                    </collection-view-table-cell>      \r\n                                </collection-view-table-row>\r\n                                \r\n                                <div class=\"xdoc-selectable-halo\"\r\n                                    v-if=\"rowSelectStatus[pageId] === 2\"\r\n                                    style=\"position: absolute; pointer-events: none; inset: 0; background: rgba(35, 131, 226, 0.14); z-index: 86; border-radius: 0px; opacity: 1; transition-property: opacity; transition-duration: 270ms; transition-timing-function: ease;\"\r\n                                ></div>\r\n                            </base-data-provider>\r\n                            <div style=\"display: flex; justify-content: flex-start; flex-grow: 1; width: 64px;\"></div>\r\n                        </div>\r\n    \r\n                        <div\r\n                            :data-block-id=\"pageId\"\r\n                            class=\"xdoc-selectable xdoc-page-block xdoc-collection-item\"\r\n                            style=\"display: flex; height: calc(100% + 2px); border-bottom: 1px solid rgb(233, 233, 231);\"\r\n                            :style=\"rowSelectStatus[pageId] ? { position: 'relative' } : {}\"\r\n                        ></div>\r\n                    </template>\r\n                </template>\r\n            </div>\r\n\r\n\r\n            <div style=\"width: 1668px;\"></div>\r\n\r\n            <base-button\r\n                @click.stop=\"handleAddNewItem\"\r\n                :hover-style=\"{'background': 'rgba(55, 53, 47, 0.08)', width: '100%', display: 'flex', 'align-items': 'center', 'justify-content': 'unset', height: '32px', 'padding-left': '8px', 'font-size': '14px', 'line-height': '20px', left: 0, right: 0}\"\r\n                :default-style=\"{width: '100%', display: 'flex', 'align-items': 'center', 'justify-content': 'unset', height: '32px', 'padding-left': '8px', 'font-size': '14px', 'line-height': '20px', 'background': 'white', left: 0, right: 0 }\"\r\n                class=\"xdoc-table-view-add-row\"\r\n            >\r\n                <span style=\"display: inline-flex; position: sticky; align-items: center; left: 104px; color: rgba(55, 53, 47, 0.5);\">\r\n                    <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"plus\" style=\"width: 14px; height: 14px; display: block; fill: rgba(55, 53, 47, 0.35); flex-shrink: 0; margin-left: -1px; margin-right: 6px;\"><path d=\"M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z\"></path></svg>\r\n                    New\r\n                </span>\r\n            </base-button>\r\n\r\n            <!-- <div contenteditable=\"false\"\r\n                class=\"pseudoSelection\"\r\n                data-content-editable-void=\"true\"\r\n                style=\"user-select: none; --pseudoSelection--background: transparent; display: flex; position: absolute; background: white; z-index: 83; font-size: 14px; height: 43px; min-width: 100%; clip-path: polygon(0% -20%, 100% -20%, 100% 100%, 0% 100%); left: 0px; border-top: 1px solid rgb(233, 233, 231); transform: translate3d(0px, -288px, 0px);\"\r\n            ></div> -->\r\n\r\n            <div style=\"height: 32px;\"></div>\r\n        </div>\r\n\r\n        <div></div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport CollectionViewTableRow from './CollectionViewTableRow.vue';\r\nimport BaseDataProvider from './BaseDataProvider.vue';\r\nimport BaseButton from './BaseButton.vue';\r\nimport { computed, defineProps, defineEmits, ref, watch } from 'vue';\r\nimport { useRecordValuesStore } from '@/stores/recordValues';\r\nimport CollectionViewTableCell from './CollectionViewTableCell.vue';\r\nimport CollectionViewTablePropertyValue from './CollectionViewTablePropertyValue.vue';\r\nimport { useRouter } from 'vue-router';\r\nimport uuid from '@/helpers/globals/uuid';\r\nimport { transformToStandardUUIDFormat } from '../helpers/router/transformToStandardUUIDFormat';\r\nimport { CollectionView } from '@/entities/CollectionView';\r\nimport { useGeneralStore } from '@/stores/general';\r\n\r\nconst emits = defineEmits([\r\n    \"add-items\",\r\n    \"collapse\"\r\n]);\r\n\r\nconst props = defineProps({\r\n    collectionId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    collectionViewId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    items: {\r\n        type: Array,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst recordValuesStore = useRecordValuesStore();\r\n\r\nconst collectionRecordValueInStore = computed(function() {\r\n    return recordValuesStore.getRecordValue({\r\n        id: props.collectionId,\r\n        table: \"collection\",\r\n        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n    })\r\n})\r\n\r\nconst collectionViewRecordValueInStore = computed(function() {\r\n    return recordValuesStore.getRecordValue({\r\n        id: props.collectionViewId,\r\n        table: \"collection_view\",\r\n        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n    })\r\n})\r\nconst collectionViewPropertiesRecordValueInStore = computed(function() {\r\n    const collectionPropertyIds = Object.keys(collectionRecordValueInStore.value.schema);\r\n\r\n    return CollectionView.prototype.getProperties.call(\r\n        collectionViewRecordValueInStore.value\r\n    ).filter(({property}) => {\r\n        return collectionPropertyIds.indexOf(property) !== -1;\r\n    });\r\n})\r\n\r\nfunction getCollectionPropertyById(id) {\r\n    return collectionRecordValueInStore.value.schema[id];\r\n}\r\n\r\nconst dialogPropertyValue = computed(function () {\r\n    return useGeneralStore().propertyValueDialog;\r\n});\r\n\r\nfunction handlePropertyValueRerender(needRerender) {\r\n    if(needRerender === 1) {\r\n        const generalStore = useGeneralStore();\r\n\r\n        generalStore.propertyValueDialog = {\r\n            pageId: null,\r\n            propertyId: null\r\n        }\r\n    }\r\n\r\n    return needRerender;\r\n}\r\n\r\nfunction emitAddItems(items, index = null, makeApiCallToSetRecord = true) {\r\n    emits(\"add-items\", {\r\n        items,\r\n        index,\r\n        makeApiCallToSetRecord\r\n    });\r\n}\r\n\r\nfunction handleAddNewItem(index = null, nestingLevel = 0) {\r\n    const id = transformToStandardUUIDFormat(uuid());\r\n    \r\n    emitAddItems(\r\n        [{ id, nestingLevel }],\r\n        index\r\n    );\r\n}\r\n\r\nconst expandedItemsIds = ref({});\r\n\r\nwatch(\r\n    () => props.items,\r\n    (newVal) => {\r\n        for(let itemId in expandedItemsIds.value) {\r\n            if(newVal.findIndex(({id}) => id === itemId) === -1) expandedItemsIds.value[itemId] = false;\r\n        }\r\n    },\r\n    { deep: true}\r\n);\r\n\r\nfunction handleCollectionItemExpand(pageId, index, nestingLevel) {\r\n    const itemRecordValue = recordValuesStore.getRecordValue({\r\n        id: pageId,\r\n        table: \"block\",\r\n        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n    });\r\n\r\n    const subItemPropertyId = collectionRecordValueInStore.value.format.subitem_property;\r\n\r\n    let itemSubItemsPropertyValue = itemRecordValue?.properties?.[subItemPropertyId]\r\n\r\n    let subItemsIds = [];\r\n\r\n    itemSubItemsPropertyValue?.map((subItemPointer) => {\r\n        if(subItemPointer[0] === '') {\r\n            subItemsIds.push(subItemPointer[1][0][1]);\r\n        }\r\n    })\r\n\r\n    if(!subItemsIds?.length) subItemsIds = [];\r\n\r\n    if (expandedItemsIds.value[pageId]) {\r\n        expandedItemsIds.value[pageId] = false;\r\n        emits(\"collapse\", {\r\n            itemId: pageId\r\n        })\r\n        return;\r\n    }\r\n\r\n    expandedItemsIds.value[pageId] = true;\r\n\r\n    const subItems = subItemsIds.map((id) => {\r\n        return {\r\n            id,\r\n            nestingLevel\r\n        }\r\n    });\r\n\r\n    subItems.push({\r\n        id: \"btn\",\r\n        pageId,\r\n        nestingLevel\r\n    });\r\n\r\n    emitAddItems(\r\n        subItems.length >= 0 ? subItems : [],\r\n        index,\r\n        false\r\n    );\r\n}\r\n\r\n// 1-hover 2-selected 3-unselect\r\nconst rowSelectStatus = ref({});\r\nconst router = useRouter();\r\n\r\nfunction setRowSelectStatus(pageId, status) {\r\n    if (rowSelectStatus.value[pageId] === 2) {\r\n        if (status === 0 || status === 1) return;\r\n    }\r\n    rowSelectStatus.value[pageId] = status;\r\n}\r\n\r\nfunction handleOpenRecord(pageId) {\r\n    router.push({ query: { p: pageId.replaceAll(\"-\", \"\"), pm: 's' } });\r\n}\r\n</script>","import script from \"./CollectionViewTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionViewTable.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineStore } from \"pinia\"\r\n\r\ninterface state {\r\n    menu: {\r\n        component: Array<{name: string, props: object}>,\r\n    };\r\n    types: Array<{type: string, label: string}>\r\n}\r\n\r\nexport const useCollectionsStore = defineStore('collections', {\r\n    state: (): state => ({\r\n        menu: {\r\n            component: [],\r\n        },\r\n        types: [\r\n            {\r\n                type: \"text\",\r\n                label: \"Text\"\r\n            },\r\n            {\r\n                type: \"number\",\r\n                label: \"Number\"\r\n            },\r\n            {\r\n                type: \"date\",\r\n                label: \"Date\"\r\n            },\r\n            {\r\n                type: \"status\",\r\n                label: \"Status\"\r\n            },\r\n            {\r\n                type: \"select\",\r\n                label: \"Select\"\r\n            },\r\n            {\r\n                type: \"multi_select\",\r\n                label: \"Multiselect\"\r\n            },\r\n            {\r\n                type: \"checkbox\",\r\n                label: \"Checkbox\"\r\n            },\r\n            {\r\n                type: \"person\",\r\n                label: \"Person\"\r\n            },\r\n            {\r\n                type: \"url\",\r\n                label: \"Url\"\r\n            },\r\n            {\r\n                type: \"relation\",\r\n                label: \"Relation\"\r\n            }\r\n        ]\r\n    }),\r\n    getters: {\r\n        getCurrentComponent(state): object {\r\n            return state.menu.component[state.menu.component.length - 1];\r\n        }\r\n    },\r\n    actions: {\r\n        setCurrentComponent(name: string, props: object = {}) {\r\n            this.menu.component.push({ name, props });\r\n        },\r\n        removeCurrentComponent() {\r\n            this.menu.component.pop();\r\n        },\r\n        removeAllComponent() {\r\n            this.menu.component = [];\r\n        }\r\n    }\r\n})","<template>\r\n    <div style=\"display: flex; align-items: center; padding: 14px 16px 6px; height: 42px;\">\r\n        <base-button \r\n            @click.stop=\"removeLastComponent\"\r\n            style=\"height: 22px; width: 24px; margin-right: 8px; margin-left: -2px;\"\r\n        >\r\n            <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"arrowLeftThick\" style=\"width: 16px; height: 16px; display: block; fill: rgba(55, 53, 47, 0.45); flex-shrink: 0;\"><path d=\"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z\"></path></svg>\r\n        </base-button>\r\n\r\n        <span style=\"flex-grow: 1; font-weight: 600; font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n            <slot></slot>\r\n        </span>\r\n\r\n        <base-button \r\n            @click.stop=\"close\"\r\n            style=\"border-radius: 100%; height: 18px; width: 18px;\"\r\n            :default-style=\"{background: 'rgba(55, 53, 47, 0.08)'}\"\r\n            :hover-style=\"{background: 'rgba(55, 53, 47, 0.16)'}\"\r\n        >\r\n            <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"closeSmall\" style=\"width: 14px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.65); flex-shrink: 0;\"><path d=\"M3.732 11.052c-.303.308-.32.877.011 1.202.33.33.894.32 1.203.011L8 9.21l3.05 3.05c.32.325.872.32 1.197-.011a.857.857 0 00.01-1.197L9.21 8.002l3.05-3.056a.857.857 0 00-.01-1.197.857.857 0 00-1.198-.01L8 6.788 4.946 3.732c-.31-.303-.878-.32-1.203.01-.325.331-.314.895-.01 1.203l3.055 3.056-3.056 3.05z\"></path></svg>\r\n        </base-button>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useCollectionsStore } from \"@/stores/collections\";\r\nimport BaseButton from \"./BaseButton.vue\";\r\nimport { defineEmits } from \"vue\"\r\n\r\nconst collectionStore = useCollectionsStore();\r\n\r\nconst emits = defineEmits([\r\n    'close'\r\n])\r\n\r\nfunction removeLastComponent() {\r\n    collectionStore.removeCurrentComponent();\r\n}\r\n\r\nfunction close() {\r\n    collectionStore.removeAllComponent();\r\n    emits('close')\r\n}\r\n</script>","import script from \"./BaseCollectionSideMenuHeader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BaseCollectionSideMenuHeader.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div style=\"display: flex; flex-direction: column; min-width: 290px; max-width: 290px; height: 100%; max-height: calc(100% - 16px);\">\r\n        <div style=\"flex-shrink: 0;\">\r\n            <base-collection-side-menu-header>\r\n                <slot name=\"header\"></slot>\r\n            </base-collection-side-menu-header>\r\n        </div>\r\n        \r\n        <div v-if=\"props.topPart === true\" style=\"padding-top: 6px; padding-bottom: 6px;\">\r\n            <slot name=\"top-part\"></slot>\r\n        </div>\r\n        \r\n        <div class=\"xdoc-scroller vertical\"\r\n            style=\"z-index: 1; flex-grow: 0; min-height: 0px; transform: translateZ(0px); overflow: hidden auto; margin-right: 0px; margin-bottom: 0px;\"\r\n        >\r\n            <slot name=\"mid-part\"></slot>\r\n        </div>\r\n\r\n        <footer style=\"flex-shrink: 0;\">\r\n            <slot name=\"footer\"></slot>\r\n        </footer>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps } from 'vue';\r\nimport BaseCollectionSideMenuHeader from './BaseCollectionSideMenuHeader.vue';\r\n\r\nconst props = defineProps({\r\n    topPart: {\r\n        type: Boolean,\r\n        default: true\r\n    }\r\n})\r\n</script>","import script from \"./BaseCollectionSideMenu.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BaseCollectionSideMenu.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div style=\"display: flex; flex-direction: column;\">\r\n        <div role=\"menuitem\"\r\n            tabindex=\"-1\"\r\n            style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: calc(100% - 8px); margin-left: 4px; margin-right: 4px; border-radius: 3px;\"\r\n            :style=\"state.style\"\r\n            @mouseenter=\"state.style = { background: 'rgba(55, 53, 47, 0.08)' }\"\r\n            @mouseleave=\"state.style = {}\"\r\n        >\r\n            <div style=\"display: flex; align-items: center; line-height: 120%; width: 100%; width: 100%; user-select: none; min-height: 28px; font-size: 14px;\">\r\n                <div style=\"margin-left: 12px; margin-right: 6px; min-width: 0px; flex: 1 1 auto;\">\r\n                    <div style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n                        <div style=\"display: flex; align-items: center;\">\r\n                            <div style=\"display: flex; align-items: center; justify-content: center; width: 18px; height: 24px; flex-shrink: 0; cursor: -webkit-grab; margin-right: 8px;\"><svg role=\"graphics-symbol\" viewBox=\"0 0 10 10\" class=\"dragHandle\" style=\"width: 12px; height: 12px; display: block; fill: rgba(55, 53, 47, 0.45); flex-shrink: 0;\"><path d=\"M3,2 C2.44771525,2 2,1.55228475 2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 C4,1.55228475 3.55228475,2 3,2 Z M3,6 C2.44771525,6 2,5.55228475 2,5 C2,4.44771525 2.44771525,4 3,4 C3.55228475,4 4,4.44771525 4,5 C4,5.55228475 3.55228475,6 3,6 Z M3,10 C2.44771525,10 2,9.55228475 2,9 C2,8.44771525 2.44771525,8 3,8 C3.55228475,8 4,8.44771525 4,9 C4,9.55228475 3.55228475,10 3,10 Z M7,2 C6.44771525,2 6,1.55228475 6,1 C6,0.44771525 6.44771525,0 7,0 C7.55228475,0 8,0.44771525 8,1 C8,1.55228475 7.55228475,2 7,2 Z M7,6 C6.44771525,6 6,5.55228475 6,5 C6,4.44771525 6.44771525,4 7,4 C7.55228475,4 8,4.44771525 8,5 C8,5.55228475 7.55228475,6 7,6 Z M7,10 C6.44771525,10 6,9.55228475 6,9 C6,8.44771525 6.44771525,8 7,8 C7.55228475,8 8,8.44771525 8,9 C8,9.55228475 7.55228475,10 7,10 Z\"></path></svg></div>\r\n                        \r\n                            <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"typesTitle\" style=\"width: 16px; height: 16px; display: block; fill: rgba(55, 53, 47, 0.85); flex-shrink: 0;\"><path d=\"M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z\"></path></svg>\r\n\r\n                            <span style=\"margin-left: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\"\r\n                            >{{ props.name }}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div style=\"margin-left: auto; margin-right: 12px; min-width: 0px; flex-shrink: 0;\">\r\n                    <div style=\"display: flex; align-items: center;\">\r\n                        <base-button aria-disabled=\"true\"      \r\n                            @click.stop=\"emitPropertyVisibilityChangeEvent\"                                                                 \r\n                            tabindex=\"-1\" \r\n                            aria-label=\"Toggle property visibility\" \r\n                            style=\"display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0; border-radius: 3px; height: 24px; width: 24px;\"\r\n                        >\r\n                            <svg role=\"graphics-symbol\" \r\n                                viewBox=\"0 0 32 32\" \r\n                                class=\"eye\" \r\n                                style=\"width: 16px; height: 16px; display: block; fill: rgba(55, 53, 47, 0.85); flex-shrink: 0;\"\r\n                                :style=\"props.visible !== true ? 'opacity: 0.4;' : ''\"\r\n                            >\r\n                                <path d=\"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z\"></path>\r\n                            </svg>\r\n                        </base-button>\r\n                        \r\n                        <svg role=\"graphics-symbol\" \r\n                            viewBox=\"0 0 16 16\" \r\n                            class=\"chevronRight\" \r\n                            style=\"width: 12px; \r\n                            height: 100%; \r\n                            display: block; \r\n                            fill: rgba(55, 53, 47, 0.5); \r\n                            flex-shrink: 0; \r\n                            margin-left: 5px;\"\r\n                        >\r\n                            <path d=\"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z\"></path>\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps, reactive, defineEmits } from \"vue\";\r\nimport BaseButton from \"./BaseButton.vue\";\r\n\r\nconst props = defineProps({\r\n    name: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    id: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    visible: {\r\n        type: Boolean,\r\n        required: true\r\n    },\r\n    collectionViewId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst state = reactive({\r\n    style: {}\r\n})\r\n\r\nconst emits = defineEmits([\r\n    \"property-visibility-change\"\r\n])\r\n\r\nfunction emitPropertyVisibilityChangeEvent() {\r\n    emits(\"property-visibility-change\", {\r\n        id: props.id,\r\n        visible: !props.visible\r\n    })\r\n}\r\n</script>","import script from \"./BaseCollectionSideMenuPropertiesItem.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BaseCollectionSideMenuPropertiesItem.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <base-collection-side-menu>\r\n        <template #header>Properties</template>\r\n\r\n        <template #top-part>\r\n            <div style=\"display: flex; align-items: center; line-height: 120%; width: 100%; user-select: none; min-height: 28px; font-size: 14px;\">\r\n                <div style=\"margin-left: 12px; margin-right: 12px; min-width: 0px; flex: 1 1 auto;\">\r\n                    <div style=\"display: flex;\">\r\n                        <div class=\"xdoc-focusable-within\"\r\n                            style=\"display: flex; align-items: center; width: 100%; font-size: 14px; line-height: 20px; padding: 3px 6px; position: relative; border-radius: 4px; box-shadow: rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset; background: rgba(242, 241, 238, 0.6); cursor: pointer; height: 28px;\"\r\n                        >\r\n                            <input type=\"text\"\r\n                                placeholder=\"Search for a property...\"\r\n                                style=\"font-size: inherit; line-height: inherit; border: none; background: none; width: 100%; display: block; resize: none; padding: 0px;\"\r\n                            >\r\n\r\n                            <base-button style=\"border-radius: 20px; margin-left: 4px;\">\r\n                                <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"clearInput\" style=\"width: 16px; height: 16px; display: block; fill: rgba(55, 53, 47, 0.35); flex-shrink: 0;\"><path d=\"M7.993 15.528a7.273 7.273 0 01-2.923-.593A7.633 7.633 0 012.653 13.3a7.797 7.797 0 01-1.633-2.417 7.273 7.273 0 01-.593-2.922c0-1.035.198-2.01.593-2.922A7.758 7.758 0 015.063.99 7.273 7.273 0 017.985.395a7.29 7.29 0 012.93.593 7.733 7.733 0 012.417 1.64 7.647 7.647 0 011.64 2.41c.396.914.594 1.888.594 2.923 0 1.035-.198 2.01-.593 2.922a7.735 7.735 0 01-4.058 4.05 7.272 7.272 0 01-2.922.594zM5.59 11.06c.2 0 .371-.066.513-.198L8 8.951l1.904 1.911a.675.675 0 00.498.198.667.667 0 00.491-.198.67.67 0 00.205-.49.64.64 0 00-.205-.491L8.981 7.969l1.92-1.911a.686.686 0 00.204-.491.646.646 0 00-.205-.484.646.646 0 00-.483-.205.67.67 0 00-.49.205L8 6.995 6.081 5.083a.696.696 0 00-.49-.19.682.682 0 00-.491.198.651.651 0 00-.198.49c0 .181.068.342.205.484l1.912 1.904-1.912 1.92a.646.646 0 00-.205.483c0 .19.066.354.198.49.136.132.3.198.49.198z\"></path></svg>\r\n                            </base-button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </template>\r\n\r\n        <template #mid-part>\r\n            <div\r\n                tabindex=\"0\"\r\n                role=\"menu\"\r\n            >\r\n                <div style=\"padding-top: 6px; padding-bottom: 6px;\">\r\n                    <div style=\"display: flex; padding-left: 14px; padding-right: 14px; margin-top: 6px; margin-bottom: 8px; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.4); font-size: 12px; font-weight: 500; line-height: 120%; user-select: none; height: 19px;\">\r\n                        <div style=\"display: flex; align-self: center;\">\r\n                            Shown in {{ collectionViewType }}\r\n                        </div>\r\n\r\n                        <div style=\"margin-left: auto;\">\r\n                            <base-button style=\"flex-shrink: 1; white-space: nowrap; border-radius: 4px; font-size: 12px; line-height: 1.2; min-width: 0px; padding: 2px 6px; color: rgb(35, 131, 226);\"\r\n                                :hover-style=\"{background: 'rgba(35, 131, 226, 0.07)'}\"\r\n                            >\r\n                                Hide all\r\n                            </base-button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style=\"margin: 0px;\">\r\n                        <base-collection-side-menu-property-item \r\n                            v-for=\"(id) in visiblePropertiesIds\" \r\n                            :key=\"id\" \r\n                            @click.stop=\"handleUserSelectPropertyEdit(id)\"\r\n                            @property-visibility-change=\"handlePropertyVisibilityChange($event.id, $event.visible)\"\r\n                            :name=\"collectionSchema[id].name\"\r\n                            :id=\"id\"\r\n                            :visible=true\r\n                            :collection-view-id=\"props.collectionViewId\"\r\n                        />\r\n\r\n                        <div style=\"display: flex; flex-direction: column;\">\r\n                            <div style=\"padding-top: 6px; padding-bottom: 0px;\">\r\n                                <div style=\"display: flex; margin-top: 6px; margin-bottom: 8px; padding-left: 14px; padding-right: 14px; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.4); font-size: 12px; font-weight: 500; line-height: 120%; user-select: none; height: 19px;\">\r\n                                    <div style=\"display: flex; align-self: center;\">\r\n                                        Hidden in {{ collectionViewType }}\r\n                                    </div>\r\n\r\n                                    <div style=\"margin-left: auto;\">\r\n                                        <base-button style=\"flex-shrink: 1; white-space: nowrap; border-radius: 4px; font-size: 12px; line-height: 1.2; min-width: 0px; padding: 2px 6px; color: rgb(35, 131, 226);\"\r\n                                            :hover-style=\"{background: 'rgba(35, 131, 226, 0.07)'}\"\r\n                                        >\r\n                                            Show all\r\n                                        </base-button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <base-collection-side-menu-property-item \r\n                            v-for=\"(id) in hiddenPropertiesIds\" \r\n                            :key=\"id\" \r\n                            @click.stop=\"handleUserSelectPropertyEdit(id)\"\r\n                            @property-visibility-change=\"handlePropertyVisibilityChange($event.id, $event.visible)\"\r\n                            :name=\"collectionSchema[id].name\"\r\n                            :id=\"id\"\r\n                            :visible=false\r\n                            :collection-view-id=\"props.collectionViewId\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div style=\"padding-top: 6px; padding-bottom: 6px;\">\r\n                <base-button style=\"width: calc(100% - 8px); margin-left: 4px; margin-right: 4px; border-radius: 3px; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.45);\">\r\n                    <div style=\"display: flex; align-items: center; line-height: 120%; width: 100%; user-select: none; min-height: 28px; font-size: 14px;\">\r\n                        <div style=\"display: flex; align-items: center; justify-content: center; margin-left: 10px; margin-right: 4px;\">\r\n                            <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"trash\" style=\"width: 24px; height: 16px; display: block; fill: inherit; flex-shrink: 0; margin-right: -2px;\"><path d=\"M4.8623 15.4287H11.1445C12.1904 15.4287 12.8672 14.793 12.915 13.7402L13.3799 3.88965H14.1318C14.4736 3.88965 14.7402 3.62988 14.7402 3.28809C14.7402 2.95312 14.4736 2.69336 14.1318 2.69336H11.0898V1.66797C11.0898 0.62207 10.4268 0 9.29199 0H6.69434C5.56641 0 4.89648 0.62207 4.89648 1.66797V2.69336H1.86133C1.5332 2.69336 1.25977 2.95312 1.25977 3.28809C1.25977 3.62988 1.5332 3.88965 1.86133 3.88965H2.62012L3.08496 13.7471C3.13281 14.7998 3.80273 15.4287 4.8623 15.4287ZM6.1543 1.72949C6.1543 1.37402 6.40039 1.14844 6.7832 1.14844H9.20312C9.58594 1.14844 9.83203 1.37402 9.83203 1.72949V2.69336H6.1543V1.72949ZM4.99219 14.2188C4.61621 14.2188 4.34277 13.9453 4.32227 13.542L3.86426 3.88965H12.1152L11.6709 13.542C11.6572 13.9453 11.3838 14.2188 10.9941 14.2188H4.99219ZM5.9834 13.1182C6.27051 13.1182 6.45508 12.9336 6.44824 12.667L6.24316 5.50293C6.23633 5.22949 6.04492 5.05176 5.77148 5.05176C5.48438 5.05176 5.2998 5.23633 5.30664 5.50293L5.51172 12.667C5.51855 12.9404 5.70996 13.1182 5.9834 13.1182ZM8 13.1182C8.28711 13.1182 8.47852 12.9336 8.47852 12.667V5.50293C8.47852 5.23633 8.28711 5.05176 8 5.05176C7.71289 5.05176 7.52148 5.23633 7.52148 5.50293V12.667C7.52148 12.9336 7.71289 13.1182 8 13.1182ZM10.0166 13.1182C10.29 13.1182 10.4746 12.9404 10.4814 12.667L10.6934 5.50293C10.7002 5.23633 10.5088 5.05176 10.2285 5.05176C9.95508 5.05176 9.76367 5.22949 9.75684 5.50293L9.54492 12.667C9.53809 12.9336 9.72949 13.1182 10.0166 13.1182Z\"></path></svg>\r\n                        </div>\r\n\r\n                        <div style=\"margin-left: 6px; margin-right: 6px; min-width: 0px; flex: 1 1 auto;\">\r\n                            <div style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n                                Deleted properties\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style=\"margin-left: auto; margin-right: 12px; min-width: 0px; flex-shrink: 0; display: flex; align-items: center; color: rgba(55, 53, 47, 0.5); fill: rgba(55, 53, 47, 0.35);\">\r\n                            2\r\n                            <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"chevronRight\" style=\"width: 12px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.35); flex-shrink: 0; margin-left: 6px; transition: transform 200ms ease-in-out 0s;\"><path d=\"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z\"></path></svg>\r\n                        </div>\r\n                    </div>\r\n                </base-button>\r\n            </div>\r\n        </template>\r\n\r\n        <template #footer>\r\n            <div style=\"padding-top: 6px; padding-bottom: 6px; box-shadow: rgba(55, 53, 47, 0.09) 0px -1px 0px; margin-top: 1px;\">\r\n                <base-button \r\n                    @click.stop=\"setCurrentComponent('propertyCreate')\"\r\n                    style=\"width: calc(100% - 8px); margin-left: 4px; margin-right: 4px; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.45);\"\r\n                >\r\n                    <div style=\"display: flex; align-items: center; line-height: 120%; width: 100%; user-select: none; min-height: 28px; font-size: 14px;\">\r\n                        <div style=\"display: flex; align-items: center; justify-content: center; margin-left: 10px; margin-right: 4px;\"><svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"plus\" style=\"width: 24px; height: 16px; display: block; fill: inherit; flex-shrink: 0; margin-right: -2px;\"><path d=\"M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z\"></path></svg></div>\r\n                        \r\n                        <div style=\"margin-left: 6px; margin-right: 6px; min-width: 0px; flex: 1 1 auto;\">\r\n                            <div style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n                                New property\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style=\"margin-left: auto; margin-right: 12px; min-width: 0px; flex-shrink: 0; display: flex; align-items: center; color: rgba(55, 53, 47, 0.5); fill: rgba(55, 53, 47, 0.35);\"></div>\r\n                    </div>\r\n\r\n                </base-button>\r\n            </div>\r\n        </template>\r\n    </base-collection-side-menu>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, defineProps } from 'vue';\r\nimport BaseButton from './BaseButton.vue';\r\nimport BaseCollectionSideMenu from './BaseCollectionSideMenu.vue';\r\nimport BaseCollectionSideMenuPropertyItem from './BaseCollectionSideMenuPropertiesItem.vue';\r\nimport { useCollectionsStore } from '@/stores/collections';\r\nimport { useRecordValuesStore } from '@/stores/recordValues';\r\nimport { CollectionView } from '@/entities/CollectionView';\r\nimport { useTransactionsQueue } from '@/stores/transactionsQueue';\r\nimport { makeTransaction } from '@/services/transactions/factories/makeTransaction';\r\nimport { makeOperation } from '@/services/transactions/factories/makeOperation';\r\n\r\nconst props = defineProps({\r\n    collectionId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    collectionViewId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\n// properties to render\r\nconst recordValuesStore = useRecordValuesStore();\r\n\r\nconst collectionSchema = recordValuesStore.getRecordValue({\r\n    id: props.collectionId,\r\n    table: \"collection\",\r\n    spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n}).schema;\r\n\r\nconst collectionViewRecordValue = computed(\r\n    () => recordValuesStore.getRecordValue({\r\n        id: props.collectionViewId,\r\n        table: \"collection_view\",\r\n        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n    })\r\n);\r\n\r\nconst collectionViewType = collectionViewRecordValue.value.type;\r\n\r\nconst visiblePropertiesIds = computed(() => {\r\n    return CollectionView.prototype.getProperties.call(\r\n        collectionViewRecordValue.value\r\n    ).filter(property => property.visible === true).map(o => o.property);\r\n});\r\n\r\nconst hiddenPropertiesIds = computed(\r\n    () => {\r\n        const collectionProperties = new Set(Object.keys(collectionSchema));\r\n        return collectionProperties.difference(new Set(visiblePropertiesIds.value));\r\n    }\r\n);\r\n\r\n//\r\nfunction handlePropertyVisibilityChange(id, visible) {\r\n    const properties = CollectionView.prototype.getProperties.call(collectionViewRecordValue.value);\r\n    const targetPropertyIndex = properties.findIndex(({property}) => property === id);\r\n\r\n    if(targetPropertyIndex === -1) return;\r\n\r\n    properties[targetPropertyIndex].visible = visible;\r\n\r\n    useTransactionsQueue().enqueue(\r\n        makeTransaction({\r\n            spaceId: \"\",\r\n            debug: {\r\n                userAction: \"ColelctionSideMenuProperties->handlePropertyVisibilityChange\"\r\n            },\r\n            operations: [\r\n                makeOperation(\r\n                    \"update\",\r\n                    {\r\n                        \"format\": collectionViewRecordValue.value.format\r\n                    },\r\n                    [],\r\n                    {\r\n                        id: props.collectionViewId,\r\n                        table: \"collection_view\",\r\n                        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n                    }\r\n                )\r\n            ]\r\n        })\r\n    )\r\n}\r\n\r\n// handling side menu visible component\r\nconst collectionStore = useCollectionsStore();\r\n\r\nfunction setCurrentComponent(component, props = {}) {\r\n    collectionStore.setCurrentComponent(component, props);\r\n}\r\n\r\nfunction handleUserSelectPropertyEdit(propertyId) {\r\n    setCurrentComponent('propertyEdit', {\r\n        id: propertyId\r\n    })\r\n}\r\n</script>","import script from \"./CollectionSideMenuProperties.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionSideMenuProperties.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <base-button style=\"color: rgb(55, 53, 47); fill: rgba(55, 53, 47, 0.85); margin-right: 4px; margin-left: 4px; width: calc(100% - 8px);\">\r\n        <div style=\"display: flex; align-items: center; min-height: 28px; font-size: 14px; line-height: 120%; user-select: none; width: 100%;\">\r\n            <div v-if=\"props.graphic !== false\" style=\"margin-left: 10px; margin-right: 4px; display: flex; justify-content: center; align-items: center;\">\r\n                <slot name=\"graphic\"></slot>\r\n            </div>\r\n\r\n            <div style=\"margin-right: 6px; flex: 1 1 auto; min-width: 0;\" :style=\"props.graphic === false ? 'margin-left: 12px;' : 'margin-left: 6px;'\">\r\n                <div style=\"white-space: nowrap; text-overflow: ellipsis; overflow: hidden;\">\r\n                    <slot name=\"item\"></slot>\r\n                </div>\r\n            </div>\r\n\r\n            <div style=\"margin-left: auto; margin-right: 12px; min-width: 0; flex-shrink: 0; display: flex; align-items: center; color: rgba(55, 53, 47, 0.5); fill: rgba(55, 53, 47, 0.35);\">\r\n                <slot name=\"itemMeta\"></slot>\r\n                <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"chevronRight\" style=\"width: 12px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.35); flex-shrink: 0; margin-left: 6px; transition: transform 200ms ease-in-out 0s;\"><path d=\"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z\"></path></svg>\r\n            </div>\r\n        </div>\r\n    </base-button>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps } from \"vue\";\r\nimport BaseButton from \"./BaseButton.vue\";\r\n\r\nconst props = defineProps({\r\n    graphic: {\r\n        type: Boolean,\r\n        default: true\r\n    }\r\n})\r\n</script>","import script from \"./BaseCollectionSideMenuItemCol3.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BaseCollectionSideMenuItemCol3.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <base-collection-side-menu>\r\n        <template #header>\r\n            View options\r\n        </template>\r\n\r\n        <template #top-part>\r\n            <div style=\"display: flex; align-items: center; line-height: 120%; user-select: none; font-size: 14px; min-height: 28px; width: 100%;\">\r\n                <div style=\"margin-left: 12px; flex-shrink: 0; margin-right: auto; min-width: 0px;\">\r\n                    <base-button style=\"height: 28px; padding-left: 6px; padding-right: 0px; line-height: 1.2; width: 28px; border: solid 1px rgba(55, 53, 47, 0.16);\">\r\n                        <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"collectionTable\" style=\"width: 16px; height: 16px; display: block; fill: rgb(85, 83, 78); flex-shrink: 0; margin-right: 6px;\"><path d=\"M2.39697 14.4634H13.5964C15.0532 14.4634 15.8311 13.6921 15.8311 12.2485V4.24609C15.8311 2.80249 15.0532 2.03125 13.5964 2.03125H2.39697C0.940186 2.03125 0.162354 2.7959 0.162354 4.24609V12.2485C0.162354 13.6987 0.940186 14.4634 2.39697 14.4634ZM1.63232 4.39771C1.63232 3.79126 1.94214 3.50122 2.52222 3.50122H7.28809V5.74243H1.63232V4.39771ZM13.4712 3.50122C14.0447 3.50122 14.3611 3.79126 14.3611 4.39771V5.74243H8.70532V3.50122H13.4712ZM1.63232 9.3811V7.10693H7.28809V9.3811H1.63232ZM8.70532 9.3811V7.10693H14.3611V9.3811H8.70532ZM2.52222 12.9934C1.94214 12.9934 1.63232 12.7034 1.63232 12.0969V10.7522H7.28809V12.9934H2.52222ZM14.3611 12.0969C14.3611 12.7034 14.0447 12.9934 13.4712 12.9934H8.70532V10.7522H14.3611V12.0969Z\"></path></svg>\r\n                    </base-button>\r\n                </div>\r\n\r\n                <div style=\"margin-left: 6px; flex: 1 1 auto; margin-right: 6px; min-width: 0px;\">\r\n                    <div style=\"display: flex;\">\r\n                        <div class=\"xdoc-focusable-within\"\r\n                            style=\"display: flex; align-items: center; width: 100%; font-size: 14px; line-height: 20px; padding: 3px 6px; position: relative; border-radius: 4px; box-shadow: rgba(15, 15, 15, 0.1) 0 0 0 1px inset; background: rgba(242, 241, 238, 0.6); cursor: text; height: 28px;\"\r\n                        >\r\n                            <input placeholder=\"View name\" type='text' style=\"font-size: inherit; line-height: inherit; border: none; background: none; width: 100%; display: block; resize: none; padding: 0px;\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </template>\r\n\r\n        <template #mid-part>\r\n            <div style=\"padding-top: 6px; padding-bottom: 6px;\">\r\n                <base-collection-side-menu-item-col-3>\r\n                    <template #graphic>\r\n                        <svg role=\"graphics-symbol\" viewBox=\"0 0 24 24\" class=\"layoutPadded\" style=\"width: 24px; height: 24px; display: block; fill: inherit; flex-shrink: 0; margin-right: -2px;\"><path d=\"M3.94727 11.832H10.2295C11.3574 11.832 11.9248 11.2715 11.9248 10.1504V7.30664C11.9248 6.18555 11.3574 5.625 10.2295 5.625H3.94727C2.81934 5.625 2.25195 6.18555 2.25195 7.30664V10.1504C2.25195 11.2715 2.81934 11.832 3.94727 11.832ZM15.6572 17.5811H20.0459C21.1738 17.5811 21.7412 17.0273 21.7412 15.8994V8.33203C21.7412 7.21094 21.1738 6.65723 20.0459 6.65723H15.6572C14.5361 6.65723 13.9688 7.21094 13.9688 8.33203V15.8994C13.9688 17.0273 14.5361 17.5811 15.6572 17.5811ZM4.11133 10.5469C3.73535 10.5469 3.53711 10.3486 3.53711 9.95898V7.49805C3.53711 7.10156 3.73535 6.91016 4.11133 6.91016H10.0586C10.4414 6.91016 10.6396 7.10156 10.6396 7.49805V9.95898C10.6396 10.3486 10.4414 10.5469 10.0586 10.5469H4.11133ZM15.8213 16.3027C15.4521 16.3027 15.2471 16.1045 15.2471 15.7148V8.52344C15.2471 8.12695 15.4521 7.93555 15.8213 7.93555H19.875C20.2578 7.93555 20.4561 8.12695 20.4561 8.52344V15.7148C20.4561 16.1045 20.2578 16.3027 19.875 16.3027H15.8213ZM5.66309 18.4629H10.9951C12.1162 18.4629 12.6904 17.9092 12.6904 16.7812V14.8535C12.6904 13.7324 12.1162 13.1787 10.9951 13.1787H5.66309C4.53516 13.1787 3.96777 13.7324 3.96777 14.8535V16.7812C3.96777 17.9092 4.53516 18.4629 5.66309 18.4629ZM5.82715 17.1846C5.45117 17.1846 5.25293 16.9863 5.25293 16.5967V15.0449C5.25293 14.6553 5.45117 14.4639 5.82715 14.4639H10.8242C11.2002 14.4639 11.4053 14.6553 11.4053 15.0449V16.5967C11.4053 16.9863 11.2002 17.1846 10.8242 17.1846H5.82715Z\"></path></svg>\r\n                    </template>\r\n\r\n                    <template #item>Layout</template>\r\n\r\n                    <template #itemMeta>Table</template>\r\n                </base-collection-side-menu-item-col-3>\r\n            </div>\r\n\r\n            <div style=\"padding-top: 6px; box-shadow: rgba(55, 53, 47, 0.09) 0px -1px 0px;\">\r\n                <base-collection-side-menu-item-col-3\r\n                    @click.stop=\"setCurrentComponent('properties')\"\r\n                >\r\n                    <template #graphic>\r\n                        <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"properties\" style=\"width: 24px; height: 16px; display: block; fill: inherit; flex-shrink: 0; margin-right: -2px;\"><path d=\"M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z\"></path></svg>                    \r\n                    </template>\r\n                    \r\n                    <template #item>Properties</template>\r\n\r\n                    <template #itemMeta>{{ totalPropertiesVisible }} shown</template>\r\n                </base-collection-side-menu-item-col-3>\r\n            </div>\r\n\r\n            <div style=\"padding-bottom: 6px;\">\r\n                <base-collection-side-menu-item-col-3\r\n                    @click.stop=\"setCurrentComponent('subitems')\"\r\n                >\r\n                    <template #graphic>\r\n                        <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"nest\" style=\"width: 24px; height: 16px; display: block; fill: inherit; flex-shrink: 0; margin-right: -2px;\"><g><path d=\"M5.59375 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.59375C5.23145 3.22461 4.94434 3.51172 4.94434 3.87402C4.94434 4.23633 5.22461 4.52344 5.59375 4.52344ZM8 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H8C7.6377 7.42188 7.35059 7.70898 7.35059 8.07129C7.35059 8.43359 7.63086 8.7207 8 8.7207ZM10 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H10C9.6377 11.6191 9.35059 11.9062 9.35059 12.2686C9.35059 12.6309 9.63086 12.918 10 12.918Z\"></path><path d=\"M1.66386 4.7627L0.898238 3.46387C0.713668 3.14941 0.829878 2.80762 1.19218 2.80762H2.85332C3.22929 2.80762 3.33867 3.14258 3.14726 3.46387L2.36113 4.7627C2.21074 5.01562 1.82109 5.02246 1.66386 4.7627Z\"></path><path d=\"M3.85358 8.94885L3.08795 7.65002C2.90338 7.33557 3.01275 6.99377 3.3819 6.99377H5.03619C5.41217 6.99377 5.52838 7.32874 5.33014 7.65002L4.55084 8.94885C4.40045 9.20178 4.0108 9.20862 3.85358 8.94885Z\"></path><path d=\"M6.90723 12.6377L5.6084 13.4033C5.29395 13.5878 4.95215 13.4716 4.95215 13.1093V11.4482C4.95215 11.0722 5.28711 10.9628 5.6084 11.1543L6.90723 11.9404C7.16016 12.0908 7.16699 12.4804 6.90723 12.6377Z\"></path></g></svg>\r\n                    </template>\r\n                    \r\n                    <template #item>Sub-items</template>\r\n\r\n                    <template #itemMeta>{{ subItemsStatus ? \"on\" : \"off\" }}</template>\r\n                </base-collection-side-menu-item-col-3>\r\n            </div>\r\n        </template>\r\n    </base-collection-side-menu>\r\n</template>\r\n\r\n<script setup>\r\nimport { onBeforeMount, defineProps } from 'vue';\r\nimport BaseButton from './BaseButton.vue';\r\nimport BaseCollectionSideMenu from './BaseCollectionSideMenu.vue';\r\nimport BaseCollectionSideMenuItemCol3 from './BaseCollectionSideMenuItemCol3.vue';\r\nimport { useCollectionsStore } from '@/stores/collections';\r\nimport { useRecordValuesStore } from '@/stores/recordValues';\r\nimport { CollectionView } from '@/entities/CollectionView';\r\n\r\nconst props = defineProps({\r\n    collectionViewId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    collectionId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst collectionStore = useCollectionsStore();\r\n\r\nfunction setCurrentComponent(componentName) {\r\n    collectionStore.setCurrentComponent(componentName);\r\n}\r\n\r\nlet totalPropertiesVisible = -1;\r\nlet subItemsStatus = false;\r\n\r\nonBeforeMount(() => {\r\n    const recordsValueStore = useRecordValuesStore();\r\n\r\n    const collectionViewRecordValueInStore = recordsValueStore.getRecordValue({\r\n        id: props.collectionViewId,\r\n        table: \"collection_view\",\r\n        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n    });\r\n\r\n    const collectionRecordValueInStore = recordsValueStore.getRecordValue({\r\n        id: props.collectionId,\r\n        table: \"collection\",\r\n        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n    });\r\n\r\n    totalPropertiesVisible = CollectionView.prototype.getProperties.call(\r\n        collectionViewRecordValueInStore\r\n    )?.length;\r\n\r\n    if (isNaN(totalPropertiesVisible)) totalPropertiesVisible = 0;\r\n\r\n    subItemsStatus = collectionRecordValueInStore?.format?.subitem_property;\r\n\r\n})\r\n</script>","import script from \"./CollectionSideMenuOptions.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionSideMenuOptions.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <base-button \r\n        style=\"margin-right: 4px; margin-left: 4px; width: calc(100% - 8px);\"\r\n        :hover-style=\"props.hoverStyle\"\r\n        :default-style=\"props.defaultStyle\"\r\n    >\r\n        <div style=\"display: flex; align-items: center; min-height: 28px; font-size: 14px; line-height: 120%; user-select: none; width: 100%;\">\r\n            <div style=\"margin-left: 10px; margin-right: 4px; display: flex; justify-content: center; align-items: center;\">\r\n                <slot name=\"graphic\"></slot>\r\n            </div>\r\n\r\n            <div style=\"margin-left: 6px; margin-right: 6px; flex: 1 1 auto; min-width: 0;\">\r\n                <div style=\"white-space: nowrap; text-overflow: ellipsis; overflow: hidden;\">\r\n                    <slot name=\"item\"></slot>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </base-button>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps } from \"vue\";\r\nimport BaseButton from \"./BaseButton.vue\";\r\n\r\nconst props = defineProps({\r\n    hoverStyle: {\r\n        type: Object,\r\n        default: () => {}\r\n    },\r\n    defaultStyle: {\r\n        type: Object,\r\n        default: () => {}\r\n    }\r\n})\r\n</script>","import script from \"./BaseCollectionSideMenuItemCol2.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BaseCollectionSideMenuItemCol2.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <base-collection-side-menu-item-col-2\r\n        v-for=\"propertyType in propertyTypes\" :key=\"propertyType\"\r\n        @click.stop=\"handleUserSelectType(propertyType)\"\r\n    >\r\n        <template #graphic>\r\n            <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"typesText\" style=\"width: 16px; height: 16px; display: block; fill: rgba(55, 53, 47, 0.85); flex-shrink: 0;\"><path d=\"M1.56738 3.25879H14.4258C14.7676 3.25879 15.0479 2.97852 15.0479 2.63672C15.0479 2.29492 14.7744 2.02148 14.4258 2.02148H1.56738C1.21875 2.02148 0.952148 2.29492 0.952148 2.63672C0.952148 2.97852 1.22559 3.25879 1.56738 3.25879ZM1.56738 6.84082H14.4258C14.7676 6.84082 15.0479 6.56055 15.0479 6.21875C15.0479 5.87695 14.7744 5.60352 14.4258 5.60352H1.56738C1.21875 5.60352 0.952148 5.87695 0.952148 6.21875C0.952148 6.56055 1.22559 6.84082 1.56738 6.84082ZM1.56738 10.4229H14.4258C14.7676 10.4229 15.0479 10.1426 15.0479 9.80078C15.0479 9.45898 14.7744 9.18555 14.4258 9.18555H1.56738C1.21875 9.18555 0.952148 9.45898 0.952148 9.80078C0.952148 10.1426 1.22559 10.4229 1.56738 10.4229ZM1.56738 14.0049H8.75879C9.10059 14.0049 9.38086 13.7246 9.38086 13.3828C9.38086 13.041 9.10742 12.7676 8.75879 12.7676H1.56738C1.21875 12.7676 0.952148 13.041 0.952148 13.3828C0.952148 13.7246 1.22559 14.0049 1.56738 14.0049Z\"></path></svg>\r\n        </template>\r\n\r\n        <template #item>\r\n            {{ propertyType.label }}\r\n        </template>\r\n    </base-collection-side-menu-item-col-2>\r\n</template>\r\n\r\n<script setup>\r\nimport { useCollectionsStore } from '@/stores/collections';\r\nimport BaseCollectionSideMenuItemCol2 from './BaseCollectionSideMenuItemCol2.vue';\r\nimport { computed, defineProps, defineEmits } from 'vue';\r\n\r\nconst collectionsStore = useCollectionsStore();\r\n\r\nconst emits = defineEmits([\r\n    'property-type-select'\r\n]);\r\n\r\nconst props = defineProps({\r\n    filterTypesOnUserInput: {\r\n        type: Boolean,\r\n        default: false\r\n    },\r\n    filterString: {\r\n        type: String,\r\n        default: ''\r\n    }\r\n})\r\n\r\nconst propertyTypes = computed(function() {\r\n    return (\r\n        props.filterTypesOnUserInput === true ?\r\n        handleUserInputPropertyName.value :\r\n        propertyTypesInStore.value\r\n    )\r\n})\r\n\r\nconst propertyTypesInStore = computed(function () {\r\n    return collectionsStore.types;\r\n})\r\n\r\nconst handleUserInputPropertyName = computed(function() {\r\n    const filteredTypes = propertyTypesInStore.value.filter((type) => type.label.toLowerCase().includes(props.filterString.toLowerCase()))\r\n\r\n    return (filteredTypes?.length === 0 ? [{ type: \"text\", label: \"Text\" }] : filteredTypes)\r\n})\r\n\r\nfunction handleUserSelectType(property) {\r\n    emits('property-type-select', {\r\n        label: property.label,\r\n        type: property.type,\r\n        userInput: props.filterString\r\n    })\r\n}\r\n</script>","import script from \"./BaseCollectionPropertyTypes.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BaseCollectionPropertyTypes.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div style=\"display: flex; padding-left: 14px; padding-right: 14px; margin-top: 6px; margin-bottom: 8px; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.45); font-size: 12px; font-weight: 500; line-height: 120%; user-select: none;\">\r\n        <div style=\"align-self: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n            <slot></slot>\r\n        </div>\r\n\r\n        <div style=\"margin-left: auto;\"></div>\r\n    </div>\r\n</template>","import { render } from \"./CollectionSideMenuCategory.vue?vue&type=template&id=46263725\"\nconst script = {}\n\nimport exportComponent from \"D:\\\\test\\\\x\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","let corpus: string = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghidjklmnopqrstuvwxyz\";\r\n\r\nfunction shuffleCorpus(): void {\r\n    corpus = corpus.split(\"\").sort(() => 0.5 - Math.random()).join(\"\");\r\n}\r\n\r\nexport const getUid = function (len: number, banned?: string[]): string {\r\n    let uid: string = \"\";\r\n\r\n    let stopLoop: boolean = false;\r\n\r\n    while(stopLoop === false && banned?.length) {\r\n        shuffleCorpus();\r\n        \r\n        const startIndex = Math.min(\r\n            corpus.length - len, \r\n            Math.floor(( corpus.length * Math.random()) )\r\n        ) - 1;\r\n\r\n        uid = corpus.slice(startIndex, startIndex + len);\r\n\r\n        if (banned?.length && !banned.includes(uid)) stopLoop = true;\r\n    }\r\n\r\n    return uid;\r\n}\r\n\r\n","import { getUid } from \"@/helpers/globals/uidByLength\";\r\n\r\nexport function CollectionProperty({bannedIds, ...props}) {\r\n    const id = getUid(4, bannedIds);\r\n\r\n    if (!props.name) props.name = props?.type;\r\n    \r\n    this[id] = {\r\n        ...props,\r\n        name: props?.name,\r\n        type: props?.type\r\n    }\r\n    \r\n    switch (props.type) {\r\n        case \"select\": \r\n        case \"multi_select\":  {\r\n            if(!this[id]?.options) this[id].options = [];\r\n        }\r\n    }\r\n}","<template>\r\n    <base-collection-side-menu\r\n        :top-part=\"false\"\r\n    >\r\n        <template #header>\r\n            New Property On Paid Task\r\n        </template>\r\n\r\n        <template #mid-part>\r\n            <div style=\"padding-top: 12px; padding-bottom: 4px;\">\r\n                <div style=\"display: flex; align-items: center; min-height: 28px; font-size: 14px; line-height: 120%; user-select: none; max-width: 100%;\">\r\n                    <div style=\"min-width: 0px; margin-right: 12px; margin-left: 12px; flex: 1 1 auto;\">\r\n                        <div style=\"display: flex;\">\r\n                            <div class=\"xdoc-focusable-within\" style=\"display: flex; align-items: center; width: 100%; font-size: 14px; line-height: 20px; padding: 3px 6px; position: relative; border-radius: 4px; box-shadow: rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset; background: rgba(242, 241, 238, 0.6); cursor: text; height: 28px;\">\r\n                                <input\r\n                                    v-model=\"state.filterString\"\r\n                                    placeholder=\"Search or add new property\"\r\n                                    type=\"text\"\r\n                                    style=\"font-size: inherit; line-height: inherit; border: none; background: none; width: 100%; display: block; resize: none; padding: 0px;\"\r\n                                >\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div\r\n                tabindex=\"0\"\r\n                role=\"menu\"\r\n                aria-activedescendant=\":ra:\"\r\n            >\r\n                <div style=\"padding-top: 6px; padding-bottom: 6px;\">\r\n                    <collection-side-menu-category>Suggested</collection-side-menu-category>\r\n                </div>\r\n\r\n                <div style=\"padding-top: 6px; padding-bottom: 6px;\">\r\n                    <collection-side-menu-category>Type</collection-side-menu-category>\r\n\r\n                    <base-collection-property-types\r\n                        :filterString=\"state.filterString\"\r\n                        :filterTypesOnUserInput=true\r\n                        @property-type-select=\"handlePropertyTypeSelect\"\r\n                    ></base-collection-property-types>\r\n                </div>\r\n            </div>\r\n\r\n        </template>\r\n    </base-collection-side-menu>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, defineProps } from 'vue';\r\nimport { useCollectionsStore } from '@/stores/collections';\r\nimport { useRecordValuesStore } from '@/stores/recordValues';\r\nimport BaseCollectionPropertyTypes from './BaseCollectionPropertyTypes.vue';\r\nimport BaseCollectionSideMenu from './BaseCollectionSideMenu.vue';\r\nimport CollectionSideMenuCategory from './CollectionSideMenuCategory.vue';\r\nimport { CollectionProperty } from \"@/entities/CollectionProperty\";\r\nimport { Collection } from '@/entities/Collection';\r\nimport { CollectionView } from '@/entities/CollectionView';\r\nimport { makeOperation } from '@/services/transactions/factories/makeOperation';\r\nimport { makeTransaction } from '@/services/transactions/factories/makeTransaction';\r\nimport { useTransactionsQueue } from '@/stores/transactionsQueue';\r\n\r\nconst props = defineProps({\r\n    collectionId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    collectionViewId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst state = reactive({\r\n    filterString: ''\r\n})\r\n\r\nfunction handlePropertyTypeSelect({type, userInput}) {\r\n    const transactionsStore = useTransactionsQueue();\r\n\r\n    const collectionStore = useCollectionsStore();\r\n\r\n    if (type === 'relation') {\r\n        collectionStore.setCurrentComponent('propertyCreateRelationChooseCollection');\r\n        return;\r\n    }\r\n\r\n    const collectionViewPropertiesRecordValueInStore = CollectionView.prototype.getProperties.call(\r\n        useRecordValuesStore().getRecordValue({\r\n            id: props.collectionViewId,\r\n            table: \"collection_view\",\r\n            spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n        })\r\n    );\r\n\r\n    const collectionRecordValueInStore = useRecordValuesStore().getRecordValue({\r\n        id: props.collectionId,\r\n        table: \"collection\",\r\n        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n    });\r\n\r\n    const [propertyId, {name: propertyName}] = Object.entries(\r\n        new CollectionProperty({\r\n            bannedIds: Object.keys(collectionRecordValueInStore.schema),\r\n            name: userInput,\r\n            type\r\n        })\r\n    )[0];\r\n\r\n    const propertyNamePostfixed = Collection.prototype.getPropertyNamePostfixed.call(collectionRecordValueInStore, ...[\r\n        propertyId,\r\n        propertyName,\r\n        type\r\n    ]);\r\n\r\n    const propertyValue = Object.values(\r\n        new CollectionProperty({\r\n            bannedIds: Object.keys(collectionRecordValueInStore.schema),\r\n            name: propertyNamePostfixed,\r\n            type \r\n        })\r\n    )[0];\r\n\r\n    const updatedCollectionViewProperties = [...collectionViewPropertiesRecordValueInStore]\r\n    updatedCollectionViewProperties.push({\r\n        property: propertyId,\r\n        visible: false\r\n    });\r\n    \r\n    const operations = [\r\n        makeOperation(\r\n            \"update\",\r\n            {\r\n                table_properties: updatedCollectionViewProperties,\r\n            },\r\n            [\"format\"],\r\n            {\r\n                id: props.collectionViewId,\r\n                table: \"collection_view\",\r\n                spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n            }\r\n        ),\r\n        \r\n        makeOperation(\r\n            \"update\",\r\n            {\r\n                [propertyId]: propertyValue\r\n            },\r\n            [\"schema\"],\r\n            {\r\n                id: props.collectionId,\r\n                table: \"collection\",\r\n                spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n            }\r\n        )\r\n    ];\r\n\r\n    transactionsStore.enqueue(\r\n        makeTransaction({\r\n            spaceId: props.spaceId,\r\n            debug: {\r\n                userAction: \"CollectionSideMenuPropertyCreate.handlePropertyTypeSelect\"\r\n            },\r\n            operations\r\n        })\r\n    );\r\n\r\n    collectionStore.setCurrentComponent('propertyEdit',{\r\n        id: propertyId\r\n    });\r\n}\r\n</script>","import script from \"./CollectionSideMenuPropertyCreate.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionSideMenuPropertyCreate.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div style=\"display: flex; flex-direction: column; min-width: 290px; max-width: 290px; height: 100%; max-height: calc(100% - 16px);\">\r\n        <div style=\"flex-shrink: 0;\">\r\n            <base-collection-side-menu-header>Related to</base-collection-side-menu-header>\r\n        </div>\r\n\r\n        <div class=\"xdoc-scroller vertical\"\r\n            style=\"z-index: 1; flex-grow: 0; min-height: 0px; transform: translateZ(0px); overflow: hidden auto; margin-right: 0px; margin-bottom: 0px;\"\r\n        >\r\n            <div role=\"menu\" tabindex=\"0\">\r\n                <div style=\"padding-top: 6px; padding-bottom: 6px;\">\r\n                    <div role=\"menuitem\"\r\n                        @click.stop=\"handleCollectionSelection\"\r\n                        style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: calc(100% - 8px); margin-left: 4px; margin-right: 4px; border-radius: 4px;\"\r\n                        tabindex=\"-1\"\r\n                        class=\"notranslate\"\r\n                        \r\n                    >\r\n                        <div style=\"display: flex; align-items: center; line-height: 120%; width: 100%; user-select: none; min-height: 45px; font-size: 14px; padding-top: 4px; padding-bottom: 4px;\">\r\n                            <div style=\"display: flex; align-items: center; justify-content: center; margin-left: 10px; margin-right: 4px; margin-top: 1px; align-self: flex-start;\">\r\n                                <div class=\"xdoc-record-icon notranslate\" style=\"display: flex; align-items: center; justify-content: center; height: 20px; width: 20px; border-radius: 0.25em; flex-shrink: 0;\">\r\n                                    <span role=\"img\">\r\n                                        <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"page\" style=\"width: 18px; height: 18px; display: block; fill: rgb(145, 145, 142); flex-shrink: 0;\">\r\n                                            <path d=\"M4.35645 15.4678H11.6367C13.0996 15.4678 13.8584 14.6953 13.8584 13.2256V7.02539C13.8584 6.0752 13.7354 5.6377 13.1406 5.03613L9.55176 1.38574C8.97754 0.804688 8.50586 0.667969 7.65137 0.667969H4.35645C2.89355 0.667969 2.13477 1.44043 2.13477 2.91016V13.2256C2.13477 14.7021 2.89355 15.4678 4.35645 15.4678ZM4.46582 14.1279C3.80273 14.1279 3.47461 13.7793 3.47461 13.1436V2.99219C3.47461 2.36328 3.80273 2.00781 4.46582 2.00781H7.37793V5.75391C7.37793 6.73145 7.86328 7.20312 8.83398 7.20312H12.5186V13.1436C12.5186 13.7793 12.1836 14.1279 11.5205 14.1279H4.46582ZM8.95703 6.02734C8.67676 6.02734 8.56055 5.9043 8.56055 5.62402V2.19238L12.334 6.02734H8.95703ZM10.4336 9.00098H5.42969C5.16992 9.00098 4.98535 9.19238 4.98535 9.43164C4.98535 9.67773 5.16992 9.86914 5.42969 9.86914H10.4336C10.6797 9.86914 10.8643 9.67773 10.8643 9.43164C10.8643 9.19238 10.6797 9.00098 10.4336 9.00098ZM10.4336 11.2979H5.42969C5.16992 11.2979 4.98535 11.4893 4.98535 11.7354C4.98535 11.9746 5.16992 12.1592 5.42969 12.1592H10.4336C10.6797 12.1592 10.8643 11.9746 10.8643 11.7354C10.8643 11.4893 10.6797 11.2979 10.4336 11.2979Z\"></path>\r\n                                        </svg>\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div style=\"margin-left: 6px; margin-right: 6px; min-width: 0px; flex: 1 1 auto;\">\r\n                                <div style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n                                    <div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n                                        Clients\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                                <div style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: rgb(120, 119, 116); margin-top: 2px; font-size: 12px;\">\r\n                                    <div style=\"display: flex; font-size: 12px; color: rgba(55, 53, 47, 0.5); overflow: hidden;\">\r\n                                        <div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 12px; color: rgba(55, 53, 47, 0.5);\">\r\n                                            database of clients\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div role=\"menuitem\"\r\n                        tabindex=\"-1\"\r\n                        class=\"notranslate\"\r\n                        style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: calc(100% - 8px); margin-left: 4px; margin-right: 4px; border-radius: 4px;\"\r\n                    >\r\n                        <div style=\"display: flex; align-items: center; line-height: 120%; width: 100%; user-select: none; min-height: 45px; font-size: 14px; padding-top: 4px; padding-bottom: 4px;\">\r\n                            <div style=\"display: flex; align-items: center; justify-content: center; margin-left: 10px; margin-right: 4px; margin-top: 1px; align-self: flex-start;\">\r\n                                <div class=\"xdoc-record-icon notranslate\" style=\"display: flex; align-items: center; justify-content: center; height: 20px; width: 20px; border-radius: 0.25em; flex-shrink: 0;\">\r\n                                    <span role=\"img\">\r\n                                        <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"page\" style=\"width: 18px; height: 18px; display: block; fill: rgb(145, 145, 142); flex-shrink: 0;\">\r\n                                            <path d=\"M4.35645 15.4678H11.6367C13.0996 15.4678 13.8584 14.6953 13.8584 13.2256V7.02539C13.8584 6.0752 13.7354 5.6377 13.1406 5.03613L9.55176 1.38574C8.97754 0.804688 8.50586 0.667969 7.65137 0.667969H4.35645C2.89355 0.667969 2.13477 1.44043 2.13477 2.91016V13.2256C2.13477 14.7021 2.89355 15.4678 4.35645 15.4678ZM4.46582 14.1279C3.80273 14.1279 3.47461 13.7793 3.47461 13.1436V2.99219C3.47461 2.36328 3.80273 2.00781 4.46582 2.00781H7.37793V5.75391C7.37793 6.73145 7.86328 7.20312 8.83398 7.20312H12.5186V13.1436C12.5186 13.7793 12.1836 14.1279 11.5205 14.1279H4.46582ZM8.95703 6.02734C8.67676 6.02734 8.56055 5.9043 8.56055 5.62402V2.19238L12.334 6.02734H8.95703ZM10.4336 9.00098H5.42969C5.16992 9.00098 4.98535 9.19238 4.98535 9.43164C4.98535 9.67773 5.16992 9.86914 5.42969 9.86914H10.4336C10.6797 9.86914 10.8643 9.67773 10.8643 9.43164C10.8643 9.19238 10.6797 9.00098 10.4336 9.00098ZM10.4336 11.2979H5.42969C5.16992 11.2979 4.98535 11.4893 4.98535 11.7354C4.98535 11.9746 5.16992 12.1592 5.42969 12.1592H10.4336C10.6797 12.1592 10.8643 11.9746 10.8643 11.7354C10.8643 11.4893 10.6797 11.2979 10.4336 11.2979Z\"></path>\r\n                                        </svg>\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div style=\"margin-left: 6px; margin-right: 6px; min-width: 0px; flex: 1 1 auto;\">\r\n                                <div style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n                                    <div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n                                        Employees\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                                <div style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: rgb(120, 119, 116); margin-top: 2px; font-size: 12px;\">\r\n                                    <div style=\"display: flex; font-size: 12px; color: rgba(55, 53, 47, 0.5); overflow: hidden;\">\r\n                                        <div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 12px; color: rgba(55, 53, 47, 0.5);\">\r\n                                            database of employees\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps } from 'vue';\r\nimport { useCollectionsStore } from '@/stores/collections';\r\nimport BaseCollectionSideMenuHeader from './BaseCollectionSideMenuHeader.vue';\r\nimport { useRecordValuesStore } from '@/stores/recordValues';\r\nimport uuid from '@/helpers/globals/uuid';\r\nimport { transformToStandardUUIDFormat } from '../helpers/router/transformToStandardUUIDFormat';\r\nimport { CollectionView } from '@/entities/CollectionView';\r\nimport { useTransactionsQueue } from '@/stores/transactionsQueue';\r\nimport { makeTransaction } from '@/services/transactions/factories/makeTransaction';\r\nimport { makeOperation } from '@/services/transactions/factories/makeOperation';\r\n\r\nconst props = defineProps({\r\n    collectionId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    collectionViewId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nfunction handleCollectionSelection() {\r\n    const collectionViewPropertiesInRecordValueStore = CollectionView.prototype.getProperties.call(\r\n        useRecordValuesStore().getRecordValue({\r\n            id: props.collectionViewId,\r\n            table: \"collection_view\",\r\n            spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n        })\r\n    )\r\n\r\n    const updatedCollectionViewProperties = [];\r\n\r\n    for (const property of collectionViewPropertiesInRecordValueStore) {\r\n        if (property.id !== props.propertyId) {\r\n            updatedCollectionViewProperties.push(property);\r\n        }\r\n    }\r\n\r\n    const propertyId = transformToStandardUUIDFormat(uuid());\r\n\r\n    useTransactionsQueue().enqueue(\r\n        makeTransaction({\r\n            spaceId: \"\",\r\n            debug: {\r\n                userAction: \"CollectionSideMenuPropertyCreateRelation->handleCollectionSelection\"\r\n            },\r\n            operations: [\r\n                makeOperation(\r\n                    \"update\",\r\n                    {\r\n                        table_properties: updatedCollectionViewProperties,\r\n                    },\r\n                    [\"format\"],\r\n                    {\r\n                        id: props.collectionViewId,\r\n                        table: \"collection_view\",\r\n                        spaceId: props.spaceId\r\n                    }\r\n                ),\r\n                makeOperation(\r\n                    \"update\",\r\n                    {    \r\n                        [propertyId]: {\r\n                            type: \"relation\",\r\n                            name: \"relation\"\r\n                        }\r\n                    },\r\n                    [\"schema\"],\r\n                    {\r\n                        id: props.collectionId,\r\n                        table: \"collection\",\r\n                        spaceId: props.spaceId\r\n                    }\r\n                )\r\n            ]\r\n        })\r\n    );\r\n\r\n    const collectionStore = useCollectionsStore();\r\n    \r\n    collectionStore.setCurrentComponent(\"propertyEdit\", {\r\n        id: propertyId\r\n    });\r\n}\r\n</script>","import script from \"./CollectionSideMenuPropertyCreateRelation.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionSideMenuPropertyCreateRelation.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","export const tagColorStringToRgbaRandom = function(): string {\r\n    const colors = [\"light gray\", \"gray\", \"brown\", \"orange\", \"yellow\", \"green\", \"blue\", \"purple\", \"pink\", \"red\"]\r\n\r\n    return colors[Math.floor(Math.random()*colors.length)];\r\n}","<template>\r\n    <div style=\"box-shadow: rgba(55, 53, 47, 0.09) 0px -1px 0px; padding-top: 6px; padding-bottom: 0px; margin-top: 6px;\">\r\n        <div style=\"display: flex; font-weight: 500; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.45); font-size: 12px; line-height: 120%; margin-top: 6px; margin-bottom: 8px; padding-right: 14px; padding-left: 14px; user-select: none;\">\r\n            <div style=\"align-self: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n                Options\r\n            </div>\r\n\r\n            <div style=\"margin-left: auto;\">\r\n                <base-button \r\n                    @click.stop=\"state.createNewOption = !state.createNewOption\"\r\n                    style=\"height: 20px; width: 20px;\"\r\n                >\r\n                    <svg\r\n                        :style=\"state.createNewOption ? 'transform: rotate(45deg);' : ''\"\r\n                        role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"plus\" style=\"transition: transform .1s ease-in-out; width: 14px; height: 14px; display: block; fill: rgba(55, 53, 47, 0.45); flex-shrink: 0;\"><path d=\"M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z\"></path></svg>\r\n                </base-button>\r\n            </div>\r\n        </div>\r\n\r\n        <div\r\n            v-if=\"state.createNewOption === true\"\r\n            style=\"margin-top: 2px; margin-bottom: 8px; padding-top: 14px; padding-bottom: 14px; padding-right: 14px; padding-left: 14px; height: 20px; display: flex; align-items: center; border-radius: 6px; width: 100%; font-size: 14px;\"\r\n        >\r\n            <div style=\"display: flex; width: 100%;\">\r\n                <div class=\"xdoc-focusable-within\" style=\"display: flex; align-items: center; width: 100%; font-size: 14px; line-height: 20px; padding: 3px 6px; position: relative; border-radius: 4px; box-shadow: rgba(15, 15, 15, 0.1) 0 0 0 1px inset;cursor: text; height: 28px; background: rgba(242, 241, 238, 0.6);\">\r\n                    <input \r\n                        type=\"text\" \r\n                        placeholder=\"Type a new option\" \r\n                        style=\"font-size: inherit; line-height: inherit; border: none; background: none; width: 100%; display: block; resize: none; padding: 0px;\"\r\n                        @keydown.stop=\"handleCreateNewOption\"\r\n                        @input.stop=\"\"\r\n                    >\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div style=\"margin: 0;\">\r\n        <div \r\n            @click.stop=\"handleOptionEdit($event, option.id)\"\r\n            v-for=\"option in props.options\"\r\n            :key=\"option.id\"\r\n            style=\"display: flex; flex-direction: column;\"\r\n        >\r\n            <base-button style=\"margin-left: 4px; margin-right: 4px;\">\r\n                <div style=\"display: flex; align-items: center; min-height: 28px; font-size: 14px; width: 100%; line-height: 120%;\">\r\n                    <div style=\"margin-right: 6px; margin-left: 12px; min-width: 0px; flex: 1 1 auto;\">\r\n                        <div style=\"display: flex; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n                            <page-property-tag-value\r\n                                :tag=\"option\"\r\n                                style=\"padding-left: 6px; padding-right: 6px; border-radius: 4px;\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </base-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport uuid from '@/helpers/globals/uuid';\r\nimport BaseButton from './BaseButton.vue';\r\nimport PagePropertyTagValue from \"./PagePropertyTagValue.vue\";\r\nimport { defineProps, reactive } from 'vue';\r\nimport { transformToStandardUUIDFormat } from '../helpers/router/transformToStandardUUIDFormat';\r\nimport { tagColorStringToRgbaRandom } from '@/helpers/globals/tagColorStringToRgbaRandom';\r\nimport { useGeneralStore } from '@/stores/general';\r\nimport { makeTransaction } from '@/services/transactions/factories/makeTransaction';\r\nimport { useTransactionsQueue } from '@/stores/transactionsQueue';\r\nimport { makeOperation } from '@/services/transactions/factories/makeOperation';\r\n\r\nconst props = defineProps({\r\n    spaceId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    collectionId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    propertyId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    options: {\r\n        type: Array,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst state = reactive({\r\n    createNewOption: false\r\n})\r\n\r\nfunction handleOptionEdit(e, optionId) {\r\n    const generalStore = useGeneralStore();\r\n\r\n    const measures = e.target.getBoundingClientRect();\r\n\r\n    generalStore.dialog.top = measures.top;\r\n    generalStore.dialog.left = measures.left;\r\n\r\n    generalStore.setCurrentComponentInDefaultOverlay('page_property_option_edit', {\r\n        optionId,\r\n        propertyId: props.propertyId,\r\n        collectionId: props.collectionId,\r\n        spaceId: props.spaceId\r\n    });\r\n}\r\n\r\nfunction handleCreateNewOption(e) {\r\n    const targetDiv = e.target;\r\n    \r\n    // keyCode 13 represets \"enter\"(keyboards) and \"go\"(phones) keys\r\n    if (e.keyCode === 13) {\r\n        if (targetDiv.value) {\r\n            useTransactionsQueue().enqueue(\r\n                makeTransaction({\r\n                    spaceId: \"\",\r\n                    debug: {\r\n                        userAction: \"CollectionSideMenuPropertyEditHandleOptions->handleCreateNewOption\"\r\n                    },\r\n                    operations: [\r\n                        makeOperation(\r\n                            \"keyedObjectListBefore\",\r\n                            {\r\n                                value: {\r\n                                    id: transformToStandardUUIDFormat(uuid()),\r\n                                    color: tagColorStringToRgbaRandom(),\r\n                                    value: targetDiv.value\r\n                                }\r\n                            },\r\n                            [\"schema\", props.propertyId, \"options\"],\r\n                            {\r\n                                id: props.collectionId,\r\n                                table: \"collection\",\r\n                                spaceId: props.spaceId\r\n                            }\r\n                        )\r\n                    ]\r\n                })\r\n            );\r\n\r\n            targetDiv.value = \"\";\r\n        }\r\n    }\r\n}\r\n</script>","import script from \"./CollectionSideMenuPropertyEditHandleOptions.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionSideMenuPropertyEditHandleOptions.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div>\r\n        collection side menu property edit relation\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n\r\n</script>","import { render } from \"./CollectionSideMenuPropertyEditRelation.vue?vue&type=template&id=50d75417\"\nconst script = {}\n\nimport exportComponent from \"D:\\\\test\\\\x\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <div style=\"box-shadow: rgba(55, 53, 47, 0.09) 0px -1px 0px; padding-top: 6px; padding-bottom: 0px; margin-top: 6px;\">\r\n        <template\r\n            v-for=\"group in property.groups\"\r\n            :key=\"group.id\"\r\n        >\r\n            <div\r\n                style=\"display: flex; font-weight: 500; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.45); font-size: 12px; line-height: 120%; margin-top: 6px; margin-bottom: 8px; padding-right: 14px; padding-left: 14px; user-select: none;\"\r\n            >\r\n                <div style=\"align-self: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">{{ group.name }}</div>\r\n\r\n                <div style=\"margin-left: auto;\">\r\n                    <base-button \r\n                        @click.stop=\"state.createNewOption = (state.createNewOption === group.name) ? '' : group.name\"\r\n                        style=\"height: 20px; width: 20px;\"\r\n                    >\r\n                    <svg\r\n                        :style=\"state.createNewOption === group.name ? 'transform: rotate(45deg);' : ''\"\r\n                        role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"plus\" style=\"transition: transform .1s ease-in-out; width: 14px; height: 14px; display: block; fill: rgba(55, 53, 47, 0.45); flex-shrink: 0;\"><path d=\"M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z\"></path></svg>\r\n                    </base-button>\r\n                </div>\r\n            </div>\r\n\r\n            <div\r\n                v-if=\"state.createNewOption === group.name\"\r\n                style=\"margin-top: 2px; margin-bottom: 8px; padding-top: 14px; padding-bottom: 14px; padding-right: 14px; padding-left: 14px; height: 20px; display: flex; align-items: center; border-radius: 6px; width: 100%; font-size: 14px;\"\r\n            >\r\n                <div style=\"display: flex; width: 100%;\">\r\n                    <div class=\"xdoc-focusable-within\" style=\"display: flex; align-items: center; width: 100%; font-size: 14px; line-height: 20px; padding: 3px 6px; position: relative; border-radius: 4px; box-shadow: rgba(15, 15, 15, 0.1) 0 0 0 1px inset;cursor: text; height: 28px; background: rgba(242, 241, 238, 0.6);\">\r\n                        <input \r\n                            type=\"text\" \r\n                            placeholder=\"Type a new option\" \r\n                            style=\"font-size: inherit; line-height: inherit; border: none; background: none; width: 100%; display: block; resize: none; padding: 0px;\"\r\n                            @keydown.stop=\"handleCreateNewOption\"\r\n                            @input.stop=\"\"\r\n                        >\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div style=\"margin: 0;\">\r\n                <!-- @click.stop=\"handleOptionEdit($event, option.id)\"\r\n                v-for=\"option in props.options\" -->\r\n                <!-- :key=\"option.id\" -->\r\n                <div \r\n                    v-for=\"optionId in group.optionIds\"\r\n                    :key=\"optionId\"\r\n                    style=\"display: flex; flex-direction: column;\"\r\n                >\r\n                    <base-button style=\"margin-left: 4px; margin-right: 4px;\">\r\n                        <div style=\"display: flex; align-items: center; min-height: 28px; font-size: 14px; width: 100%; line-height: 120%;\">\r\n                            <div style=\"margin-right: 6px; margin-left: 12px; min-width: 0px; flex: 1 1 auto;\">\r\n                                <div style=\"display: flex; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n                                    <page-property-status-value \r\n                                        :status=\"getOptionValueById(optionId)\"\r\n                                        :group-color=\"group.color\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </base-button>\r\n                </div>\r\n            </div>\r\n        </template>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps, reactive } from 'vue';\r\nimport BaseButton from './BaseButton.vue';\r\nimport PagePropertyStatusValue from './PagePropertyStatusValue.vue';\r\nimport { useRecordValuesStore } from \"@/stores/recordValues\";\r\n\r\nconst props = defineProps({\r\n    collectionId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    propertyId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    spaceId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst state = reactive({\r\n    createNewOption: \"\"\r\n});\r\n\r\nconst recordValuesStore = useRecordValuesStore();\r\n\r\nconst property = recordValuesStore.getRecordValue({\r\n    id: props.collectionId,\r\n    table: \"collection\",\r\n    spaceId: props.spaceId\r\n}).schema[props.propertyId];\r\n\r\nfunction getOptionValueById(optionId) {\r\n    return property.options.find(({id}) => id === optionId).value;\r\n}\r\n</script>","import script from \"./CollectionSideMenuPropertyEditHandleGroups.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionSideMenuPropertyEditHandleGroups.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <base-collection-side-menu-item-col-2\r\n        style=\"line-height: 120%;\"\r\n        :hover-style=\"{ color: 'rgb(235, 87, 87) !important', background: 'rgba(55, 53, 47, 0.08)'}\"\r\n        @click.stop=\"emits('propertyDelete')\"\r\n    >\r\n        <template #graphic>\r\n            <svg role=\"graphic-symbol\" viewBox=\"0 0 16 16\" style=\"width: 24px; height: 16px; display: block; fill: inherit; flex-shrink: 0; margin-right: -2px;\">\r\n                <path d=\"M4.8623 15.4287H11.1445C12.1904 15.4287 12.8672 14.793 12.915 13.7402L13.3799 3.88965H14.1318C14.4736 3.88965 14.7402 3.62988 14.7402 3.28809C14.7402 2.95312 14.4736 2.69336 14.1318 2.69336H11.0898V1.66797C11.0898 0.62207 10.4268 0 9.29199 0H6.69434C5.56641 0 4.89648 0.62207 4.89648 1.66797V2.69336H1.86133C1.5332 2.69336 1.25977 2.95312 1.25977 3.28809C1.25977 3.62988 1.5332 3.88965 1.86133 3.88965H2.62012L3.08496 13.7471C3.13281 14.7998 3.80273 15.4287 4.8623 15.4287ZM6.1543 1.72949C6.1543 1.37402 6.40039 1.14844 6.7832 1.14844H9.20312C9.58594 1.14844 9.83203 1.37402 9.83203 1.72949V2.69336H6.1543V1.72949ZM4.99219 14.2188C4.61621 14.2188 4.34277 13.9453 4.32227 13.542L3.86426 3.88965H12.1152L11.6709 13.542C11.6572 13.9453 11.3838 14.2188 10.9941 14.2188H4.99219ZM5.9834 13.1182C6.27051 13.1182 6.45508 12.9336 6.44824 12.667L6.24316 5.50293C6.23633 5.22949 6.04492 5.05176 5.77148 5.05176C5.48438 5.05176 5.2998 5.23633 5.30664 5.50293L5.51172 12.667C5.51855 12.9404 5.70996 13.1182 5.9834 13.1182ZM8 13.1182C8.28711 13.1182 8.47852 12.9336 8.47852 12.667V5.50293C8.47852 5.23633 8.28711 5.05176 8 5.05176C7.71289 5.05176 7.52148 5.23633 7.52148 5.50293V12.667C7.52148 12.9336 7.71289 13.1182 8 13.1182ZM10.0166 13.1182C10.29 13.1182 10.4746 12.9404 10.4814 12.667L10.6934 5.50293C10.7002 5.23633 10.5088 5.05176 10.2285 5.05176C9.95508 5.05176 9.76367 5.22949 9.75684 5.50293L9.54492 12.667C9.53809 12.9336 9.72949 13.1182 10.0166 13.1182Z\"></path>\r\n            </svg>\r\n        </template>\r\n\r\n        <template #item>\r\n            Delete property\r\n        </template>\r\n    </base-collection-side-menu-item-col-2>\r\n</template>\r\n\r\n<script setup>\r\nimport BaseCollectionSideMenuItemCol2 from './BaseCollectionSideMenuItemCol2.vue';\r\nimport { defineEmits } from 'vue';\r\n\r\nconst emits = defineEmits([\r\n    \"propertyDelete\"\r\n])\r\n</script>","import script from \"./CollectionSideMenuPropertyEditFooter.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionSideMenuPropertyEditFooter.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <base-collection-side-menu\r\n        :top-part=\"false\"\r\n    >\r\n        <template #header>Edit property</template>\r\n\r\n        <template #top-part>\r\n\r\n        </template>\r\n\r\n        <template #mid-part>      \r\n            <div style=\"padding-top: 6px; padding-bottom: 6px;\">\r\n                <div style=\"display: flex; align-items: center; line-height: 120%; width: 100%; user-select: none; min-height: 28px; font-size: 14px;\">\r\n                    <div style=\"margin-left: 12px; margin-right: auto; min-width: 0; flex-shrink: 0;\">\r\n                        <base-button style=\"padding-left: 6px; padding-right: 0; height: 28px; width: 28px; border: 1px solid rgba(55, 53, 47, 0.16);\">\r\n                            <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"typesText\" style=\"width: 14px; height: 14px; display: block; fill: rgb(85, 83, 78); flex-shrink: 0; margin-right: 6px;\"><path d=\"M1.56738 3.25879H14.4258C14.7676 3.25879 15.0479 2.97852 15.0479 2.63672C15.0479 2.29492 14.7744 2.02148 14.4258 2.02148H1.56738C1.21875 2.02148 0.952148 2.29492 0.952148 2.63672C0.952148 2.97852 1.22559 3.25879 1.56738 3.25879ZM1.56738 6.84082H14.4258C14.7676 6.84082 15.0479 6.56055 15.0479 6.21875C15.0479 5.87695 14.7744 5.60352 14.4258 5.60352H1.56738C1.21875 5.60352 0.952148 5.87695 0.952148 6.21875C0.952148 6.56055 1.22559 6.84082 1.56738 6.84082ZM1.56738 10.4229H14.4258C14.7676 10.4229 15.0479 10.1426 15.0479 9.80078C15.0479 9.45898 14.7744 9.18555 14.4258 9.18555H1.56738C1.21875 9.18555 0.952148 9.45898 0.952148 9.80078C0.952148 10.1426 1.22559 10.4229 1.56738 10.4229ZM1.56738 14.0049H8.75879C9.10059 14.0049 9.38086 13.7246 9.38086 13.3828C9.38086 13.041 9.10742 12.7676 8.75879 12.7676H1.56738C1.21875 12.7676 0.952148 13.041 0.952148 13.3828C0.952148 13.7246 1.22559 14.0049 1.56738 14.0049Z\"></path></svg>\r\n                        </base-button>\r\n                    </div>\r\n\r\n                    <div style=\"margin-right: 12px; margin-left: 6px; min-width: 0; flex: 1 1 auto;\">\r\n                        <div style=\"display: flex;\">\r\n                            <div class=\"xdoc-focusable-within\" style=\"display: flex; align-items: center; width: 100%; font-size: 14px; line-height: 20px; padding: 3px 6px; position: relative; border-radius: 4px; box-shadow: rgba(15, 15, 15, 0.1) 0 0 0 1px inset; background: rgba(242, 241, 238, 0.6); cursor: text; height: 28px;\">\r\n                                <input \r\n                                    @blur.stop=\"handlePropertyNameChange\"\r\n                                    :value=\"property.name\"\r\n                                    type=\"text\" \r\n                                    placeholder=\"Property name\" \r\n                                    style=\"font-size: inherit; line-height: inherit; border: none; background: none; width: 100%; display: block; resize: none; padding: 0px;\"\r\n                                >\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div style=\"padding-top: 6px; padding-bottom: 6px;\">              \r\n                <base-collection-side-menu-item-col-3\r\n                    :graphic=\"false\"\r\n                    @click.stop=\"displayTypesList\"\r\n                    :style=\"property.type === 'title' ? { opacity: 0.4, cursor: 'default', background: 'none !important' } : {}\"\r\n                >\r\n                    <template #item>\r\n                        Type\r\n                    </template>\r\n\r\n                    <template #itemMeta>\r\n                        <svg v-if=\"property.type === 'title'\" role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"lockedFilled\" style=\"width: 14px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.85); flex-shrink: 0;\"><path d=\"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z\"></path></svg>\r\n                        <svg v-else role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"typesText\" style=\"width: 14px; height: 14px; display: block; fill: inherit; flex-shrink: 0; margin-right: 6px;\"><path d=\"M1.56738 3.25879H14.4258C14.7676 3.25879 15.0479 2.97852 15.0479 2.63672C15.0479 2.29492 14.7744 2.02148 14.4258 2.02148H1.56738C1.21875 2.02148 0.952148 2.29492 0.952148 2.63672C0.952148 2.97852 1.22559 3.25879 1.56738 3.25879ZM1.56738 6.84082H14.4258C14.7676 6.84082 15.0479 6.56055 15.0479 6.21875C15.0479 5.87695 14.7744 5.60352 14.4258 5.60352H1.56738C1.21875 5.60352 0.952148 5.87695 0.952148 6.21875C0.952148 6.56055 1.22559 6.84082 1.56738 6.84082ZM1.56738 10.4229H14.4258C14.7676 10.4229 15.0479 10.1426 15.0479 9.80078C15.0479 9.45898 14.7744 9.18555 14.4258 9.18555H1.56738C1.21875 9.18555 0.952148 9.45898 0.952148 9.80078C0.952148 10.1426 1.22559 10.4229 1.56738 10.4229ZM1.56738 14.0049H8.75879C9.10059 14.0049 9.38086 13.7246 9.38086 13.3828C9.38086 13.041 9.10742 12.7676 8.75879 12.7676H1.56738C1.21875 12.7676 0.952148 13.041 0.952148 13.3828C0.952148 13.7246 1.22559 14.0049 1.56738 14.0049Z\"></path></svg>\r\n                        {{ getPropertyLabelFromType(property.type)}}\r\n                    </template>\r\n                </base-collection-side-menu-item-col-3>\r\n\r\n                <collection-side-menu-property-edit-handle-options\r\n                    v-if=\"property.type === 'multi_select' || property.type === 'select'\"\r\n                    :property-id=\"props.propertyId\"\r\n                    :options=\"property.options\"\r\n                    space-id=\"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n                    :collection-id=\"props.collectionId\"\r\n                />\r\n\r\n                <collection-side-menu-property-edit-handle-groups\r\n                    v-if=\"property.type === 'status'\"\r\n                    :collection-id=\"props.collectionId\"\r\n                    :property-id=\"props.propertyId\"\r\n                    space-id=\"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n                />\r\n\r\n                <collection-side-menu-property-edit-relation\r\n                    v-if=\"property.type === 'relation'\"\r\n                />\r\n            </div>\r\n\r\n        </template>\r\n\r\n        <template #footer>\r\n            <div style=\"padding-top: 6px; padding-bottom: 6px; box-shadow: rgba(55, 53, 47, 0.09) 0px -1px 0px; margin-top: 1px;\">\r\n                <collection-side-menu-property-edit-footer\r\n                    @property-delete=\"handlePropertyDelete\"\r\n                />\r\n            </div>\r\n        </template>\r\n    </base-collection-side-menu>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps } from 'vue';\r\nimport { Collection } from '@/entities/Collection';\r\nimport BaseButton from '@/ui/components/BaseButton.vue';\r\nimport BaseCollectionSideMenu from '@/ui/components/BaseCollectionSideMenu.vue';\r\nimport BaseCollectionSideMenuItemCol3 from '@/ui/components/BaseCollectionSideMenuItemCol3.vue';\r\nimport CollectionSideMenuPropertyEditHandleOptions from '@/ui/components/CollectionSideMenuPropertyEditHandleOptions.vue';\r\nimport CollectionSideMenuPropertyEditRelation from \"@/ui/components/CollectionSideMenuPropertyEditRelation.vue\";\r\nimport CollectionSideMenuPropertyEditHandleGroups from '../components/CollectionSideMenuPropertyEditHandleGroups.vue';\r\nimport CollectionSideMenuPropertyEditFooter from '@/ui/components/CollectionSideMenuPropertyEditFooter.vue';\r\nimport { useCollectionsStore } from '@/stores/collections';\r\nimport { useRecordValuesStore } from '@/stores/recordValues';\r\nimport { makeOperation } from '@/services/transactions/factories/makeOperation';\r\nimport { useTransactionsQueue } from '@/stores/transactionsQueue';\r\nimport { makeTransaction } from '@/services/transactions/factories/makeTransaction';\r\nimport { CollectionView } from '@/entities/CollectionView';\r\n\r\nconst props = defineProps({\r\n    collectionId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    collectionViewId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    propertyId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst recordValuesStore = useRecordValuesStore();\r\n\r\nconst collectionStore = useCollectionsStore();\r\n\r\nconst collectionRecordInStore = recordValuesStore.getRecordValue({\r\n    id: props.collectionId,\r\n    table: \"collection\",\r\n    spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n});\r\n\r\nconst property = Collection.prototype.getPropertyById.call(\r\n    collectionRecordInStore,\r\n    ...[props.propertyId]\r\n)\r\n\r\nfunction displayTypesList() {\r\n    if (property.type === 'title') return;\r\n    collectionStore.setCurrentComponent(\"propertyTypes\", {\r\n        id: props.propertyId\r\n    })\r\n}\r\n\r\nfunction handlePropertyNameChange(e) {  \r\n    useTransactionsQueue().enqueue(\r\n        makeTransaction({\r\n            spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\",\r\n            debug: {\r\n                userAction: \"CollectionSideMenuPropertyEditView->handlePropertyDelete\"\r\n            },\r\n            operations: [                \r\n                makeOperation(\r\n                    \"set\",\r\n                    e.target.value,\r\n                    ['schema', props.propertyId, \"name\"],        \r\n                    {\r\n                        id: props.collectionId,\r\n                        table: \"collection\",\r\n                        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n                    }\r\n                )\r\n            ]\r\n        })\r\n    );\r\n}\r\n\r\nfunction handlePropertyDelete() {\r\n    const updatedSchema = {};\r\n\r\n    for(const key in collectionRecordInStore.schema) {\r\n        if(key !== props.propertyId) {\r\n            updatedSchema[key] = collectionRecordInStore.schema[key];\r\n        }\r\n    }\r\n\r\n    const collectionViewRecordValueInStore = recordValuesStore.getRecordValue({\r\n        id: props.collectionViewId,\r\n        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\",\r\n        table: \"collection_view\"\r\n    });\r\n\r\n    const collectionViewProperties = CollectionView.prototype.getProperties.call(collectionViewRecordValueInStore);\r\n    const targetIndex = collectionViewProperties.findIndex(({property: propertyId}) => propertyId === props.propertyId);\r\n\r\n    if(targetIndex !== -1) collectionViewProperties.splice(targetIndex, 1);\r\n\r\n    useTransactionsQueue().enqueue(\r\n        makeTransaction({\r\n            spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\",\r\n            debug: {\r\n                userAction: \"CollectionSideMenuPropertyEditView->handlePropertyDelete\"\r\n            },\r\n            operations: [\r\n                makeOperation(\r\n                    \"update\",\r\n                    {\r\n                        schema: updatedSchema\r\n                    },\r\n                    [],\r\n                    {\r\n                        id: props.collectionId,\r\n                        table: \"collection\",\r\n                        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n                    }\r\n                ),\r\n                makeOperation(\r\n                    \"update\",\r\n                    {\r\n                        format: collectionViewRecordValueInStore.format\r\n                    },\r\n                    [],\r\n                    {\r\n                        id: props.collectionViewId,\r\n                        table: \"collection_view\",\r\n                        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n                    }\r\n                )\r\n            ]\r\n        })\r\n    );\r\n\r\n    collectionStore.removeCurrentComponent();\r\n}\r\n\r\nfunction getPropertyLabelFromType(_type) {\r\n    if (_type === \"title\") {\r\n        return \"Title\"\r\n    }\r\n    \r\n    return collectionStore.types.find(({type}) => type === _type).label;\r\n}\r\n</script>","import script from \"./CollectionSideMenuPropertyEditView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionSideMenuPropertyEditView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <base-collection-side-menu\r\n        :top-part=\"false\"\r\n    >\r\n        <template #header>\r\n            New Property On Paid Task\r\n        </template>\r\n\r\n        <template #mid-part>\r\n            <div style=\"padding-top: 12px; padding-bottom: 4px;\">\r\n                <div style=\"display: flex; align-items: center; min-height: 28px; font-size: 14px; line-height: 120%; user-select: none; max-width: 100%;\">\r\n                    <div style=\"min-width: 0px; margin-right: 12px; margin-left: 12px; flex: 1 1 auto;\">\r\n                        <div style=\"display: flex;\">\r\n                            <div class=\"xdoc-focusable-within\" style=\"display: flex; align-items: center; width: 100%; font-size: 14px; line-height: 20px; padding: 3px 6px; position: relative; border-radius: 4px; box-shadow: rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset; background: rgba(242, 241, 238, 0.6); cursor: text; height: 28px;\">\r\n                                <input \r\n                                    v-model=\"state.filterString\"\r\n                                    placeholder=\"Search or add new property\"\r\n                                    type=\"text\"\r\n                                    style=\"font-size: inherit; line-height: inherit; border: none; background: none; width: 100%; display: block; resize: none; padding: 0px;\"\r\n                                >\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div\r\n                tabindex=\"0\"\r\n                role=\"menu\"\r\n                aria-activedescendant=\":ra:\"\r\n            >\r\n                <div style=\"padding-top: 6px; padding-bottom: 6px;\">\r\n                    <collection-side-menu-category>Type</collection-side-menu-category>\r\n                </div>\r\n\r\n                <div style=\"padding-top: 6px; padding-bottom: 6px;\">\r\n                    <base-collection-property-types\r\n                        :filterString=\"state.filterString\"\r\n                        :filterTypesOnUserInput=true\r\n                        @property-type-select=\"handlePropertyTypeSelect\"\r\n                    ></base-collection-property-types>\r\n                </div>\r\n            </div>\r\n        </template>\r\n    </base-collection-side-menu>\r\n</template>\r\n\r\n<script setup>\r\nimport BaseCollectionSideMenu from './BaseCollectionSideMenu.vue';\r\nimport BaseCollectionPropertyTypes from './BaseCollectionPropertyTypes.vue';\r\nimport CollectionSideMenuCategory from './CollectionSideMenuCategory.vue';\r\nimport { reactive, defineProps } from 'vue';\r\nimport { useCollectionsStore } from '@/stores/collections';\r\nimport { useRecordValuesStore } from '@/stores/recordValues';\r\nimport { Collection } from '@/entities/Collection';\r\nimport { useTransactionsQueue } from '@/stores/transactionsQueue';\r\nimport { makeTransaction } from '@/services/transactions/factories/makeTransaction';\r\nimport { makeOperation } from '@/services/transactions/factories/makeOperation';\r\n\r\nconst props = defineProps({\r\n    collectionId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    propertyId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst state = reactive({\r\n    filterString: ''\r\n})\r\n\r\nconst collectionStore = useCollectionsStore();\r\n\r\nfunction handlePropertyTypeSelect({type}) {\r\n    const propertyName = Collection.prototype.getPropertyById.call(\r\n        useRecordValuesStore().getRecordValue({\r\n            id: props.collectionId,\r\n            table: \"collection\",\r\n            spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n        }),\r\n        ...[props.propertyId]\r\n    ).name;\r\n\r\n    useTransactionsQueue().enqueue(\r\n        makeTransaction({\r\n            spaceId: \"\",\r\n            debug: {\r\n                userAction: \"CollectionSideMenuPropertyEditType->handlePropertyTypeSelect\"\r\n            },\r\n            operations: [\r\n                makeOperation(\r\n                    \"update\",\r\n                    {\r\n                        [props.propertyId]: {\r\n                            name: propertyName, \r\n                            type\r\n                        }\r\n                    },\r\n                    ['schema'],\r\n                    {\r\n                        id: props.collectionId,\r\n                        table: \"collection\",\r\n                        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n                    }\r\n                )\r\n            ]\r\n        })\r\n    );\r\n    \r\n    collectionStore.removeCurrentComponent();\r\n}\r\n</script>","import script from \"./CollectionSideMenuPropertyEditType.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionSideMenuPropertyEditType.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <base-collection-side-menu\r\n        :top-part=\"false\"\r\n    >\r\n        <template #header>Sub-items</template>\r\n\r\n        <template #mid-part>\r\n            <div style=\"margin-left: 12px; margin-right: 12px; font-size: 12px; padding-top: 6px; padding-bottom: 6px; font-weight: 400; color: rgba(55, 53, 47, 0.65);\"\r\n            >Use sub-items to break large items into smaller, more manageable chunks.</div>\r\n        \r\n            <div style=\"display: flex; padding-top: 6px; padding-bottom: 6px; margin: 0 12px;\">\r\n                <base-button style=\"height: 32px; flex: 1 1 0%; white-space: nowrap; border-radius: 3px; border-bottom-left-radius: 3px; padding-left: 12px; padding-right: 12px; font-weight: 500;\"\r\n                    :default-style=\"isSubItemOn ? {background: 'rgba(55, 53, 47, 0.08)'} : {background: 'rgb(35, 131, 226)', color: 'white'}\"\r\n                    :hover-style=\"isSubItemOn ? {background: 'rgba(55, 53, 47, 0.08)', color: 'rgb(235, 87, 87) !important'} : {background: 'rgb(0, 119, 212)', color: 'white'}\"\r\n                    @click.stop=\"handleSubItems\"\r\n                >Turn {{ isSubItemOn ? 'off' : 'on' }} sub-items</base-button>\r\n            </div>\r\n        </template>\r\n    </base-collection-side-menu>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps, ref } from 'vue';\r\nimport BaseCollectionSideMenu from './BaseCollectionSideMenu.vue';\r\nimport BaseButton from './BaseButton.vue';\r\nimport { useRecordValuesStore } from '@/stores/recordValues';\r\nimport { useTransactionsQueue } from '@/stores/transactionsQueue';\r\nimport { makeTransaction } from '@/services/transactions/factories/makeTransaction';\r\nimport { makeOperation } from '@/services/transactions/factories/makeOperation';\r\nimport { CollectionProperty } from '@/entities/CollectionProperty';\r\n\r\nconst props = defineProps({\r\n    collectionId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    collectionViewId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst collectionViewRecordValueInStore = useRecordValuesStore().getRecordValue({\r\n    id: props.collectionViewId,\r\n    table: \"collection_view\",\r\n    spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n});\r\n\r\nconst collectionRecordValueInStore = useRecordValuesStore().getRecordValue({\r\n    id: props.collectionId,\r\n    table: \"collection\",\r\n    spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n})\r\n\r\nconst isSubItemOn = ref(false);\r\nif (\r\n    collectionRecordValueInStore?.format?.subitem_property\r\n) isSubItemOn.value = true;\r\n\r\n\r\nfunction handleSubItems() {\r\n    isSubItemOn.value = !isSubItemOn.value;\r\n    \r\n    if(isSubItemOn.value) {\r\n        const propertyIds = Object.keys(\r\n            collectionRecordValueInStore?.schema\r\n        )\r\n\r\n        const [propertyId, propertyValue] = Object.entries(\r\n            new CollectionProperty({\r\n                bannedIds: propertyIds,\r\n                type: 'relation',\r\n                name: 'Sub-item'\r\n            })\r\n        )[0];\r\n\r\n        const collectionPageProperties = collectionViewRecordValueInStore?.format?.collection_page_properties || [];\r\n\r\n        collectionPageProperties.push({\r\n            property: propertyId,\r\n            visible: true\r\n        });\r\n\r\n        const collectionViewPointer = {\r\n            table: \"collection_view\",\r\n            id: props.collectionViewId,\r\n            spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n        };\r\n\r\n        const collectionPointer = {\r\n            table: \"collection\",\r\n            id: props.collectionId,\r\n            spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n        };\r\n\r\n        useTransactionsQueue().enqueue(\r\n            makeTransaction({\r\n                spaceId: \"\",\r\n                debug: {\r\n                    userAction: \"CollectionSideMenuSubItemssMenu\"\r\n                },\r\n                operations: [\r\n                    makeOperation(\r\n                        \"update\",\r\n                        {\r\n                            collection_page_properties: collectionPageProperties\r\n                        },\r\n                        [\"format\"],\r\n                        collectionViewPointer\r\n                    ),\r\n                    makeOperation(\r\n                        \"update\",\r\n                        {\r\n                            [propertyId]: propertyValue\r\n                        },\r\n                        [\"schema\"],\r\n                        collectionPointer\r\n                    ),\r\n                    makeOperation(\r\n                        \"update\",\r\n                        {\r\n                            [propertyId]: {\r\n                                type: \"relation\",\r\n                                name: propertyValue.name,\r\n                                collection_id: props.collectionId,\r\n                                collection_pointer: collectionPointer,\r\n                            }\r\n                        },\r\n                        [\"schema\"],\r\n                        collectionPointer\r\n                    ),\r\n                    makeOperation(\r\n                        \"update\",\r\n                        {\r\n                            subitem_property: propertyId\r\n                        },\r\n                        [\"format\"],\r\n                        collectionPointer\r\n                    )\r\n                ]\r\n            })\r\n        )\r\n    }\r\n}\r\n</script>","import script from \"./CollectionSideMenuSubItemsMenu.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionSideMenuSubItemsMenu.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div style=\"position: absolute; top: 1px; right: -96px; height: 200px; background: white; border-left: 1px solid rgb(233, 233, 231); padding-right: 96px; z-index: 87; transition-property: opacity, transform; transition-duration: 270ms; transition-timing-function: ease;\"\r\n        :style=\"`height: ${props.height}px;`\"\r\n        v-if=\"componentInView !== null\"\r\n    >\r\n        <div style=\"display: flex; height: 100%;\">\r\n            <div style=\"box-shadow: rgb(233, 233, 231) 0px -1px 0px;\">\r\n                <div style=\"display: flex; flex-direction: column; min-width: 290px; max-width: 290px; height: 100%; max-height: calc(100% - 16px);\">\r\n                    <collection-side-menu-options \r\n                        v-if=\"componentInView.name === 'main'\"\r\n                        :collection-id=\"props.collectionId\"\r\n                        :collection-view-id=\"props.collectionViewId\"\r\n                    ></collection-side-menu-options>\r\n                    \r\n                    <collection-side-menu-properties \r\n                        v-if=\"componentInView.name === 'properties'\"\r\n                        :collection-id=\"props.collectionId\"\r\n                        :collection-view-id=\"props.collectionViewId\"\r\n                    ></collection-side-menu-properties>\r\n\r\n                    <collection-side-menu-property-create-relation \r\n                        v-if=\"componentInView.name === 'propertyCreateRelationChooseCollection'\"\r\n                        :collection-id=\"props.collectionId\"\r\n                        :collection-view-id=\"props.collectionViewId\"\r\n                        :property-id=\"componentInView.props.id\"\r\n                    />\r\n\r\n                    <collection-side-menu-property-create \r\n                        v-if=\"componentInView.name === 'propertyCreate'\"\r\n                        :collection-id=\"props.collectionId\"\r\n                        :collection-view-id=\"props.collectionViewId\"\r\n                    ></collection-side-menu-property-create>\r\n\r\n                    <collection-side-menu-property-edit-view \r\n                        v-if=\"componentInView.name === 'propertyEdit'\"\r\n                        :collection-id=\"props.collectionId\"\r\n                        :collection-view-id=\"props.collectionViewId\"\r\n                        :property-id=\"componentInView.props.id\"\r\n                    ></collection-side-menu-property-edit-view>\r\n                \r\n                    <collection-side-menu-property-edit-type\r\n                        v-if=\"componentInView.name === 'propertyTypes'\"\r\n                        :collection-id=\"props.collectionId\"\r\n                        :property-id=\"componentInView.props.id\"\r\n                    ></collection-side-menu-property-edit-type>\r\n\r\n                    <collection-side-menu-sub-items-menu\r\n                        v-if=\"componentInView.name === 'subitems'\"\r\n                        :collection-id=\"props.collectionId\"\r\n                        :collection-view-id=\"props.collectionViewId\"\r\n                    ></collection-side-menu-sub-items-menu>\r\n                </div>\r\n            </div>\r\n\r\n            <div style=\"width: 96px;\"></div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps, computed } from 'vue';\r\nimport { useCollectionsStore } from '@/stores/collections';\r\nimport CollectionSideMenuProperties from '@/ui/components/CollectionSideMenuProperties.vue';\r\nimport CollectionSideMenuOptions from '@/ui/components/CollectionSideMenuOptions.vue';\r\nimport CollectionSideMenuPropertyCreate from '@/ui/components/CollectionSideMenuPropertyCreate.vue';\r\nimport CollectionSideMenuPropertyCreateRelation from '../components/CollectionSideMenuPropertyCreateRelation.vue';\r\nimport CollectionSideMenuPropertyEditView from '@/ui/views/CollectionSideMenuPropertyEditView.vue';\r\nimport CollectionSideMenuPropertyEditType from '@/ui/components/CollectionSideMenuPropertyEditType.vue';\r\nimport CollectionSideMenuSubItemsMenu from '../components/CollectionSideMenuSubItemsMenu.vue';\r\n\r\nconst props = defineProps({\r\n    height: {\r\n        type: Number,\r\n        required: true\r\n    },\r\n    collectionId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    collectionViewId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst collectionStore = useCollectionsStore();\r\n\r\nconst componentInView = computed(function () {\r\n    return collectionStore.getCurrentComponent;\r\n})\r\n</script>","import script from \"./CollectionSideMenuView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionSideMenuView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"xdoc-collection-view-tab-button\"\r\n        style=\"display: flex; align-items: center; background: none; height: 100%;\"\r\n        @click=\"handleViewBtnClick\"\r\n    >\r\n        <div role=\"tab\"\r\n            tabindex=\"0\"\r\n            aria-selected=\"false\"\r\n            style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; display: flex; align-items: center; flex-shrink: 0; white-space: nowrap; height: 28px; border-radius: 4px; font-size: 14px; line-height: 1.2; min-width: 0px; padding-left: 8px; padding-right: 8px; color: rgba(55, 53, 47, 0.65); font-weight: 500; max-width: 220px;\"\r\n        >\r\n            <svg v-if=\"collectionViewTabRecordValueInStore.type === 'table'\" role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"collectionTable\" style=\"width: 16px; height: 16px; display: block; fill: rgba(55, 53, 47, 0.65); flex-shrink: 0; margin-right: 6px;\">\r\n                <path d=\"M2.39697 14.4634H13.5964C15.0532 14.4634 15.8311 13.6921 15.8311 12.2485V4.24609C15.8311 2.80249 15.0532 2.03125 13.5964 2.03125H2.39697C0.940186 2.03125 0.162354 2.7959 0.162354 4.24609V12.2485C0.162354 13.6987 0.940186 14.4634 2.39697 14.4634ZM1.63232 4.39771C1.63232 3.79126 1.94214 3.50122 2.52222 3.50122H7.28809V5.74243H1.63232V4.39771ZM13.4712 3.50122C14.0447 3.50122 14.3611 3.79126 14.3611 4.39771V5.74243H8.70532V3.50122H13.4712ZM1.63232 9.3811V7.10693H7.28809V9.3811H1.63232ZM8.70532 9.3811V7.10693H14.3611V9.3811H8.70532ZM2.52222 12.9934C1.94214 12.9934 1.63232 12.7034 1.63232 12.0969V10.7522H7.28809V12.9934H2.52222ZM14.3611 12.0969C14.3611 12.7034 14.0447 12.9934 13.4712 12.9934H8.70532V10.7522H14.3611V12.0969Z\">\r\n                </path>\r\n            </svg>\r\n\r\n            <span style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 1px;\">{{ CollectionView.prototype.getName.call(collectionViewTabRecordValueInStore) }}</span>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps, defineEmits } from 'vue';\r\nimport { useRecordValuesStore } from '@/stores/recordValues';\r\nimport { CollectionView } from '@/entities/CollectionView';\r\nconst emits = defineEmits([\r\n    \"view-change\"\r\n])\r\n\r\nconst props = defineProps({\r\n    blockId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    spaceId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst recordValuesStore = useRecordValuesStore();\r\n\r\nconst collectionViewTabRecordValueInStore = recordValuesStore.getRecordValue({\r\n    id: props.blockId,\r\n    table: \"collection_view\",\r\n    spaceId: props.spaceId\r\n})\r\n\r\nfunction handleViewBtnClick() {\r\n    console.log(collectionViewTabRecordValueInStore.id)\r\n    emits(\"view-change\", collectionViewTabRecordValueInStore.id)\r\n}\r\n</script>","import script from \"./CollectionViewTab.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionViewTab.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div\r\n        role=\"tablist\"\r\n        style=\"display: flex; align-items: center; height: 100%; flex-grow: 1;\"\r\n    >\r\n        <base-data-provider\r\n            v-for=\"viewId in collectionViewsIdsRecordValueInStore\" \r\n            :pointer=\"{\r\n                id: viewId,\r\n                table: 'collection_view',\r\n                spaceId: props.spaceId\r\n            }\"\r\n            :key=\"viewId\"\r\n            v-slot=\"{ recordValueInStore }\"\r\n        >\r\n            <div style=\"display: inline-flex; margin: 0px; height: 100%;\">\r\n                <div style=\"display: flex; flex-direction: row;\">\r\n                    <collection-view-tab\r\n                        v-if=\"recordValueInStore\"\r\n                        :block-id=\"viewId\"\r\n                        :space-id=\"props.spaceId\"\r\n                    ></collection-view-tab>\r\n                </div>\r\n            </div>\r\n        </base-data-provider>\r\n\r\n        <base-button\r\n            class=\"xdoc-collection-add-view\"\r\n            style=\"user-select: none; transition-behavior: normal;\r\n            transition-delay: 0s; cursor: pointer; flex-shrink: 0; height: 24px; width: 24px; opacity: 1;\"\r\n        >\r\n            <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"plus\" style=\"width: 14px; height: 14px; display: block; fill: rgba(55, 53, 47, 0.45); flex-shrink: 0;\"><path d=\"M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z\"></path></svg>\r\n        </base-button>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport BaseButton from './BaseButton.vue';\r\nimport BaseDataProvider from './BaseDataProvider.vue';\r\nimport CollectionViewTab from './CollectionViewTab.vue';\r\nimport { useRecordValuesStore } from '@/stores/recordValues';\r\nimport { defineProps, computed } from 'vue';\r\n\r\nconst props = defineProps({\r\n    collectionId: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    spaceId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst recordValuesStore = useRecordValuesStore();\r\n\r\nconst collectionViewsIdsRecordValueInStore = computed(function() {\r\n    return recordValuesStore.getRecordValue({\r\n        id: props.collectionId,\r\n        table: \"collection\",\r\n        spaceId: props.spaceId\r\n    }).view_ids;\r\n})\r\n</script>","import script from \"./CollectionViewsTabsList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionViewsTabsList.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <base-data-provider\r\n        :pointer=\"{\r\n            id: collectionId,\r\n            table: 'collection',\r\n            spaceId: 'f2cf1fd1-8789-4ddd-9190-49f41966c446'\r\n        }\"\r\n        v-slot=\"{ recordValueInStore: collectionRecordValueInStore}\"\r\n    >\r\n        <div \r\n            v-if=\"collectionRecordValueInStore !== undefined\"\r\n            class=\"xdoc-scroller vertical horizontal\"\r\n            style=\"z-index: 1; display: flex; flex-direction: column; flex-grow: 1; position: relative; margin-bottom: 0;\"\r\n            :style=\"`${state.displayCollectionSideMenu ? 'overflow: auto hidden; margin-right: 10px;' : 'overflow: auto; margin-right: 0;'}`\"\r\n        >\r\n            <div style=\"position: absolute; top: 0; left: 0;\">\r\n                <div></div>\r\n            </div>\r\n\r\n            <div style=\"width: 100%; display: flex; flex-direction: column; align-items: center; flex-shrink: 0; flex-grow: 0; position: sticky; left: 0px;\">\r\n                <div\r\n                    class=\"pseudoSelection\"\r\n                    data-content-editable-void=\"true\"\r\n                    style=\"user-select: none; --psuedoSelection--background: transparent; width: 100%; display: flex; flex-direction: column; align-items: center; flex-shrink: 0; flex-grow: 0; position: sticky; left: 0px; z-index: 2;\"\r\n                ></div>\r\n\r\n                <div style=\"max-width: 100%; padding-left: calc(96px + env(safe-area-inset-left)); width: 100%; transition-property: width; transition-duration: 270ms; transition-timing-function: ease;\">\r\n                    <div \r\n                        class=\"xdoc-page-controls\"\r\n                        style=\"display: flex; justify-content: flex-start; flex-wrap: wrap; margin-top: 4px; margin-bottom: 4px; margin-left: -1px; color: rgba(55, 53, 47, 0.5); font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; height: 24px; pointer-events: auto;\"\r\n                    ></div>\r\n\r\n                    <div style=\"padding-right: calc(96px + env(safe-area-inset-right)); margin-bottom: 8px;\">\r\n                        <base-button class=\"xdoc-record-icon notranslate\"\r\n                            aria-label=\"Change page icon\" style=\"user-select: none;\"\r\n                        ></base-button>\r\n                        \r\n                        <div style=\"display: flex; align-items: flex-start;\">\r\n                            <div>\r\n                                <div :data-block-id=\"props.pageId\"\r\n                                    style=\"color: rgb(55, 53, 47); font-weight: 700; line-height: 1.2; font-size: 32px; cursor: text; display: flex; align-items: center;\"\r\n                                >\r\n                                    <h1 contenteditable=\"true\"\r\n                                        placeholder=\"Untitled\"\r\n                                        style=\"max-width: 100%; width: 100%; font-size: 1em; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); font-weight: inherit; margin: 0;\"\r\n                                    >{{ collectionRecordValueInStore.name?.[0]?.[0] }}</h1>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style=\"margin-left: 4px\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div contenteditable=\"false\"\r\n                data-content-editable-void=\"true\"\r\n                style=\"min-height: 40px; padding-left: 96px; padding-right: 96px; flex-shrink: 0; position: sticky; z-index: 86; left: 0;\"\r\n            >\r\n                <div :data-block-id=\"collectionId\"\r\n                    class=\"xdoc-selectable xdoc-collection_view-block\"\r\n                >\r\n                    <div style=\"display: flex; align-items: center; height: 40px; left: 96px; width: 100%;\">\r\n                        <!-- collection-tabs -->\r\n                        <collection-views-tabs-list\r\n                            :collection-id=\"props.pageId\"\r\n                            space-id=\"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n                        ></collection-views-tabs-list>\r\n\r\n                        <!-- collection-view buttons -->\r\n                        <div style=\"display: flex; align-items: center; gap: 2px; opacity: 1;\">\r\n                            <base-button style=\"flex-shrink: 0; white-space: nowrap; height: 28px; min-width: 0px; font-size: 14px; line-height: 1; color: rgba(55, 53, 47, 0.65); font-weight: 400; padding: 6px;\"\r\n                            >\r\n                                Filter\r\n                            </base-button>\r\n\r\n                            <base-button style=\"flex-shrink: 0; white-space: nowrap; height: 28px; min-width: 0px; font-size: 14px; line-height: 1; color: rgba(55, 53, 47, 0.65); font-weight: 400; padding: 6px;\"\r\n                            >\r\n                                Sort\r\n                            </base-button>\r\n\r\n                            <base-button style=\"flex-shrink: 0; height: 28px; width: 28px; font-size: 14px; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.45); padding: 6px;\"\r\n                            >\r\n                                <svg role=\"graphics-symbol\" viewBox=\"0 0 14 22\" class=\"boltFilled\" style=\"height: 14px; display: block; fill: rgba(55, 53, 47, 0.65); flex-shrink: 0;\"><path d=\"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z\"></path></svg>\r\n                            </base-button>\r\n\r\n                            <base-button style=\"flex-shrink: 0; height: 28px; width: 28px; font-size: 14px; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.45); padding: 6px;\"\r\n                            >\r\n                                <svg role=\"graphics-symbol\" viewBox=\"0 0 16 16\" class=\"collectionSearch\" style=\"width: 14px; display: block; fill: rgba(55, 53, 47, 0.65); flex-shrink: 0;\"><path d=\"M0 6.35938C0 9.86719 2.85156 12.7188 6.35938 12.7188C7.66406 12.7188 8.85938 12.3203 9.85938 11.6406L13.4531 15.2344C13.6719 15.4609 13.9766 15.5625 14.2812 15.5625C14.9453 15.5625 15.4219 15.0625 15.4219 14.4141C15.4219 14.1016 15.3125 13.8125 15.1016 13.5938L11.5312 10.0156C12.2734 8.99219 12.7188 7.72656 12.7188 6.35938C12.7188 2.85156 9.86719 0 6.35938 0C2.85156 0 0 2.85156 0 6.35938ZM1.65625 6.35938C1.65625 3.76562 3.75781 1.65625 6.35938 1.65625C8.95312 1.65625 11.0625 3.76562 11.0625 6.35938C11.0625 8.95312 8.95312 11.0625 6.35938 11.0625C3.75781 11.0625 1.65625 8.95312 1.65625 6.35938Z\"></path></svg>\r\n                            </base-button>\r\n\r\n                            <base-button style=\"font-size: 14px; height: 28px; width: 28px; display: flex; align-items:  center; justify-content: center; flex-shrink: 0; color: rgba(55, 53, 47, 0.65); fill: rgba(55, 53, 47, 0.45); line-height: 1; padding: 6px; font-weight: 400;\"\r\n                                @click.stop=\"changeCollectionMenuVisibilityAndHeight(!state.collectionMenuShow)\"\r\n                            >\r\n                                <svg role=\"graphics-symbol\" viewBox=\"0 0 13 3\" class=\"dots\" style=\"height: 3px; display: block; fill: rgba(55, 53, 47, 0.65); flex-shrink: 0;\"><g><path d=\"M3,1.5A1.5,1.5,0,1,1,1.5,0,1.5,1.5,0,0,1,3,1.5Z\"></path><path d=\"M8,1.5A1.5,1.5,0,1,1,6.5,0,1.5,1.5,0,0,1,8,1.5Z\"></path><path d=\"M13,1.5A1.5,1.5,0,1,1,11.5,0,1.5,1.5,0,0,1,13,1.5Z\"></path></g></svg>\r\n                            </base-button>\r\n\r\n                            <div class=\"xdoc-collection-view-item-add\"\r\n                                style=\"font-size: 14px; position: relative; display: inline-flex; flex-shrink: 0; border-radius: 3px; overflow: hidden; height: 28px; margin-left: 8px;\"\r\n                            >\r\n                                <base-button style=\"white-space: nowrap; border-radius: 0; border-top-left-radius: 3px; border-bottom-left-radius: 3px; padding-left: 8px; padding-right: 8px; color: white; font-weight: 500;\"\r\n                                    @click.stop=\"handleClickNew\"\r\n                                    :hover-style=\"{background: 'rgb(0, 119, 212)'}\"\r\n                                    :default-style=\"{background: 'rgb(35, 131, 226)'}\"\r\n                                >\r\n                                    New\r\n                                </base-button>\r\n\r\n                                <base-button\r\n                                    @click.stop=\"handleDisplayTemplatesList\"\r\n                                    :hover-style=\"{background: 'rgb(0, 119, 212)'}\"\r\n                                    :default-style=\"{background: 'rgb(35, 131, 226)'}\"\r\n                                    style=\"width: 24px; align-self: stretch; border-radius: 0; border-top-right-radius: 3px; border-bottom-right-radius: 3px; box-shadow: rgba(55, 53, 47, 0.16) 1px 0px 0px inset;\"\r\n                                >\r\n                                    <svg role=\"graphics-symbol\" viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: white; flex-shrink: 0; margin-top: 2px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg>\r\n                                </base-button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- collection side menu -->\r\n            <div ref=\"propertyMenuTopParent\" style=\"position: sticky; height: 0px; left: 0px; z-index: 87;\">\r\n                <transition name=\"fade\">\r\n                    <collection-side-menu-view \r\n                        v-if=\"state.displayCollectionSideMenu && noComponentInSideMenu\"\r\n                        @close=\"state.displayCollectionSideMenu = false\"\r\n                        :collection-id=\"collectionId\"\r\n                        :collection-view-id=\"currentCollectionViewId\"\r\n                        :height=state.sideMenuHeight\r\n                    />\r\n                </transition>\r\n            </div>\r\n\r\n            <!-- collection view -->\r\n            <div contenteditable=\"false\"\r\n                data-content-editable-void=\"true\"\r\n                style=\"flex-grow: 1; flex-shrink: 0; display: flex; flex-direction: column; position: relative;\"\r\n            >\r\n                <div class=\"xdoc-scroller xdoc-collection-view-body\"\r\n                    style=\"z-index: 1; flex-grow: 1; flex-shrink: 0; margin-right: 0px; margin-bottom: 0px;\"\r\n                    v-if=\"isQueryCollectionRequestComplete\"\r\n                >\r\n\r\n                    <base-data-provider\r\n                        :pointer=\"{\r\n                            id: currentCollectionViewId,\r\n                            table: 'collection_view',\r\n                            spaceId: 'f2cf1fd1-8789-4ddd-9190-49f41966c446'\r\n                        }\"\r\n                        v-slot=\"{ recordValueInStore}\"\r\n                    >\r\n                        <template v-if=\"recordValueInStore\">          \r\n                            <collection-view-table \r\n                                v-if=\"recordValueInStore.type === 'table'\"  \r\n                                @add-items=\"addRecordInItemsList\"\r\n                                @collapse=\"handleItemCollapse($event)\"\r\n                                :items=\"collectionItems\"\r\n                                :collection-id=\"collectionId\"\r\n                                :collection-view-id=\"currentCollectionViewId\"\r\n                            ></collection-view-table>\r\n                        </template>\r\n                    </base-data-provider>\r\n                </div>\r\n            </div>\r\n\r\n            <div v-if=\"state.displayCollectionSideMenu && noComponentInSideMenu\" style=\"padding-left: 96px; padding-right: 96px; border-top: solid 1px rgb(233, 233, 231); height: 12px;\"></div>\r\n            \r\n            <div\r\n                class=\"xdoc-presence-container\" \r\n                style=\"position: absolute; top: 0px; left: 0px; z-index: 89;\"\r\n            >\r\n                <div></div>\r\n            </div>\r\n        </div>\r\n    </base-data-provider>\r\n</template>\r\n\r\n<script setup>\r\nimport BaseDataProvider from '../components/BaseDataProvider.vue';\r\nimport CollectionViewTable from '../components/CollectionViewTable.vue';\r\nimport BaseButton from '../components/BaseButton.vue';\r\nimport CollectionSideMenuView from './CollectionSideMenuView.vue';\r\nimport CollectionViewsTabsList from \"../components/CollectionViewsTabsList.vue\"\r\nimport { reactive, ref, defineProps, computed, onMounted } from 'vue';\r\nimport { useCollectionsStore } from '@/stores/collections';\r\nimport { useRecordValuesStore } from '@/stores/recordValues';\r\nimport { transformToStandardUUIDFormat } from '../helpers/router/transformToStandardUUIDFormat';\r\nimport uuid from '@/helpers/globals/uuid';\r\nimport { useGeneralStore } from '@/stores/general';\r\nimport { useTransactionsQueue } from '@/stores/transactionsQueue';\r\nimport { makeTransaction } from '@/services/transactions/factories/makeTransaction';\r\nimport { makeOperation } from '@/services/transactions/factories/makeOperation';\r\n\r\nconst props = defineProps({\r\n    pageId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n})\r\n\r\nconst recordValuesStore = useRecordValuesStore();\r\n\r\nconst collectionViewPageRecordValue = recordValuesStore.getRecordValue({\r\n    id: props.pageId,\r\n    table: \"block\",\r\n    spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n})\r\n\r\nconst collectionId = collectionViewPageRecordValue.collection_id;\r\n\r\nconst isQueryCollectionRequestComplete = ref(false);\r\nconst collectionItems = ref([]);\r\n\r\nonMounted(async function() {\r\n    const queryCollectionResults = await useTransactionsQueue().performQueryCollection(collectionId);\r\n    collectionItems.value = queryCollectionResults.result.reducerResults.collection_group_results.blockIds.map((id) => {\r\n        return {\r\n            id,\r\n            nestingLevel: 0\r\n        }\r\n    });\r\n\r\n    isQueryCollectionRequestComplete.value = true;\r\n});\r\n\r\nconst currentCollectionViewId = ref(collectionViewPageRecordValue.view_ids[0]);\r\n\r\nconst currentCollectionViewRecordValueInStore = computed(function() {\r\n    return recordValuesStore.getRecordValue({\r\n        id: currentCollectionViewId.value,\r\n        table: \"collection_view\",\r\n        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n    })\r\n})\r\n\r\nconst collectionStore = useCollectionsStore();\r\n\r\nconst state = reactive({\r\n    displayCollectionSideMenu: false,\r\n    sideMenuHeight: ''\r\n})\r\n\r\nconst propertyMenuTopParent = ref('')\r\n\r\nconst noComponentInSideMenu = computed(function () {\r\n    return collectionStore.getCurrentComponent !== undefined\r\n})\r\n\r\nfunction changeCollectionMenuVisibilityAndHeight(value) {\r\n    collectionStore.setCurrentComponent('main');\r\n    state.displayCollectionSideMenu = value\r\n    setSideMenuHeight()\r\n}\r\n\r\nfunction setSideMenuHeight() {\r\n    state.sideMenuHeight = window.innerHeight - propertyMenuTopParent.value.getBoundingClientRect().top;\r\n}\r\n//\r\n\r\n// functionality to handle new record in collection\r\nfunction addRecordInItemsList({ items, index = null, makeApiCallToSetRecord }) {\r\n    if (index === null || index === undefined) {\r\n        collectionItems.value.push(...items);\r\n        return;\r\n    }\r\n\r\n    const before = collectionItems.value.slice(0, index);\r\n    const after = collectionItems.value.slice(index);\r\n\r\n    collectionItems.value = [\r\n        ...before,\r\n        ...items,\r\n        ...after\r\n    ];\r\n\r\n    if(makeApiCallToSetRecord) {\r\n        const transactionQueue = useTransactionsQueue();\r\n\r\n        items.forEach((item) => {\r\n            const itemPointer = {\r\n                id: item.id,\r\n                table: \"block\",\r\n                spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n            }\r\n\r\n            const operations = [\r\n                makeOperation(\r\n                    \"set\",\r\n                    {\r\n                        id: item.id,\r\n                        type: \"page\",\r\n                        space_id: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n                    },\r\n                    [],\r\n                    itemPointer\r\n                )\r\n            ];\r\n\r\n            const setParentOperationArgs = {\r\n                parentId: collectionId,\r\n                parentTable: \"collection\"\r\n            };\r\n\r\n            const parent = before.reverse().find((row) => row.id !== \"btn\" && row.nestingLevel === 0);\r\n            \r\n            if(parent) {\r\n                setParentOperationArgs.parentId = parent.id;\r\n                setParentOperationArgs.parentTable = \"block\";\r\n            }\r\n\r\n            operations.push(\r\n                makeOperation(\r\n                    \"setParent\",\r\n                    setParentOperationArgs,\r\n                    [],\r\n                    itemPointer\r\n                )\r\n            );\r\n\r\n            if(item.nestingLevel !== 0) {\r\n                const subItemPropertyId = recordValuesStore.getRecordValue({\r\n                    id: collectionId,\r\n                    table: \"collection\",\r\n                    spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n                })?.format?.subitem_property;\r\n\r\n                operations.push(\r\n                    makeOperation(\r\n                        \"addRelationAfter\",\r\n                        {\r\n                            id: item.id,\r\n                            spaceId: itemPointer.spaceId\r\n                        },\r\n                        [\"properties\", subItemPropertyId],\r\n                        {\r\n                            id: parent.id,\r\n                            table: \"block\",\r\n                            spaceId: itemPointer.spaceId\r\n                        }\r\n                    )\r\n                )\r\n            }\r\n\r\n            operations.push(\r\n                makeOperation(\r\n                    \"update\",\r\n                    {\r\n                        created_by_id: \"ca5f99c6-879b-4562-bd41-6651fc8d2099\",\r\n                        created_by_table: \"xdoc_user\",\r\n                        created_time: 1712676869405,\r\n                        last_edited_time: 1712676869405,\r\n                        last_edited_by_id: \"ca5f99c6-879b-4562-bd41-6651fc8d2099\",\r\n                        last_edited_by_table: \"xdoc_user\"\r\n                    },\r\n                    [],\r\n                    itemPointer\r\n                )\r\n            );\r\n            \r\n            transactionQueue.enqueue(\r\n                makeTransaction({\r\n                    spaceId: \"\",\r\n                    debug: {\r\n                        userAction: \"CollectionViewPage=>addRecordInItemsList\"\r\n                    },\r\n                    operations\r\n                })\r\n            )\r\n        })\r\n    }\r\n\r\n}\r\n\r\nfunction handleItemCollapse({itemId}) {\r\n    let index = collectionItems.value.findIndex(({id}) => id === itemId);\r\n    if (index < 0) return;\r\n\r\n    const nestingLevel = collectionItems.value[index].nestingLevel;\r\n    let item = collectionItems.value[++index];\r\n\r\n    while(item && (item.nestingLevel > nestingLevel)) {\r\n        if(item.nestingLevel > nestingLevel) {\r\n            collectionItems.value.splice(index, 1);\r\n        }\r\n        else break;\r\n        item = collectionItems.value[index];\r\n    }\r\n}\r\n\r\nfunction handleClickNew() {\r\n    const blockId = transformToStandardUUIDFormat(uuid());\r\n    const spaceId = \"f2cf1fd1-8789-4ddd-9190-49f41966c446\";\r\n\r\n    recordValuesStore.setRecordValue(\r\n        blockId,\r\n        \"block\",\r\n        { id: blockId },\r\n        spaceId\r\n    );\r\n\r\n    const blockPointer = {\r\n        id: blockId,\r\n        table: \"block\",\r\n        spaceId\r\n    };\r\n\r\n    useTransactionsQueue().enqueue(\r\n        makeTransaction({\r\n            spaceId: \"\",\r\n            debug: {\r\n                userAction: \"CollectionViewPage->handleClickNew\"\r\n            },\r\n            operations: [\r\n                makeOperation(\r\n                    \"set\",\r\n                    {\r\n                        type: \"page\",\r\n                        space_id: spaceId,\r\n                        id: blockId,\r\n                        // version: 1\r\n                    },\r\n                    [],\r\n                    blockPointer\r\n                ),\r\n                makeOperation(\r\n                    \"setParent\",\r\n                    {\r\n                        parentId: collectionId,\r\n                        parentTable: \"collection\"\r\n                    },\r\n                    [],\r\n                    blockPointer\r\n                ),\r\n                makeOperation(\r\n                    \"listBefore\",\r\n                    {\r\n                        id: blockId,\r\n                        before: currentCollectionViewRecordValueInStore.value.page_sort[0]\r\n                    },\r\n                    [\"page_sort\"],\r\n                    {\r\n                        id: currentCollectionViewId.value,\r\n                        table: \"collection_view\",\r\n                        spaceId\r\n                    }\r\n                ),\r\n                makeOperation(\r\n                    \"update\",\r\n                    {\r\n                        created_by_id: \"\",\r\n                        created_by_table: \"xdoc_user\",\r\n                        created_time: Date.now(),\r\n                        last_edited_time: Date.now(),\r\n                        last_edited_by_id: \"\",\r\n                        last_edited_by_table: \"xdoc_user\"\r\n                    },\r\n                    [],\r\n                    blockPointer\r\n                )\r\n            ]\r\n        })\r\n    );\r\n}\r\n\r\n//fetches templates\r\nfunction handleDisplayTemplatesList(e) {\r\n    const generalStore = useGeneralStore();\r\n\r\n    generalStore.setCurrentComponentInDefaultOverlay(\"collection_templates_list\", {\r\n        collectionId,\r\n        collectionViewId: currentCollectionViewId,\r\n        spaceId: \"f2cf1fd1-8789-4ddd-9190-49f41966c446\"\r\n    });\r\n\r\n    const measures = e.target.getBoundingClientRect();\r\n\r\n    generalStore.dialog.width = measures?.width;\r\n    generalStore.dialog.top = measures?.top;\r\n    generalStore.dialog.left = measures?.left;\r\n}\r\n</script>\r\n\r\n<style>\r\n.fade-enter,\r\n.fade-leave-to {\r\n    opacity: 0;\r\n}\r\n\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n    transition: opacity 1s;\r\n}\r\n</style>\r\n\r\n<style scoped>\r\nh1::after {\r\n    -webkit-text-fill-color: rgba(55, 53, 47, 0.15);\r\n}\r\n</style>","import script from \"./CollectionViewPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollectionViewPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CollectionViewPage.vue?vue&type=style&index=0&id=345bbdc4&lang=css\"\nimport \"./CollectionViewPage.vue?vue&type=style&index=1&id=345bbdc4&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\test\\\\x\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-345bbdc4\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, withCtx as _withCtx } from \"vue\"\n\nconst _hoisted_1 = { key: 2 }\n\n\r\nimport RenderPage from \"./RenderPage.vue\";\r\nimport CollectionViewPage from \"../views/CollectionViewPage.vue\";\r\nimport BaseDataProvider from \"./BaseDataProvider.vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'RenderMain',\n  props: {\r\n    blockId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n},\n  setup(__props) {\n\r\nconst props = __props;\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(BaseDataProvider, {\n    pointer: {\r\n            id: props.blockId,\r\n            table: 'block',\r\n            spaceId: 'f2cf1fd1-8789-4ddd-9190-49f41966c446'\r\n        }\n  }, {\n    default: _withCtx(({ recordValueInStore }) => [\n      (recordValueInStore && recordValueInStore.type === 'page')\n        ? (_openBlock(), _createBlock(RenderPage, {\n            key: 0,\n            \"block-id\": props.blockId\n          }, null, 8, [\"block-id\"]))\n        : (recordValueInStore && recordValueInStore.type === 'collection_view_page')\n          ? (_openBlock(), _createBlock(CollectionViewPage, {\n              key: 1,\n              \"page-id\": props.blockId\n            }, null, 8, [\"page-id\"]))\n          : (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \" Sorry something unexptected happened \"))\n    ]),\n    _: 1\n  }, 8, [\"pointer\"]))\n}\n}\n\n})","<template>\r\n    <base-data-provider\r\n        :pointer=\"{\r\n            id: props.blockId,\r\n            table: 'block',\r\n            spaceId: 'f2cf1fd1-8789-4ddd-9190-49f41966c446'\r\n        }\"\r\n        v-slot=\"{ recordValueInStore }\"\r\n    >\r\n        <render-page \r\n            v-if=\"recordValueInStore && recordValueInStore.type === 'page'\"\r\n            :block-id=\"props.blockId\"\r\n        />\r\n        \r\n        <collection-view-page\r\n            v-else-if=\"recordValueInStore && recordValueInStore.type === 'collection_view_page'\" \r\n            :page-id=\"props.blockId\"\r\n        />        \r\n    \r\n        <div v-else>\r\n            Sorry something unexptected happened\r\n        </div>\r\n    </base-data-provider>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { defineProps } from \"vue\";\r\nimport RenderPage from \"./RenderPage.vue\";\r\nimport CollectionViewPage from \"../views/CollectionViewPage.vue\";\r\nimport BaseDataProvider from \"./BaseDataProvider.vue\";\r\n\r\nconst props = defineProps({\r\n    blockId: {\r\n        type: String,\r\n        required: true\r\n    }\r\n});\r\n</script>","import script from \"./RenderMain.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RenderMain.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["props","emits","isRowSelected","opacity","selectCheckboxOpacity","value","__exports__","class","style","script","render","property","propertyValue","usePropertyData","propertyValueParsed","handleClickTableViewCell","e","cellElement","target","closest","measures","getBoundingClientRect","handlePropertyValueOverlay","pageId","collectionId","propertyId","parseCommaSeparatedPropertyValues","type","CollectionView","Block","this","name","format","query2","page_sort","Object","setPrototypeOf","prototype","getProperties","table_properties","list_properties","getName","addProperty","id","properties","call","push","visible","removePropertyById","i","length","splice","recordValuesStore","collectionRecordValueInStore","getRecordValue","table","spaceId","collectionViewRecordValueInStore","collectionViewId","collectionViewPropertiesRecordValueInStore","collectionPropertyIds","keys","schema","filter","indexOf","getCollectionPropertyById","dialogPropertyValue","propertyValueDialog","handlePropertyValueRerender","needRerender","generalStore","emitAddItems","items","index","makeApiCallToSetRecord","handleAddNewItem","nestingLevel","transformToStandardUUIDFormat","uuid","expandedItemsIds","handleCollectionItemExpand","itemRecordValue","subItemPropertyId","subitem_property","itemSubItemsPropertyValue","subItemsIds","map","subItemPointer","itemId","subItems","newVal","findIndex","deep","rowSelectStatus","router","setRowSelectStatus","status","handleOpenRecord","query","p","replaceAll","pm","useCollectionsStore","state","menu","component","types","label","getters","getCurrentComponent","actions","setCurrentComponent","removeCurrentComponent","pop","removeAllComponent","collectionStore","removeLastComponent","close","emitPropertyVisibilityChangeEvent","collectionSchema","collectionViewRecordValue","collectionViewType","visiblePropertiesIds","o","hiddenPropertiesIds","collectionProperties","Set","difference","handlePropertyVisibilityChange","targetPropertyIndex","enqueue","makeTransaction","debug","userAction","operations","makeOperation","handleUserSelectPropertyEdit","componentName","totalPropertiesVisible","subItemsStatus","recordsValueStore","isNaN","collectionsStore","propertyTypes","filterTypesOnUserInput","handleUserInputPropertyName","propertyTypesInStore","filteredTypes","toLowerCase","includes","filterString","handleUserSelectType","userInput","corpus","shuffleCorpus","split","sort","Math","random","join","getUid","len","banned","uid","stopLoop","startIndex","min","floor","slice","CollectionProperty","bannedIds","options","handlePropertyTypeSelect","transactionsStore","propertyName","entries","propertyNamePostfixed","Collection","values","updatedCollectionViewProperties","handleCollectionSelection","collectionViewPropertiesInRecordValueStore","tagColorStringToRgbaRandom","colors","createNewOption","handleOptionEdit","optionId","dialog","top","left","setCurrentComponentInDefaultOverlay","handleCreateNewOption","targetDiv","keyCode","color","getOptionValueById","find","collectionRecordInStore","displayTypesList","handlePropertyNameChange","handlePropertyDelete","updatedSchema","key","collectionViewProperties","targetIndex","getPropertyLabelFromType","_type","isSubItemOn","handleSubItems","propertyIds","collectionPageProperties","collection_page_properties","collectionViewPointer","collectionPointer","collection_id","collection_pointer","componentInView","collectionViewTabRecordValueInStore","blockId","handleViewBtnClick","console","log","collectionViewsIdsRecordValueInStore","view_ids","collectionViewPageRecordValue","isQueryCollectionRequestComplete","collectionItems","async","queryCollectionResults","performQueryCollection","result","reducerResults","collection_group_results","blockIds","currentCollectionViewId","currentCollectionViewRecordValueInStore","displayCollectionSideMenu","sideMenuHeight","propertyMenuTopParent","noComponentInSideMenu","undefined","changeCollectionMenuVisibilityAndHeight","setSideMenuHeight","window","innerHeight","addRecordInItemsList","before","after","transactionQueue","forEach","item","itemPointer","space_id","setParentOperationArgs","parentId","parentTable","parent","reverse","row","created_by_id","created_by_table","created_time","last_edited_time","last_edited_by_id","last_edited_by_table","handleItemCollapse","handleClickNew","setRecordValue","blockPointer","Date","now","handleDisplayTemplatesList","width","__name","String","required","setup","__props","_ctx","_cache","BaseDataProvider","pointer","default","recordValueInStore","RenderPage","CollectionViewPage","_"],"sourceRoot":""}